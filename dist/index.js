/*!Sea.js 2.2.3|https://github.com/seajs/seajs/blob/master/LICENSE.md*/
(e=>{if(e.seajs)return;let t,i,s,a=e.seajs={},l=a.data={},d=e=>t=>({}).toString.call(t)==`[object ${e}]`,o=d("String"),p=Array.isArray,r=d("Function"),n=0,c=()=>n++,h=/[^?#]*\//,g=/\/\.\//g,_=/\/[^/]+\/\.\.\//,x=/([^:/])\/\//g,u=e=>e.match(h)[0],m=/^([^/:]+)(\/.+)$/,f=/^\/\/.|:\//,b=/^.*?\/\/.*?\//,y=(e,t)=>{let i,s=e.charAt(0);if(f.test(e))i=e;else if("."===s)i=(e=>{for(e=e.replace(g,"/");e.match(_);)e=e.replace(_,"/");return e=e.replace(x,"$1/")})((t?u(t):l.cwd)+e);else if("/"===s){let t=l.cwd.match(b);i=t?t[0]+e.substring(1):e}else i=l.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i},w=(e,t)=>{if(!e)return"";return e=(e=>{let t=e.length-1,i=e.charAt(t);return"#"===i?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===i?e:e+".js"})(e=(e=>{let t,i=l.paths;return i&&(t=e.match(m))&&o(i[t[1]])&&(e=i[t[1]]+t[2]),e})(e=(e=>{let t=l.alias;return t&&o(t[e])?t[e]:e})(e))),y(e,t)},v=document,k=u(v.URL),S=v.scripts,z=S[S.length-1],j=u((e=>e.hasAttribute?e.src:e.getAttribute("src",4))(z)||k),T=v.head,L=T.getElementsByTagName("base")[0],I=/\.css(?:\?|$)/i,C=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,Y=(e,t,i)=>{let s="onload"in e;if(i&&(C||!s))return void setTimeout(()=>{V(e,t)},1);let a=()=>{e.onload=e.onerror=e.onreadystatechange=null,i||l.debug||T.removeChild(e),e=null,t()};s?(e.onload=a,e.onerror=a):e.onreadystatechange=(()=>{/loaded|complete/.test(e.readyState)&&a()})},V=(e,t)=>{let i,s=e.sheet;if(C)s&&(i=!0);else if(s)try{s.cssRules&&(i=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(i=!0)}setTimeout(()=>{i?t():V(e,t)},20)},A=a.cache={},F={},X={},K={},H=1,M=2,N=3,R=4,J=5,$=6;function B(e,t){this.uri=e,this._cK=t||[],this.exports=null,this.status=0,this._cL={},this._cM=0}B.prototype.resolve=function(){let e=this,t=e._cK,i=[];for(let s=0,a=t.length;s<a;s++)i[s]=w(t[s],e.uri);return i},B.prototype.load=function(){let e=this;if(e.status>=N)return;e.status=N;let t,i=e.resolve(),s=e._cM=i.length;for(let a=0;a<s;a++)(t=B.get(i[a])).status<R?t._cL[e.uri]=(t._cL[e.uri]||0)+1:e._cM--;if(0===e._cM)return void e.onload();let a={};for(let e=0;e<s;e++)(t=A[i[e]]).status<H?t.fetch(a):t.status===M&&t.load();for(let e in a)a.hasOwnProperty(e)&&a[e]()},B.prototype.onload=function(){let e=this;e.status=R,e._cN&&e._cN();let t,i,s=e._cL;for(t in s)s.hasOwnProperty(t)&&((i=A[t])._cM-=s[t],0===i._cM&&i.onload());delete e._cL,delete e._cM},B.prototype.fetch=function(e){let i=this,a=i.uri;if(i.status=H,!a||X[a])return void i.load();if(F[a])return void K[a].push(i);F[a]=!0,K[a]=[i];let d=()=>{delete F[a],X[a]=!0,s&&(B.save(a,s),s=null);let e,t=K[a];for(delete K[a];e=t.shift();)e.load()},o=()=>{((e,i,s,a)=>{let l=I.test(e),d=v.createElement(l?"link":"script");s&&(d.charset=s),null!=a&&d.setAttribute("crossorigin",a),Y(d,i,l,e),l?(d.rel="stylesheet",d.href=e):(d.async=!0,d.src=e),t=d,L?T.insertBefore(d,L):T.appendChild(d),t=null})(a,d,l.charset,l.crossorigin)};e?e[a]=o:o()},B.prototype.exec=function(){let e=this;if(e.status>=J)return e.exports;e.status=J;let t=e.uri,i=e=>B.get(i.resolve(e)).exec();i.resolve=(e=>w(e,t)),i.async=((e,s)=>(B.use(e,s,t+"__cO_"+c()),i));let s=e.factory,a=r(s)?s(i,e.exports={},e):s;return void 0===a&&(a=e.exports),delete e.factory,e.exports=a,e.status=$,a},B.define=function(e,a,l){let d=arguments.length;1===d?(l=e,e=void 0):2===d&&(l=a,p(e)?(a=e,e=void 0):a=void 0),!p(a)&&r(l)&&(a=[]);let o={id:e,uri:w(e),deps:a,factory:l};if(!o.uri&&v.attachEvent){let e=(()=>{if(t)return t;if(i&&"interactive"===i.readyState)return i;let e=T.getElementsByTagName("script");for(let t=e.length;t--;){let s=e[t];if("interactive"===s.readyState)return i=s}})();e&&(o.uri=e.src)}o.uri?B.save(o.uri,o):s=o},B.save=((e,t)=>{let i=B.get(e);i.status<M&&(i.id=t.id||e,i._cK=t.deps||[],i.factory=t.factory,i.status=M)}),B.get=((e,t)=>A[e]||(A[e]=new B(e,t))),B.use=((t,i,s)=>{let a=B.get(s,p(t)?t:[t]);a._cN=(()=>{let t=[],s=a.resolve();for(let e=0,i=s.length;e<i;e++)t[e]=A[s[e]].exec();i&&i.apply(e,t),delete a._cN}),a.load()}),a.use=((e,t)=>{B.use(e,t,l.cwd+"__cu_"+c())}),e.define=B.define,a.require=(e=>{let t=B.get(w(e));return t.status<J&&(t.onload(),t.exec()),t.exports}),l.base=j,l.cwd=k,l.charset="utf-8",a.config=(e=>{for(let t in e){let i=e[t];l[t]=i}return a})})(window),(e=>{window.define?define("magix5",e):window.Magix=e()})(()=>{let e=0,t="",i=[],s=window,a=Promise,l=document,d=s.setTimeout,o=encodeURIComponent;function p(){}let r,n=JSON.stringify,c=l.head,h=s.performance,g=h.now.bind(h),_="prototype",x=t=>(t||"_")+e++,u=e=>l.getElementById(e),m=(e,t)=>e.innerHTML=t,f=e=>"\x1e"==e[0],b={},y={rootId:x(),wait:p,error(e){throw e}},w=e=>!e||"object"!=typeof e,v=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},k=e=>{e["\x1e_"]=0},{assign:S,keys:z,hasOwnProperty:j,prototype:T}=Object,L=T.toString,I=e=>L.call(e).slice(8,-1),C=e=>"Object"==I(e),Y=Array.isArray,V=c.getAttribute,A=(e,t)=>V.call(e,t),F=(e,t,i)=>{t&&!F[e]&&(F[e]=1,i=l.createElement("style"),m(i,t),c.appendChild(i))},X=(e,t,i,s)=>{try{s=Y(t)?e.apply(i,t):e.call(i,t)}catch(e){y.error(e)}return s},K=(e,t)=>e&&j.call(e,t),H=(e,i)=>{let s,a;if(w(i))f(s=i+t)&&(i=e.get(s));else for(s in i)a=i[s],a=H(e,a),i[s]=a;return i},M=(e,t)=>t._-e._;function N(e,t,i){(i=this)._=[],i.a=t||20,i.b=i.a+(e||50)}S(N[_],{get(e){let t=this._["\x1e"+e];return t&&(t._++,t=t.a),t},set(e,t){let i=this,s=i._,a="\x1e"+e,l=s[a],d=i.a;if(!l){if(s.length>i.b)for(s.sort(M);d--;)(l=s.pop())._&&i.del(l.b);l={b:e},s.push(l),s[a]=l}l.a=t,l._=1},del(e){e="\x1e"+e;let i=this._,s=i[e];s&&(s._=0,s.a=t,delete i[e])},has(e){return K(this._,"\x1e"+e)}});let R,J,$,B,O,E,W={bubbles:!0,cancelable:!0},D=[],U=(e,t,i,s)=>e.addEventListener(t,i,s),Z=(e,t,i,s)=>e.removeEventListener(t,i,s),q=(e,t,i,s,a,l)=>{let d={_:a,a:i,b:t,c:e,d(e){a?X(i,e,l):i(e)}};D.push(d),U(e,t,d.d,s)},P=(e,t,i,s,a)=>{for(let l,d=D.length;d--;)if((l=D[d]).b==t&&l._==a&&l.c==e&&l.a===i){D.splice(d,1),Z(e,t,l.d,s);break}},Q=new N,G=(e,t=1,i)=>(t&&Q.has(e)?i=Q.get(e):(i=X(Function(`return ${e}`)),t&&Q.set(e,i)),i),ee=decodeURIComponent,te=new N,ie=e=>{let i,s,a,l,d,o,p=te.get(e);if(!p){if(l={},-1==(d=e.indexOf("?"))?(i=e,o=t):(i=e.substring(0,d),o=e.substring(d+1)),o)for(d of o.split("&"))[s,a=t]=d.split("="),l[ee(s)]=f(a)?a:ee(a);te.set(e,p={a:i,b:l})}return{path:p.a,params:S({},p.b)}},se=new N,ae=(e,t,i)=>(se.has(e)?i=se.get(e):(i=G(e,0),e.includes("\x1e")?H(t,i):se.set(e,i)),i),le=navigator.scheduling,de=()=>{let e,t,i,s=g()+9,a=y.wait;for(;;){if(!J){O=R=null,0!=E&&a(E=0);break}if(B==J&&(B=null),$=J,i=J._,e=J.a,t=J.b,X(t,e,i),J=J.c,$=null,J&&(g()>s||le&&le.isInputPending())){1!=E&&a(E=1),d(de);break}}},oe=(e,t,i,s,a)=>{a={b:e,_:i,a:t},s?(O?O.c=a:J=a,O=a):((s=B||$)?(a.c=s.c,s.c=a,O==s&&(O=a)):J?(a.c=J,J=a):J=O=a,B=a),R||(R=1,d(de))},pe=(e,t,i)=>{oe(e,t,i,1)},re=e=>e.__esModule||window.Symbol&&"Module"===e[Symbol.toStringTag],ne=(e,t)=>{if(e){let i=[];seajs.use(e,(...e)=>{for(let t of e)i.push(re(t)?t.default:t);oe(t,i)})}else oe(t)},ce=(e,t,i,s)=>(p[_]=t[_],s=new p,S(s,i),s.constructor=e,e[_]=s,e),he=e=>e;let ge,_e,xe={fire(e,t){let i,s,a=this,l=a["\x1e"+e],d=0;if(t||(t={}),t.type=e,l)for(i=l.length;d<i;d++)(s=l[d])._&&(s.a=1,X(s._,t,a),s._||(l.splice(d--,1),i--),s.a=null)},on(e,t,i=0){let s,a,l,d="\x1e"+e,o=this[d]||(this[d]=[]),p={_:t,b:i};for(l=0,a=o.length;l<a;l++)if(o[l].b<i){o.splice(l,0,p),s=1;break}s||o.push(p)},off(e,t){let i,s="\x1e"+e,a=this,l=a[s];if(t){if(l&&(i=l.length))for(;i--;)if((s=l[i])._==t){s.a?s._=null:l.splice(i,1);break}}else a[s]=null}},ue={},me=(e,t,i,s)=>{t.includes("\x1e")&&(s=ue[e])&&H(s._,i)},fe=(e,t)=>{K(ue,e)||(ue[e]=t)},be=(e,t,i,s,a,l,d)=>{for(t=e.b,a=e.c;t.length;)[i,d,s]=t.shift(),oe(s,(l=a[i])&&X(l,d,a))},ye=(e,t,i)=>{let s,a,l;for(s in e.a)(l=t?(a=ue[s])&&v(a.root,t)&&(!i||a.root!=t):1)&&e.unmount(s,l)},we=e=>{let{c:t,b:i,root:s}=e;i.length=0,t&&(e.c=0,t._&&(t._=0,k(t),ye(e),t.fire("destroy"),_t(t,1),s&&e.d&&m(s,e.e))),e.f++},ve=(e,t,i)=>{let s,a,l,d,o,{id:p,root:r}=e;!e.d&&r&&(e.d=1,e.e=r.innerHTML),we(e),r&&t&&(s=ie(t),l=s.path,e.path=t,d=s.params,o=A(r,"mx5-owner"),me(o,t,d),e.g=l,S(d,i),a=e.f,ne(l,t=>{a==e.f&&(t?(wt(t),l=new t(p,r,e,d),e.c=l,_t(l),X(l.init,d,l),X(l.e,[d,e.e],l),l.f(),l.g||l.h||gt(l)):y.error(Error(`${p} cannot load:${l}`)))}))},ke=e=>e.a||(e.a=x(_e));function Se(e,t){let i=this,s=ke(e);i.id=s,i.root=e,i.f=1,i.a={},i.pId=t,i.b=[],i._=new Map,fe(s,i)}S(Se,{root:()=>ge,all:()=>ue,byId:e=>ue[e],byNode:e=>ue[e.a]}),S(Se[_],{mount(e,t,i){let s,a=this,l=a.id,d=a.a,o=ke(e);return(s=ue[o])||(K(d,o)||(a.h=0),d[o]=o,s=new Se(e,l)),ve(s,t,i),s},unmount(e,t){let i,s;var a,l,d;e=e?this.a[t?e:e.a]:this.id,(i=ue[e])&&(we(i),(l=ue[a=e])&&(delete ue[a],(d=l.root)._=0,d.a=0,l.id=l.root=l.pId=l.a=null),s=i.pId,(i=ue[s])&&K(i.a,e)&&(delete i.a[e],i.h=0))},children(e){return(e=this).h||(e.h=z(e.a))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=ue[t.pId];return t},invoke(e,t){let i,s,l=this,d=l.b;return new a(a=>{(i=l.c)&&i.h?a((s=i[e])&&X(s,t,i)):d.push([e,t,a])})}});let ze=new N,je=/^([\w\-]+)\x1e(\d+)?(\x1e)?([^(]+)\(([\s\S]*?)\)$/,Te={},Le={},Ie={},Ce={},Ye={},Ve={capture:!0},Ae={passive:!1},Fe={passive:!1,capture:!0},Xe=(e,s)=>{let a,l,d,o,p,n,c,h,g,_=[],x=e,u=A(e,"mx5-"+s);if(u&&((p=ze.get(u))||(p={v:(p=u.match(je)||i)[1],b:0|p[2],t:p[3],n:p[4],i:p[5]},ze.set(u,p)),p=S({},p)),p&&!p.v||Ye[s]){if(null==(h=x.b)){for(c=[x];x!=r&&(x=x.parentNode);){if(ue[l=x.a]||(l=x.b)){h=l;break}c.push(x)}for(u of c)u.b=h||t}if(x=e.a,ue[x]&&(g=h=x),h)do{if((a=ue[h])&&(n=a.c)){if(o=(d=n.i)[s])for(x=o.length;x--;)d={r:l=o[x],v:h,n:l},l?!g&&e.matches(l)&&_.push(d):g&&_.push(d);if(n.g&&!g)break;g=0}}while(a&&(h=a.pId))}return p&&_.push(p),_},Ke=e=>{let t,i,s,a,l,d,o,p,{target:n,type:c}=e,h=[];for(;n&&n!=r&&!e.cancelBubble&&(!(i=n.c)||!i[c]);){if(p=1,n.nodeType==p){if((t=Xe(n,c)).length)for(d of(h.length=0,t)){let{v:t,n:i,i:r,t:h,b:g}=d;0,(a=(s=ue[t])&&s.c)&&a.h&&a._&&((d=a[l=i+"\x1e"+c])&&(e.eventTarget=n,o=r?ae(r,s._):b,e.params=o,X(d,e,a)),n==a.root||a.i[c]||(h?p=g||p:(n=a.root,p=0)))}else h.push(n);p&&(s=n.a)&&(a=(s=ue[s])&&s.c)&&a.j[c]&&(h.length=0)}for(;p--;)n=n.parentNode}for(n of h)(i=n.c||(n.c={}))[c]=1},He=(e,t,i,s)=>{let a=0|Te[e],l=0|Ie[e],d=0|Ce[e],o=i?-1:1,p=i?P:q;4&s&&(l+=o,Ie[e]=l),8&s&&(d+=o,Ce[e]=d);let n,c=Le[e];l&&d?n=Fe:l?n=Ae:d&&(n=Ve),a&&i!==a?n!=c&&(P(r,e,Ke,c),q(r,e,Ke,n)):p(r,e,Ke,i?c:n),Le[e]=n,Te[e]=a+o,t&&(Ye[e]=(0|Ye[e])+o)};let Me={"&":38,"<":60,">":62,'"':34,"'":39,"`":96},Ne=/[&<>"'\`]/g,Re=e=>`&#${Me[e]};`,Je=e=>(e+t).replace(Ne,Re),$e={"!":1,"'":7,"(":8,")":9,"*":"A"},Be=e=>"%2"+$e[e],Oe=/[!')(*]/g,Ee=e=>o(e).replace(Oe,Be),We=/[\\'"]/g,De=e=>(e+t).replace(We,"\\$&"),Ue=(e,t,i)=>(e.has(t)?i=e.get(t):(i="\x1e"+(i||e._++),e.has(i)||(e.set(t,i),e.set(i,t))),i),Ze=(e,t,s)=>{if(e._&&(s=e.g)){let a,l=e.k,d=e.id,o=ue[d],p={_:[],a:[],b:0},r=e.c,n=o._;e.l=0,e.k={},t&&e.fire("dompatch"),n._=0,n.clear(),a=s(r,qe,d,Ee,n,Ue,De,Y);let c=()=>{if(e.m=a,e._)for(a of((s=p.c||!e.h)&&gt(e),p._))oe(a.f,i,a);if(e.n>1)e.n=1,p.a.length=0,Ze(e);else{for([a,d,n]of(e.n=0,p.a))a[d]!=n&&(a[d]=n);for(a of(e.fire("domready"),l=e.o))a();l.length=0}};oe(ot,[e.root,e.m,a,p,o,l,e,c])}},qe=(e,i,s,a)=>{let l;if(e){i=i||b;let d,o,p,r,n,c,h=t,g=1==s,_=a,x=a,u=0,m=`<${e}`,f=t,y=0;if(s&&1!=s)for(p of s){if(p.a)o=p.a+(p.b?"/>":`>${p.c}</${p.d}>`);else if(o=p.c,p.d==Pe){if(!o)continue;o=Je(o)}f+=o,c&&p.d==Pe&&c.d==Pe?c.c+=p.c:(p.e&&(r||(r={}),r[p.e]=(r[p.e]||0)+1,u++),_=_||p.f,c=p,n||(n=[]),n.push(p))}for(d in a=a||b,i)!1!==(o=i[d])&&null!=o?(!0===o&&(i[d]=o=a[d]?o:t),"#"!=d&&"id"!=d&&"_"!=d||h||(h=o,"id"==d)?("mx5-view"==d&&o&&(y=1,h||(h=e+"\x1e"+ie(o).path)),"value"==d&&"textarea"==e?f=o:"$"==d?(_=o,delete i[d]):m+=` ${d}="${o&&Je(o)}"`):delete i[d]):a[d]||delete i[d];l={c:f,e:h,d:e,g:y,f:_,h:a,i:x,a:m,j:i,k:n,l:r,m:u,b:g}}else l={d:s?"\x1e":Pe,c:i+t};return l};let Pe=e;let Qe="http://www.w3.org/",Ge={svg:`${Qe}2000/svg`,math:`${Qe}1998/Math/MathML`},et=(e,i,s,a)=>{let l,d,o,p,r,n=0,c=i.h,h=i.j;if(s)for(l in o=s.h,p=s.j)K(h,l)||(n=1,(r=o[l])?a?a.a.push([e,r,t]):e[r]=t:e.removeAttribute(l));for(l in h)d=h[l],(r=c[l])?s&&e[r]==d||(n=1,a?a.a.push([e,r,d]):e[r]=d):s&&p[l]==d||(n=1,e.setAttribute(l,d));return n},tt=(e,t)=>{let i,s=e.d;return s==Pe?i=l.createTextNode(e.c):(i=l.createElementNS(Ge[s]||t.namespaceURI,s),et(i,e),m(i,e.c)),i},it=(e,t,i,s,a)=>{let l,d,o,p={};for(l=s;l>=i;l--,a--)(o=(d=e[l]).e)&&(d=p[o]||(p[o]=[])).push(t[a]);return p},st=(e,t)=>e.e&&t.e==e.e||!e.e&&!t.e&&e.d==t.d||"\x1e"==e.d||"\x1e"==t.d,at=(e,t,i,s)=>{i&&((s=ue[e.a])?s.unmount():ye(t,e))},lt=(e,t,i,s,a,l)=>{a._&&(at(e,i,1==e.nodeType),t.removeChild(e),--s.b||oe(l))},dt=(e,t,i,s,a,l,d)=>{a._&&("\x1e"==t.d?(ye(e),m(e,t.c)):e.insertBefore(tt(t,e),i[s]),--l.b||oe(d))},ot=(e,s,a,l,d,o,p,r)=>{if(p._)if(s){if(s.f||s.c!=a.c){let n,c,h,g,_,x=s.k||i,u=a.k||i,f=a.l||b,y=a.m,w=s.m,v=e.childNodes,k=0,S=u.length,z=x.length-1,j=0,T=S-1;0;let L,I=x[k],C=x[z],Y=u[j],V=u[T],A=k,F=z;for(;k<=z&&j<=T;)if(I)if(C)if(st(Y,I))"\x1e"==Y.d||"\x1e"==I.d?(l.c=1,ye(e),"\x1e"==Y.d?(F=0,m(e,Y.c)):(m(e,t),e.appendChild(tt(Y,e)))):(l.b++,oe(pt,[v[A],e,I,Y,l,d,o,p,r])),f[I.e]&&(f[I.e]--,y--,(g=_&&_[I.e])&&--_[I.e]),A++,I=x[++k],Y=u[++j];else if(st(V,C))l.b++,oe(pt,[v[F],e,C,V,l,d,o,p,r]),f[C.e]&&(f[C.e]--,y--),F--,C=x[--z],V=u[--T];else if(st(V,I))c=v[A],e.insertBefore(c,v[F+1]),l.b++,oe(pt,[c,e,I,V,l,d,o,p,r]),f[I.e]&&(f[I.e]--,y--),F--,I=x[++k],V=u[--T];else if(st(Y,C))c=v[F],e.insertBefore(c,v[A++]),l.b++,oe(pt,[c,e,C,Y,l,d,o,p,r]),f[C.e]&&(f[C.e]--,y--),C=x[--z],Y=u[++j];else{if(!_&&y>0&&w>0&&(_=it(x,v,k,z,F)),L=v[A],(g=_&&_[Y.e])&&(g=g.pop())){if(h=I,g!=L){for(c=k+1,n=A+1;c<=z;c++)if((h=x[c])&&v[n++]==g){x[c]=null;break}k--,e.insertBefore(g,L)}f[h.e]&&f[h.e]--,l.b++,oe(pt,[g,e,h,Y,l,d,o,p,r])}else _&&_[I.e]&&f[I.e]||ue[L.a]&&!Y.g?(l.c=1,e.insertBefore(tt(Y,e),L),k--,F++):(l.b++,oe(pt,[L,e,I,Y,l,d,o,p,r]));++A,I=x[++k],Y=u[++j]}else C=x[--z];else I=x[++k];for(n=j,c=1;n<=T;n++,c++)h=u[n],l.c=1,l.b++,oe(dt,[e,h,v,F+c,p,l,r]);for(!S&&I&&"\x1e"==I.d&&(F=v.length-1),n=F;n>=A;n--)l.c=1,l.b++,oe(lt,[v[n],e,d,l,p,r])}}else l.c=1,m(e,a.c);l.b||oe(r)},pt=(e,t,i,s,a,l,d,o,p)=>{if(o._){0;let r=i.j,n=s.j;if(i.f||i.a!=s.a||i.c!=s.c)if(i.d==s.d){if(i.d==Pe)a.c=1,e.nodeValue=s.c;else if(!r._||r._!=n._){let t,r,c,h,g,_,x,u=n["mx5-view"],m=s.c,f=i.a!=s.a||s.i,b=ue[e.a],y=u&&ie(u);if(f&&(f=et(e,s,i,a))&&(a.c=1),u&&b&&b.g==y.path&&(h=b.c)){if(_=m!=i.c,x=u!=b.path,c=s.f,!_&&!x&&c)for(c of g=c.split(","))if("#"==c||K(d,c)){x=1;break}(x||_)&&(c=h.e,g=y.params,me(n["mx5-owner"],u,g),b.path=u,b.e=m,!1!==X(c,[g,m],h)&&a._.push(h),t=!h.g)}else t=1,r=b;r&&(a.c=1,b.unmount()),t&&!s.b&&ot(e,i,s,a,l,d,o,p)}}else a.c=1,at(e,l,1),t.replaceChild(tt(s,t),e)}--a.b||oe(p)},rt={},nt=S({get:e=>e?rt[e]:rt,set(e){S(rt,e)}},xe),ct=/^(\$?)([^<]*)<([^>]+)>(?:\s*&(.+))?$/,ht=(e,t,i)=>(e._?i=e:((i=function(e,t){for(t of i._)X(t,e,this)})._=[e],i.a=1),i._=i._.concat(t._||t),i),gt=e=>{let t,i;e._&&(i=e.h,e.h=1,((e,t,i)=>{for(i of(t=t||e.root).querySelectorAll(`[mx5-view][mx5-owner="${e.id}"]`))i._||(i._=1,e.mount(i,A(i,"mx5-view")))})(t=e.owner),i||oe(be,t))},_t=(e,t)=>{let i,{j:s,i:a,p:l,id:d}=e;for(i in s)He(i,a[i],t,s[i]);for(i of(s=t?P:q,l))s(i._,i.a,i.b,i.c,d,e)},xt={win:s,doc:l,root:t};function ut(...e){return S(this,...e),this}let mt=(e,t,i)=>{let s,a,l,d,o={};for(a of e)for(s in a)l=a[s],d=o[s],"ctor"!=s?(ct.test(s)&&(d?l=ht(d,l):l.a=1),o[s]=l):i.push(l);for(s in o)K(t,s)||(t[s]=o[s])};function ft(...e){let t=this._||(this._=[]);return mt(e,this[_],t),this}let bt=e=>(function(...t){return this._&&X(e,t,this)}),yt=(e,t,i,s)=>{if(e)for(s of e)X(s,t,i)};let wt=e=>{if(!e["\x1e"]){e["\x1e"]=1;let i,s,a,l,d,o,p,r,n,c,h,g=e[_],x={},u=[],m={};for(p in g)if(i=g[p],s=p.match(ct))for(r of([,o,a,l,h]=s,c=h?G(h):b,l=l.split(","))){if(d=xt[a],n=1,!1===c.passive&&(n|=4),c.capture&&(n|=8),o){if(d){u.push({b:i,_:d,a:r,c:c});continue}d===t&&(a=t),n|=2,(d=m[r])||(d=m[r]=[]),d[a]||(d[a]=1,d.push(a))}x[r]|=n,(d=g[r=a+"\x1e"+r])?d.a&&(i.a?g[r]=ht(i,d):K(g,p)&&(g[r]=i)):g[r]=i}g.f=g.render=bt(g.render),g.j=x,g.p=u,g.i=m,g.e=g.assign,g.g=g.tmpl}};function vt(e,t,i,s,a){(a=this).root=t,a.owner=i,a.id=e,a._=1,a.l=1,a.c={},a.k={},a.n=0,a.o=[],yt(vt._,s,a)}function kt(){this.id=x("b"),this._={}}S(vt,{merge:ft,extend:function e(t){let i=this,s=(t=t||{}).ctor;function a(e,t,l,d,o){i.call(o=this,e,t,l,d),s&&X(s,d,o),yt(a._,d,o)}return a.merge=ft,a.extend=e,a.static=ut,ce(a,i,t)}}),S(vt[_],xe,{init:p,render:p,assign:p,get(e,t){return t=this.c,e&&(t=t[e]),t},set(e,t){let i,s,a,l=this,d=l.c,o=l.k,p=l.l;for(a in e)i=e[a],s=d[a],w(i)&&s==i&&!t||(o[a]=1,p=1),d[a]=i;return l.l=p,l},digest(e,t){return e=this.set(e,t),new a(t=>{e.l?(e.n++,e.o.push(t),1==e.n&&Ze(e,1)):e.n?e.o.push(t):t()})},finale(){let e=this;return new a(t=>{e.n?e.o.push(t):t()})},parse(e){return ae(e,this.owner._)}}),S(kt[_],{get(e,i){let s,a=this._;if(e){let i,s=Y(e)?e.slice():(e+t).split(".");for(;(i=s.shift())&&a;)a=a[i];i&&(a=void 0)}return void 0!==i&&(s=I(i))!=I(a)&&(a=i),a},set(e){S(this._,e)}});let St=(e,t,i)=>s=>{if(i=e[t]){delete e[t];for(let e of i)X(e,s,i._)}},zt=(e,t,i,s,a)=>{if(e._)return e;if(e.a)return e.enqueue(zt.bind(e,e,t,i,s,a));e.a=1,Y(t)||(t=[t]);let l=e.constructor,d=0,o=l.b,p=((e,t,i,s,a,l)=>{let d=[],o=null,p=0;return(r,n,c)=>{let h;p++;let _,x=r.a,u=x._;if(d[n+1]=r,c?(o=c,h=1):l.has(u)||(u&&l.set(u,r),x.a=g(),(_=x.b)&&X(_,r,r),h=1),!i._){let t=p==s;t&&(i.a=0,2==a&&(d[0]=o,X(e,d,i))),1==a&&X(e,[c||null,r,t,n],i)}h&&t.fire("end",{bag:r,error:c})}})(i,l,e,t.length,s,l.c);for(let e of t)if(e){let t,[i,s]=l.get(e,a),r=i.a._,n=p.bind(i,i,d++);r&&o[r]?o[r].push(n):s?(r&&((t=[n])._=i,o[r]=t,n=St(o,r)),l.d(i,n)):n()}return e};function jt(){this.id=x("s"),this.e=[]}S(jt[_],{all(e,t){return zt(this,e,t,2)},save(e,t){return zt(this,e,t,2,1)},one(e,t){return zt(this,e,t,1)},enqueue(e){let t=this;return t._||(t.e.push(e),t.dequeue(t.f)),t},dequeue(...e){let t,i=this;i.a||i._||(i.a=1,d(()=>{i.a=0,i._||(t=i.e.shift())&&X(t,i.f=e)}))},destroy(e){(e=this)._=1,e.e=0}});let Tt=(e,t)=>[n(t),n(e)].join("\x1e"),Lt=S({add(e){let t,i=this.g;for(t of(Y(e)||(e=[e]),e))if(t){let{name:e,cache:s}=t;t.cache=0|s,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,s=new kt;s.set(t),s.a={b:t.after,_:i&&Tt(t,e)},C(e)&&s.set(e);let a=t.before;return a&&X(a,s,s),this.fire("begin",{bag:s}),s},meta(e){return this.g[e.name||e]||e},get(e,t){let i,s,a=this;return t||(i=a.cached(e)),i||(i=a.create(e),s=1),[i,s]},cached(e){let t,i,s=this,a=s.c,l=s.meta(e),d=0|e.cache||l.cache;if(d&&(i=Tt(l,e)),i){let e=s.b[i];e?t=e._:(t=a.get(i))&&g()-t.a.a>d&&(a.del(i),t=0)}return t}},xe);jt.extend=((e,t,i)=>{function s(){jt.call(this)}return s.d=e,s.c=new N(t,i),s.b={},s.g={},S(s,Lt),ce(s,jt)});let It=0;return{config(e,...t){let i=y;return e&&(i=C(e)?S(i,e,...t):i[e]),i},boot(e){It||(It=1,S(y,e),ve(((e,t)=>(ge||(r=l.body,e=_e=y.rootId,(t=u(e))||(t=r),ge=new Se(t)),ge))(),y.defaultView))},unboot(){It&&(It=0,ge&&(ge.unmount(),ge=null))},HIGH:1e3,LOW:-1e3,isObject:C,isArray:Y,isFunction:e=>"Function"==I(e),isString:e=>"String"==I(e),isNumber:e=>"Number"==I(e),attach:U,detach:Z,mix:S,toMap:(e,t)=>{let i,s={};if(e)for(i of e)s[t&&i?i[t]:i]=t?i:1+(0|s[i]);return s},toTry:X,toUrl:(e,i,s)=>{let a,l,d,p=[];for(l in i)((a=i[l]+t)||K(s,l))&&(a=o(a),p.push(d=l+"="+a));return d&&(e+=(e&&(e.includes("?")?"&":"?"))+p.join("&")),e},parseUrl:ie,guid:x,use:ne,dispatch:(e,t,i)=>{let s=new Event(t,W);S(s,i),e.dispatchEvent(s)},guard:he,type:I,has:K,inside:v,applyStyle:F,Cache:N,View:vt,Vframe:Se,State:nt,Service:jt,Event:xe,mark:(e,t,i,s,a)=>(0!=e[a="\x1e_"]&&(i=e[a]||(e[a]={}),K(i,t)||(i[t]=0),s=++i[t]),i=>(i=e[a],i&&s===i[t])),unmark:k,node:u,task:oe,lowTask:pe,taskFinale:()=>new a(oe),lowTaskFinale:()=>new a(pe),delay:e=>new a(t=>d(t,e))}}),window.designer={setup(e){let t=document.getElementById("boot").src.replace(/\/[^/]+$/,"/");seajs.config({paths:{designer:t+"designer",elements:t+"elements",gallery:t+"gallery",i18n:t+"i18n",panels:t+"panels"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("pd-_",'@font-face{font-family:pd-_;src:url(//at.alicdn.com/t/font_2644507_fxlrm4ztvsr.woff2?t=1625120686949) format("woff2"),url(//at.alicdn.com/t/font_2644507_fxlrm4ztvsr.woff?t=1625120686949) format("woff"),url(//at.alicdn.com/t/font_2644507_fxlrm4ztvsr.ttf?t=1625120686949) format("truetype")}*,:after,:before{box-sizing:inherit}.pd-_{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:pd-_;font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:1;position:relative}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(250,116,43,.2)}::selection{background-color:rgba(250,116,43,.2)}.pd-a,.pd-b{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;box-shadow:none;box-sizing:border-box;caret-color:#fa742b;color:#333;display:inline-block;font-size:100%;height:22px;margin:0;max-width:100%;outline:none;padding:3px 4px;transition:border-color .25s;width:140px}.pd-c{position:sticky}.pd-a:hover,.pd-b:hover{border-color:#ccc}.pd-a:focus,.pd-b:focus,.pd-d{border-color:#fa742b!important;outline:none;resize:none}.pd-e{resize:none}.pd-d:hover{border-color:#fa742b!important}.pd-b{height:auto;overflow:auto}.pd-a[disabled],.pd-b[disabled]{background-color:#f5f5f5;cursor:not-allowed}.pd-a::-moz-placeholder,.pd-b::-moz-placeholder{color:#a9a9a9;opacity:1}.pd-a::-moz-focus-inner{border-style:none;padding:0}.pd-f{transform:rotate(90deg)}.pd-a[disabled]:hover,.pd-b[disabled]:hover{border-color:#e6e6e6;cursor:not-allowed}.pd-g{background-color:#ccc;background-image:none;border:0;border-radius:2px;color:#333;display:inline-block;font-size:14px;font-weight:400;line-height:1;margin:0;outline:0;padding:4px 14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.pd-g:focus,.pd-g:hover{background-color:#bbb;color:#333}.pd-h{background-color:#fa742b;color:#fff}.pd-h:focus,.pd-h:hover{background-color:#e25305;color:#fff}.pd-g[disabled]{background-color:#f5f5f5;color:#999;cursor:not-allowed}.pd-g[disabled]:hover{border-color:#e6e6e6;color:#999}.pd-g::-moz-focus-inner{border-style:none;padding:0}.pd-i{border-bottom:1px solid hsla(0,0%,90%,.4);color:#333;line-height:1.5;margin:0;padding:8px 25px}.pd-j{margin-top:-20px}.pd-k{box-shadow:0 0 6px #ccc;height:10px;margin-top:10px;top:28px}.pd-l{padding:18px 25px}.pd-m{bottom:28px;box-shadow:0 0 6px #ccc;height:10px;margin-bottom:10px}.pd-n{border-top:1px solid hsla(0,0%,90%,.4);padding:8px 25px}.pd-o{margin-bottom:-20px}.pd-p{line-height:0;margin:0 auto;padding:150px 0;text-align:center;width:150px}.pd-p:after,.pd-p:before{content:""}.pd-p:after,.pd-p:before,.pd-q{-webkit-animation:pd-_ 1s ease-in-out infinite both;animation:pd-_ 1s ease-in-out infinite both;background-color:#ccc;border-radius:100%;display:inline-block;height:14px;width:14px}.pd-p:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.pd-q{-webkit-animation-delay:-.16s;animation-delay:-.16s;margin:0 10px}@-webkit-keyframes pd-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes pd-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.pd-r{cursor:default;cursor:pointer;display:inline-block;font-weight:400;max-width:100%}.pd-s{font-size:14px}.pd-s,.pd-t{margin:0;padding:0}.pd-t{list-style-image:none;list-style-type:none}.pd-u{border-style:none;height:auto;max-width:100%;vertical-align:top}.pd-v{all:initial;box-sizing:border-box;display:block;font-family:Arial,sans-serif;font-size:14px;line-height:1.5}.pd-w{margin-right:2px}.pd-x{transform:rotate(180deg)}.pd-y{margin-right:5px}.pd-z{margin-right:10px}.pd-A{margin-left:10px}.pd-B{width:100%}.pd-C{height:100%}.pd-D{max-width:100%}.pd-E{max-height:100%}.pd-F{background-color:#fff}.pd-G{word-break:break-all}.pd-H{justify-content:flex-end}.pd-I{bottom:0}.pd-J{cursor:pointer}.pd-K{font-size:12px}.pd-L{flex-wrap:wrap}.pd-M{position:absolute}.pd-N{display:inline-block}.pd-O{margin-top:4px}.pd-P{color:#999}.pd-Q{color:#666}.pd-R{display:block}.pd-S{padding:4px}.pd-T{margin:0}.pd-U{flex:1}.pd-V{height:100px}.pd-W{font-size:16px}.pd-X{text-align:right}.pd-Y{text-align:center}.pd-Z{float:left}.pd-0{float:right}.pd-1{position:relative}.pd-2{margin:30px 0}html .pd-3{display:none}.pd-4:after,.pd-4:before{content:" ";display:table}.pd-4:after{clear:both}.pd-5{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pd-6::-webkit-scrollbar,.pd-6::-webkit-scrollbar-corner{background:#edeef3;height:4px;width:4px}.pd-6::-webkit-scrollbar-thumb{background:#fa742b;border-radius:2px}.pd-6::-webkit-scrollbar-thumb:hover{background:#ec5706}.pd-7{scroll-behavior:smooth}.pd-7::-webkit-scrollbar,.pd-7::-webkit-scrollbar-corner{background:#fafafa;height:2px;width:2px}.pd-8{word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pd-9{background:linear-gradient(90deg,#0000,#7d768454 50%,#0000);height:1px;line-height:1px;margin:5px 0}.pd-a_{display:flex}.pd-aa{bottom:0;left:0;right:0;top:0}.pd-ab{overflow:auto}.pd-ac{outline:0}.pd-ad{contain:paint}.pd-ae{min-height:100vh}.pd-af{align-items:center}.pd-ag{justify-content:center}.pd-ah{transform:scaleX(-1)}.pd-ai{z-index:1}.pd-aj{z-index:5}.pd-ak{z-index:6}.pd-al{z-index:7}.pd-am{z-index:8}.pd-an{top:0}.pd-ao:before{align-items:center;content:attr(data-tip);display:flex;height:100%;justify-content:center;position:absolute;width:100%}.pd-ap{overflow:hidden}');let s=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(s=e.getItem("l.lang")||s)}catch(e){}t.config(e),t.config({lang:s});let{State:a,View:l}=t;l.merge({ctor(){this.set({i18n:i})},_cD(e,t){let i;return t=t||150,(...s)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}},_cl(e){e.preventDefault()},_co(e){e.stopPropagation()},"_bK<change>"(e){this._co(e)},"_A<contextmenu>"(e){this._cl(e)}}),document.title=i("e");let d=t.node("app"),o=0;d.classList.add("pd-v","pd-C"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",wait(e){e!=o&&a.fire("j",{busy:o=e})},error(e){setTimeout(()=>{throw e},0)}})})}},define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{let s,a,l,d,o,p,r,n,c,h,g,_,x,u,m={class:"pd-bs"},f={xmlns:"http://www.w3.org/2000/svg",version:1.1,width:"100%",height:"100%"},b={class:"pd-1 pd-bk"},y={class:"pd-bx"},w={value:"value"};const v=e("magix"),k=e("../mx-dragdrop/index"),S=e("../mx-monitor/index");let{node:z,View:j,applyStyle:T,dispatch:L,inside:I}=v,{abs:C,min:Y,max:V,round:A}=Math;T("pd-i",'.pd-bi{border:1px solid #e6e6e6;border-radius:2px;height:22px;padding:1px}.pd-bi:hover{border-color:#ccc}.pd-bj,.pd-bj:hover{border-color:#fa742b}.pd-bk,.pd-bl{background:#fff;background-image:linear-gradient(45deg,#eee 25%,#0000 0,#0000 75%,#eee 0),linear-gradient(45deg,#eee 25%,#0000 0,#0000 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.pd-bl{border:1px solid #ccc;height:18px;min-width:18px;text-indent:-100000em}.pd-bm{padding:3px 4px}.pd-bl:after{border-color:#0000 #ccc;border-style:solid;border-width:6px 6px 0 0;bottom:0;content:" ";display:block;position:absolute;right:0}.pd-bn{background-color:#fff;border:1px solid #ccc;border-radius:2px;padding:2px;z-index:300}.pd-bo-bottom{margin-top:4px;top:100%}.pd-bo-top{bottom:100%;margin-bottom:4px}.pd-bp{width:176px}.pd-bq{border:1px solid #000;height:12px;margin:-1px 0 0 -1px;width:12px}.pd-br:before{border:1px inset #e8e8e8;content:" ";height:6px;left:2px;position:absolute;top:2px;width:6px}.pd-bs{height:150px;margin:5px 0}.pd-bt{height:148px;width:148px}.pd-bu{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);height:8px;left:-4px;top:-4px;width:8px}.pd-bv{height:148px;margin-left:10px;width:18px}.pd-bw{background:#fff;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);height:4px;left:2px;top:-2px;width:14px}.pd-bx{height:25px}.pd-by{width:80px}.pd-bz,.pd-by{margin-right:5px;vertical-align:middle}.pd-bz{border:1px solid #ddd;border-radius:2px;height:22px;width:30px}.pd-bA{opacity:.2;right:5px;top:4px}.pd-bA:hover{opacity:.5}.pd-bk{height:12px;margin-bottom:5px;width:174px}.pd-bB{background:#fff;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);height:8px;left:-2px;top:2px;width:4px}.pd-bC{background-color:#f5f5f5;cursor:not-allowed}.pd-bC:hover{border-color:#e6e6e6}.pd-bC:hover .pd-bA{opacity:.1}.pd-bC .pd-bl{opacity:.4}.pd-bC .pd-bA{opacity:.1}.pd-bD{width:56px}');let F=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],X=(e,t,i)=>{let s,a,l,d,o;s=a=l=i-(o=i*t);let p=255*(s+=[o,d=o*(1-C((e=e%360/60)%2-1)),0,0,d,o][e=~~e]),r=255*(a+=[d,o,o,d,0,0][e]),n=255*(l+=[0,0,d,o,o,d][e]);return{r:p,g:r,b:n,hex:"#"+(16777216|n|r<<8|p<<16).toString(16).slice(1)}};i.exports=j.extend({tmpl:(e,t,i,v,k,S,z)=>{let j,T,L,I,C,Y,V,A,F,X,{disabled:K,text:H,textWidth:M,color:N,clear:R,i18n:J,placement:$,align:B,renderUI:O,shortcuts:E,alpha:W,current:D}=e;if(X=[],H&&(I=[t(0,H)],T="pd-bm pd-5",K||(T+=" pd-J"),L="",M&&(L+="width:"+M+"px"),X.push(t("div",{"mx5-click":i+"\x1e_bg()",class:T,style:L},I))),I=[s||(s=t(0,"p"))],T="pd-bl pd-1 pd-5",K||(T+=" pd-J"),H||(T+=" pd-B"),L="",N&&(L+="background:"+N+";"),X.push(t("div",{"mx5-click":i+"\x1e_bg()",class:T,style:L},I)),R&&N&&(I=[a||(a=t(0,"\ue624"))],T="pd-_ pd-bA pd-K pd-M",K||(T+=" pd-J"),X.push(t("i",{"mx5-click":i+"\x1e_bh()",title:J("ab"),class:T},I))),I=[],O){C=[];for(let e=E.length,s=0;s<e;s+=1){let e=E[s];C.push(t("li",{class:"pd-1 pd-Z pd-bq",id:"_mx_sc_"+e+"_"+i,style:"background:#"+e,"mx5-click":i+"\x1e_bc({color:'#"+z(e)+"'})"}))}I.push(t("ul",{class:"pd-J pd-L pd-a_ pd-bp pd-t",id:"_mx_scs_"+i},C)),Y=l?[l]:[l=t("stop",{_:"_",offset:"0%","stop-color":"#000000","stop-opacity":1})],d?Y.push(d):Y.push(d=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":0})),V=[t("lineargradient",{id:"_mx_gb_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},Y)],Y=o?[o]:[o=t("stop",{_:"b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":1})],d?Y.push(d):Y.push(d=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":0})),V.push(t("lineargradient",{id:"_mx_gw_"+i,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},Y)),A=[t("defs",0,V),t("rect",{x:0,y:0,width:"100%",height:"100%",fill:"url(#_mx_gw_"+i+")"}),t("rect",{x:0,y:0,width:"100%",height:"100%",fill:"url(#_mx_gb_"+i+")"})],F=[t("svg",f,A),t("div",{class:"pd-J pd-M pd-bu",id:"_mx_ci_"+i})],C=[t("div",{class:"pd-1 pd-Z pd-bt",id:"_mx_cz_"+i,"mx5-pointerdown":i+"\x1e_a9()"},F)],Y=p?[p]:[p=t("stop",{_:"c",offset:"0%","stop-color":"#FF0000","stop-opacity":1})],r?Y.push(r):Y.push(r=t("stop",{_:"d",offset:"13%","stop-color":"#FF00FF","stop-opacity":1})),n?Y.push(n):Y.push(n=t("stop",{_:"e",offset:"25%","stop-color":"#8000FF","stop-opacity":1})),c?Y.push(c):Y.push(c=t("stop",{_:"f",offset:"38%","stop-color":"#0040FF","stop-opacity":1})),h?Y.push(h):Y.push(h=t("stop",{_:"g",offset:"50%","stop-color":"#00FFFF","stop-opacity":1})),g?Y.push(g):Y.push(g=t("stop",{_:"h",offset:"63%","stop-color":"#00FF40","stop-opacity":1})),_?Y.push(_):Y.push(_=t("stop",{_:"i",offset:"75%","stop-color":"#0BED00","stop-opacity":1})),x?Y.push(x):Y.push(x=t("stop",{_:"j",offset:"88%","stop-color":"#FFFF00","stop-opacity":1})),u?Y.push(u):Y.push(u=t("stop",{_:"k",offset:"100%","stop-color":"#FF0000","stop-opacity":1})),V=[t("lineargradient",{id:"_mx_ghsv_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},Y)],A=[t("defs",0,V),t("rect",{x:0,y:0,width:"100%",height:"100%",fill:"url(#_mx_ghsv_"+i+")"})],F=[t("svg",f,A),t("div",{class:"pd-J pd-M pd-bw",id:"_mx_si_"+i})],C.push(t("div",{class:"pd-1 pd-Z pd-bv","mx5-pointerdown":i+"\x1e_b_()"},F)),I.push(t("div",m,C)),W&&(F=[t("div",{class:"pd-J pd-M pd-bB",id:"_mx_ai_"+i})],C=[t("div",{class:"pd-1 pd-C",id:"_mx_at_"+i,"mx5-pointerdown":i+"\x1e_ba()"},F)],I.push(t("div",b,C))),C=[t("span",{class:"pd-N pd-bz",id:"_mx_bc_"+i}),t("input",{class:"pd-a pd-by",readonly:!0,id:"_mx_v_"+i,value:D},1,w)],F=[t(0,J("ac"))],C.push(t("button",{class:"pd-J pd-Y pd-bD pd-g pd-h",type:"button","mx5-click":i+"\x1e_bb()"},F)),I.push(t("div",y,C))}return X.push(t("div",{id:"_mx_bd_"+i,class:"pd-bn pd-5 pd-3 pd-M pd-bo-"+$,style:B+":-1px"},I)),T="pd-bi pd-a_ pd-af pd-1",K&&(T+=" pd-bC"),j=[t("div",{"mx5-contextmenu":i+"\x1e_A()",id:"_mx_root_"+i,class:T},X)],t(i,0,j)},init(){this.set({shortcuts:F}),S._aY(),this.on("destroy",()=>{S._aZ(this),S._a0()})},assign(e){this._af=e.color||"",this._a1=e.alpha+""=="true",this._a2={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"})},render(){this.digest({alpha:this._a1,color:this._af,current:this._af})},_a5(e,t,i){let s=this,a=s._a2;a.h=e.h,a.s=e.s,a.v=e.v,t=X(e.h,e.s,e.v).hex;let l=z("_mx_cz_"+s.id),d=l.clientWidth,o=X(e.h,1,1);if(l.style.background=o.hex,s._a3=t,s._a4(),!i){let e=z("_mx_scs_"+s.id).querySelector('li[class$="pd-br"]');e&&e.classList.remove("pd-br");let t=z("_mx_si_"+s.id),i=t.clientHeight/2,l=A(a.h*d/360-i),o=z("_mx_ci_"+s.id),p=o.clientWidth/2;t.style.top=l+"px",l=A((1-a.v)*d-p);let r=A(a.s*d-p);o.style.left=r+"px",o.style.top=l+"px"}let p=z("_mx_sc_"+t.substr(1,6)+"_"+s.id);p&&p.classList.add("pd-br")},_a8(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let s=parseInt(e.substr(3,2),16);isNaN(s)&&(s=255);let a=parseInt(e.substr(5,2),16);isNaN(a)&&(a=255);let l=((e,t,i)=>{let s,a,l,d;return{h:s=(s=0==(d=(l=V(e/=255,t/=255,i/=255))-Y(e,t,i))?null:l==e?(t-i)/d+(t<i?6:0):l==t?(i-e)/d+2:(e-t)/d+4)%6*60,s:a=0===d?0:d/l,v:l}})(i,s,a),d=parseInt(e.substr(7,2),16);isNaN(d)&&(d=255),t._a6=("0"+d.toString(16)).slice(-2),t._a5(l,e),t._a1&&t._a7(d)},_a7(e){let t=z("_mx_ai_"+this.id);e/=255,e*=z("_mx_at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},_a4(){let e=this,t=z("_mx_bc_"+e.id),i=e._a3;e._a1&&(z("_mx_at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e._a6),t.style.background=i,z("_mx_v_"+e.id).value=i},"_a9<pointerdown>"(e){let t=this,i=z("_mx_cz_"+t.id).clientWidth,s=z("_mx_ci_"+t.id).clientWidth/2,a=e.eventTarget.getBoundingClientRect(),l=e.pageX-a.x-window.pageXOffset,d=e.pageY-a.y-window.pageYOffset,o=l/i,p=(i-d)/i;t._a5({h:t._a2.h,s:o,v:p});let r=z("_mx_ci_"+t.id),n=getComputedStyle(r),c=n.left,h=n.top,g=parseInt(c,10),_=parseInt(h,10),x=e;t._w(e,e=>{let a=e.pageY-x.pageY,l=e.pageX-x.pageX;(a+=_)<=-s?a=-s:a>=i-s&&(a=i-s),(l+=g)<=-s?l=-s:l>=i-s&&(l=i-s),r.style.left=l+"px",r.style.top=a+"px";let d=(l+s)/i,o=(i-(a+s))/i;t._a5({h:t._a2.h,s:d,v:o})})},"_b_<pointerdown>"(e){let t=this,i=e.eventTarget,s=z("_mx_si_"+t.id),a=z("_mx_cz_"+t.id).clientWidth,l=s.clientHeight/2,d=i.getBoundingClientRect(),o=(e.pageY-d.y-window.scrollY)/a*360;t._a5({h:o,s:t._a2.s,v:t._a2.v});let p=parseInt(getComputedStyle(s).top,10);t._w(e,i=>{let d=i.pageY-e.pageY;(d+=p)<=-l?d=-l:d>=a-l&&(d=a-l),s.style.top=d+"px";let o=(d+l)/a*360;t._a5({h:o,s:t._a2.s,v:t._a2.v},null,!0)})},"_ba<pointerdown>"(e){let t=e.eventTarget,i=this,s=z("_mx_ai_"+i.id),a=z("_mx_at_"+i.id).clientWidth,l=s.clientWidth/2,d=t.getBoundingClientRect(),o=(e.pageX-d.x)/a*255|0;i._a6=("0"+o.toString(16)).slice(-2),i._a7(o),i._a4();let p=getComputedStyle(s),r=parseInt(p.left,10);i._w(e,t=>{let d=t.pageX-e.pageX;(d+=r)<=-l?d=-l:d>=a-l&&(d=a-l),s.style.left=d+"px";let o=A((d+l)/a*255);i._a6=("0"+o.toString(16)).slice(-2),i._a4()})},"_bb<click>"(){let e=this;e._y();let t=z("_mx_v_"+e.id).value;t!=e._af&&(e.digest({color:t,current:t}),L(e.root,"input",{color:e._af=t}))},"_bc<click>"(e){this._a8(e.params.color),e.eventTarget.classList.add("pd-br")},_bd(e){return I(e,this.root)},async _x(){let e=z("_mx_bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",S._be(this),z("_mx_root_"+this.id).classList.add("pd-bj"),this._bf||(await this.digest({renderUI:!0}),this._bf=1),this._a8(this._af))},_y(){let e=z("_mx_bd_"+this.id);"none"!=getComputedStyle(e).display&&(z("_mx_root_"+this.id).classList.remove("pd-bj"),e.style.display="none",S._aZ(this))},"_bg<click>"(){if(this.get("disabled"))return;let e=z("_mx_bd_"+this.id);"none"==getComputedStyle(e).display?this._x():this._y()},"_bh<click>"(){if(this.get("disabled"))return;let e=this;if(e._bf){let t=z("_mx_v_"+e.id).value;e._y(),e.digest({color:"",current:t})}else e.digest({color:""});L(e.root,"input",{color:e._af=""})}}).merge(k)}),define("gallery/mx-color/series",["magix","./index"],(e,t,i)=>{let s,a,l;e("./index");const d=e("magix");let{applyStyle:o,View:p,dispatch:r}=d;o("pd-j",".pd-bE{color:#333;flex-basis:24px}.pd-bF{opacity:.5}.pd-bF:hover{opacity:1}.pd-bG{color:#bbb;cursor:not-allowed;opacity:1}");let{random:n}=Math,c=()=>"#"+("00000"+(16777216*n()|0).toString(16)).slice(-6);i.exports=p.extend({tmpl:(e,t,i,d,o,p)=>{let r,n,c,h,g,_=[],{colors:x,disabled:u,i18n:m,multi:f}=e;for(let e=x.length,l=0;l<e;l+=1){let e=0===l;g=[],c="gallery/mx-color/index?color="+p(o,x[l],"_."+l+".a")+"&align=right",(r=u)&&(c+="&disabled="+d(r)),g.push(t("div",{"mx5-owner":i,$:"colors",class:"pd-B","mx5-input":i+"\x1e_bi({index:"+l+"})","mx5-view":c})),h=[s||(s=t(0,"\ue604"))],n="pd-_ pd-bE pd-K pd-J pd-X pd-bF",u&&(n+=" pd-bG"),g.push(t("i",{title:m("ad"),"mx5-click":i+"\x1e_bl({index:"+l+"})",class:n},h)),x.length>1&&(h=[a||(a=t(0,"\ue6b3"))],n="pd-_ pd-bE pd-K pd-J pd-X pd-bF",u&&(n+=" pd-bG"),g.push(t("i",{title:m("ae"),"mx5-click":i+"\x1e_bk({index:"+l+"})",class:n},h))),n="pd-a_ pd-af",e||(n+=" pd-O"),_.push(t("div",{class:n},g))}return f&&(g=[l||(l=t(0,"\ue606"))],n="pd-_ pd-J",(u||x.length>9)&&(n+=" pd-bG"),_.push(t("i",{title:m("af"),"mx5-click":i+"\x1e_bj()",class:n},g))),t(i,0,_)},assign(e){this.set(e)},render(){this.digest()},"_bi<input>"(e){let t=this.get("colors"),{index:i}=e.params;t[i]=e.color,r(this.root,"change")},"_bj<click>"(){if(this.get("disabled"))return;let e=this.get("colors");if(e.length>9)return;let t=c();e.push(t),r(this.root,"change")},"_bk<click>"(e){if(this.get("disabled"))return;let t=this.get("colors"),{index:i}=e.params;t.splice(i,1),r(this.root,"change")},"_bl<click>"(e){if(this.get("disabled"))return;let t=this.get("colors"),{index:i}=e.params,s=c();t[i]=s,r(this.root,"change")}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{let s,a,l={class:"pd-F pd-a_ pd-af pd-am pd-an pd-c pd-i pd-j"},d={class:"pd-s"},o={class:"pd-G pd-l"},p={class:"pd-F pd-H pd-I pd-a_ pd-af pd-ak pd-c pd-n pd-o"};const r=e("magix"),n=e("../../i18n/index");let{View:c,toTry:h,node:g}=r;i.exports=c.extend({tmpl:(e,t,i)=>{let r,n,c,{title:h,body:g,i18n:_}=e;return r=s?[s]:[s=t("div",{_:"_",class:"pd-al pd-c pd-k"})],n=[t(0,h)],c=[t("h5",d,n)],r.push(t("div",l,c)),c=[t(0,g)],r.push(t("div",o,c)),n=[t(0,_("ah"))],c=[t("button",{"mx5-click":i+"\x1e_bb()",class:"pd-J pd-Y pd-g pd-h",type:"button",tabindex:1,id:"_mx_o_"+i},n)],r.push(t("div",p,c)),a?r.push(a):r.push(a=t("div",{_:"a",class:"pd-aj pd-c pd-m"})),t(i,0,r)},init(e){this._J=e.dialog,this._bm=e.body,this._bn=e.title||n("ag"),this._bo=e.enter},async render(){await this.digest({body:this._bm,title:this._bn});let e=g(`_mx_o_${this.id}`);e&&e.focus()},"_bb<click>"(){let e=this;e._J.close(),e._bo&&h(e._bo)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{let s,a,l={class:"pd-F pd-a_ pd-af pd-am pd-an pd-c pd-i pd-j"},d={class:"pd-s"},o={class:"pd-G pd-l"},p={class:"pd-F pd-H pd-I pd-a_ pd-af pd-ak pd-c pd-n pd-o"};const r=e("magix"),n=e("../../i18n/index");let{View:c,toTry:h,node:g}=r;i.exports=c.extend({tmpl:(e,t,i)=>{let r,n,c,{title:h,body:g,i18n:_}=e;return r=s?[s]:[s=t("div",{_:"_",class:"pd-al pd-c pd-k"})],n=[t(0,h)],c=[t("h5",d,n)],r.push(t("div",l,c)),c=[t(0,g)],r.push(t("div",o,c)),n=[t(0,_("ah"))],c=[t("button",{type:"button","mx5-click":i+"\x1e_bb()",class:"pd-J pd-Y pd-g pd-h",tabindex:1,id:"_mx_o_"+i},n)],n=[t(0,_("d"))],c.push(t("button",{type:"button","mx5-click":i+"\x1e_K()",class:"pd-A pd-J pd-Y pd-g",tabindex:2},n)),r.push(t("div",p,c)),a?r.push(a):r.push(a=t("div",{_:"a",class:"pd-aj pd-c pd-m"})),t(i,0,r)},init(e){let t=this;t._J=e.dialog,t._bm=e.body,t._bn=e.title||n("ag"),t._bo=e.enter,t._bp=e.cancel},async render(){await this.digest({body:this._bm,title:this._bn});let e=g(`_mx_o_${this.id}`);e&&e.focus()},"_bb<click>"(){let e=this;e._J.close(),e._bo&&h(e._bo)},"_K<click>"(){let e=this;e._J.close(),e._bp&&h(e._bp)}})}),define("gallery/mx-dialog/index",["magix"],(e,t,i)=>{let s,a;const l=e("magix");let{View:d,Vframe:o,applyStyle:p,node:r,mark:n,dispatch:c,has:h,guid:g,use:_,mix:x,attach:u,detach:m}=l;p("pd-k",".pd-bH{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;margin:25px 0;min-height:60px}.pd-bI{opacity:.2;right:10px;top:10px}.pd-bI:focus,.pd-bI:hover{opacity:.5}.pd-bJ{margin:auto}.pd-bK{float:right;margin:35px 10px 0 -28px}.pd-bL{background-color:#000;opacity:.4;position:fixed}.pd-bM{-webkit-animation:pd-b .3s;animation:pd-b .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.pd-bN{padding:80px 0}@-webkit-keyframes pd-b{0%{opacity:0}to{opacity:.4}}@keyframes pd-b{0%{opacity:0}to{opacity:.4}}.pd-bO{-webkit-animation:pd-c .2s;animation:pd-c .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd-c{0%{opacity:.4}to{opacity:0}}@keyframes pd-c{0%{opacity:.4}to{opacity:0}}.pd-bP{-ms-scroll-chaining:none;overscroll-behavior:contain;position:fixed}.pd-bQ{-webkit-animation:pd-d .3s;animation:pd-d .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd-d{0%{opacity:0;transform:translateY(80px)}to{opacity:1;transform:translateY(0)}}@keyframes pd-d{0%{opacity:0;transform:translateY(80px)}to{opacity:1;transform:translateY(0)}}.pd-bR{-webkit-animation:pd-e .2s;animation:pd-e .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd-e{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-80px)}}@keyframes pd-e{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-80px)}}");let f=800,b=[];i.exports=d.extend({tmpl:(e,t,i)=>{let l,d,o,p,r,n,{removeClass:c,zIndex:h,width:g,closable:_}=e;return d="pd-bL pd-aa",c||(d+=" pd-bM"),l=[t("div",{style:"z-index:"+(h-1),id:"_mx_mask_"+i,class:d})],r=[],_&&(o=[s||(s=t(0,"\ue624"))],r.push(t("span",{class:"pd-J pd-_ pd-ai pd-bI pd-bK pd-c","mx5-click":i+"\x1e_bu()"},o))),a?o=[a]:(p=[t(0,'<span class="pd-q"></span>',1)],o=[a=t("div",{_:"_",class:"pd-Y pd-bN pd-p"},p)]),r.push(t("div",{class:"pd-1 pd-ad pd-bH",id:"_mx_cnt_"+i},o)),d="pd-bJ",c||(d+=" pd-bQ"),n=[t("div",{id:"_mx_body_"+i,style:"width:"+g+"px",class:d},r)],l.push(t("div",{class:"pd-B pd-C pd-a_ pd-aa pd-ab pd-ac pd-bP",style:"z-index:"+h,tabindex:0,id:"_mx_scroll_"+i},n)),t(i,0,l)},init(e){let t=this,i=t.root;t.on("destroy",()=>{(e=>{for(let t,i=b.length-1;i>=0;i--)if((t=b[i]).id==e.id){b.splice(i,1);break}})(t),f-=2,c(i,"_bq"),i.parentNode.removeChild(i)}),h(e,"closable")||(e.closable=!0),t.set(e),f+=2,b.push(t)},async render(){let e=this;await e.digest({zIndex:f});let t=r(`_mx_scroll_${this.id}`);t&&t.focus();let i=e.get(),s=n(e,"_aU");e.owner.mount(r("_mx_cnt_"+e.id),i.view,i),setTimeout(()=>{s()&&e.digest({removeClass:!0})},300)},_br(e){let t=r("_mx_cnt_"+this.id);o.byNode(t).invoke("fire",["unload",e])},_bs(){let e,t=this.id;(e=r("_mx_body_"+t)).classList.add("pd-bR"),(e=r("_mx_mask_"+t)).classList.add("pd-bO")},"_bu<click>"(){c(this.root,"_bt")},"$doc<keyup>"(e){if("Escape"==e.code){let e=b[b.length-1];e==this&&e.get("closable")&&c(this.root,"_bt")}}}).static({_bw(e,t){let i=g("_mx_dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" class="pd-v"/>');let s,a=r(i),l=e.owner.mount(a,"gallery/mx-dialog/index",t),d=async()=>{if(!a._bv&&!s){let e=()=>{a._bv=1,l.invoke("_bs"),m(a,"_bt",d),setTimeout(()=>{l.unmount()},200)},t={p:0,prevent(){s=1},resolve(){t.p=1,s=0,e()},reject(){t.p=1,s=0}};await l.invoke("_br",[t]),s||t.p||e()}};return u(a,"_bt",d),a},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,s,a="confirm"){this.mxDialog("gallery/mx-dialog/"+a,{body:e,cancel:i,enter:t,title:s,modal:!0,width:300})},mxDialog(e,t){let i,s,a=this,l={view:e},d=n(this,"_J");return _(e,()=>{let o="$dlg_"+e;if(a[o]||!d())return;a[o]=1,x(l,t),l.width||(l.width=500),l.dialog={close(){i&&c(i,"_bt")}},i=a._bw(a,l);let p=()=>{delete a[o],m(i,"_bq",p),s&&s()};u(i,"_bq",p)}),{close(){i&&c(i,"_bt")},whenClose(e){s=e}}}})}),define("gallery/mx-dragdrop/index",["magix"],(e,t,i)=>{const s=e("magix");let{attach:a,detach:l}=s,d=window,o=document,p=d.getComputedStyle,r=e=>{(e=d.getSelection)&&e().removeAllRanges()},n=e=>e.preventDefault(),c=["pointermove"],h=["pointerup","pointercancel"],g=["keydown","wheel","DOMMouseScroll","fullscreenchange","selectstart"],_={passive:!1};i.exports={ctor(){let e=this;e.on("destroy",()=>{e._by()})},_bz(e,t){t||(t="_bx");let i=e[t];return i||(e[t]=0),e[t]++,!i},_bA(e,t){t||(t="_bx");let i=e[t];return i&&e[t]--,1===i},_bB(e,t){delete e[t||"_bx"]},_by(e){let t=this;if(t._bC){let i;for(i of c)l(o,i,t._bC);for(i of h)l(o,i,t._bD);for(i of g)l(o,i,n);l(d,"blur",t._bD),delete t._bC;let s=t._bE;s&&s(e)}},_w(e,t,i){let s=this;if(s._by(),e){let e;for(e of(r(),s._bE=i,s._bD=s._by.bind(s),s._bC=(e=>{t&&t(e)}),c))a(o,e,s._bC);for(e of h)a(o,e,s._bD);for(e of g)a(o,e,n,_);a(d,"blur",s._bD)}},_ay(e,t){let i;if(o.elementFromPoint)for(!n._bF&&p&&(n._bF=1,n._bG=null!==o.elementFromPoint(-1,-1)),n._bG&&(e+=window.pageXOffset,t+=window.pageYOffset),i=o.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},_bH:r}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,a={class:"pd-_ pd-b4"},l={class:"pd-3 pd-6 pd-7 pd-M pd-ab pd-bZ"},d={class:"pd-K pd-_ pd-b4"};const o=e("magix"),p=e("../mx-monitor/index");let{View:r,applyStyle:n,toMap:c,inside:h,node:g,dispatch:_,isFunction:x}=o;n("pd-l",'.pd-bS{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;height:22px;min-width:50px;outline:0;vertical-align:middle}.pd-bT:focus,.pd-bT:focus:hover{border-color:#fa742b}.pd-bS:hover{border-color:#ccc}.pd-bU{color:#333;padding:0 20px 0 3px}.pd-bV{background-color:#f5f5f5;cursor:not-allowed}.pd-bV:hover{border-color:#e6e6e6}.pd-bV .pd-bU{color:#999;cursor:not-allowed}.pd-bW{color:#ccc;right:0;top:0;transition:all .25s;width:20px}.pd-bW:after{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid #ccc;bottom:0;content:"";display:block;height:0;left:0;margin:auto;position:absolute;right:0;top:0;width:0}.pd-bX .pd-bW{transform:rotate(180deg)}.pd-bX,.pd-bX:hover{border-color:#fa742b}.pd-bY{height:20px;line-height:21px}.pd-bZ{background-color:#fff;border:1px solid #ccc;border-radius:2px;left:-1px;margin-top:4px;right:-1px;top:100%;z-index:300}.pd-bX .pd-bZ{display:block}.pd-b0{max-height:196px;padding:2px 0}.pd-b1{margin:2px 0;padding:0 2px}.pd-b2{border-radius:2px;height:20px;line-height:20px;padding:0 5px}.pd-b2:hover{background-color:#f0f0f0;color:#333}.pd-b3,.pd-b3:active,.pd-b3:focus,.pd-b3:hover{background-color:#fa742b;color:#fff}.pd-b4{padding:0 4px}'),i.exports=r.extend({tmpl:(e,t,i,o,p,r)=>{let n,c,h,g,_,x,u,m,f,{disabled:b,i18n:y,selectedText:w,selected:v,emptyText:k,selectedIcon:S,rList:z,list:j,textKey:T,valueKey:L,iconKey:I}=e;if(f=[],g=[],S&&(h=[t(0,S,1)],g.push(t("i",a,h))),g.push(t(0,y(w))),c="pd-bY pd-R pd-8",""!==v&&v!=k||(c+=" pd-P"),_=[t("span",{class:c},g)],s?_.push(s):_.push(s=t("span",{_:"_",class:"pd-C pd-M pd-bW"})),f.push(t("div",{class:"pd-1 pd-B pd-J pd-bU","mx5-click":i+"\x1e_bg()",title:y(w)},_)),z){g=[];for(let e=j.length,s=0;s<e;s+=1){let e,a=j[s],l=a,o=a;T&&L&&(x="",l=y(a[T]),x+=" ",o=a[L],x+=" ",e=a[I]);let n=o+""==v+"";m=[],e&&(u=[t(0,e,1)],m.push(t("i",d,u))),m.push(t(0,l)),c="pd-b2 pd-R pd-Q pd-B pd-J pd-8",n&&(c+=" pd-b3"),h=[t("span",{"mx5-click":i+"\x1e_bI({item:'"+r(p,a,"_."+s+".a")+"'})",class:c},m)],g.push(t("li",{title:l,class:"pd-ab pd-b1"},h))}_=[t("ul",{class:"pd-b0 pd-t",id:"_mx_list_"+i},g)],f.push(t("div",l,_))}return c="pd-bS pd-B pd-5 pd-1 pd-N",n=[t("div",{id:"_mx_dd_"+i,tabindex:!b&&0,class:c+=b?" pd-bV":" pd-bT"},f)],t(i,0,n)},init(){p._aY(),this.on("destroy",()=>{p._aZ(this),p._a0()})},assign(e){let t=e.selected,i=e.textKey||"",s=e.valueKey||"",a=e.iconKey||"",l=e.emptyText||"",d=e.disabled+""=="true",o=e.list;o=(o=x(o)?o():o||[]).slice();let p=c(o,s);if(l)if(i&&s){if(!p[""]){let e={};e[i]=l,e[s]="",o.unshift(e),p[""]=e}}else p[l]||(o.unshift(l),p[l]=l);t||!l||i||s||(t=l),t&&p[t]||(t=p[t]||o[0],i&&s&&(t=t[s]));let r=i&&s?p[t][i]:t,n=a?p[t][a]:"";this.set({selected:t,selectedText:r,selectedIcon:n,list:o,iconKey:a,textKey:i,valueKey:s,emptyText:l,disabled:d})},render(){this.digest()},_bd(e){return h(e,this.root)},async _x(){let e=this,t=g("_mx_dd_"+e.id);if(!t.classList.contains("pd-bX")){t.classList.add("pd-bX"),e.get("rList")||await e.digest({rList:!0});let i=(t=g("_mx_list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded(),p._be(e)}},_y(){let e=this,t=g("_mx_dd_"+e.id);t.classList.contains("pd-bX")&&(t.classList.remove("pd-bX"),p._aZ(e))},"_bg<click>"(){let e=this,t=g("_mx_dd_"+e.id);t.classList.contains("pd-bX")?e._y():t.classList.contains("pd-bV")||e._x()},"_bI<click>"(e){let t=this;t._y();let i=t.get("valueKey"),s=t.get("textKey"),a=t.get("iconKey"),l=t.get("selected"),d=e.params.item,o=d,p=d,r="";s&&i&&(p=d[s],o=d[i],r=d[a]),l!==o&&(t.digest({selected:o,selectedIcon:r,selectedText:p}),_(t.root,"change",{item:d,value:i?d[i]:d,text:s?d[s]:d}))}})}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{let s,a,l;const d=e("magix");d.applyStyle("pd-m",".pd-b5{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pd-b6{background:#e0e0e0;border-radius:2px;cursor:pointer;height:20px;line-height:20px;margin:0 1px;text-align:center;width:20px}.pd-b6:hover{background:#ccc}.pd-b7,.pd-b7:hover{background:#fa742b;color:#fff}.pd-b8,.pd-b8 .pd-b6{cursor:not-allowed;opacity:.7}.pd-b8 .pd-b6,.pd-b8 .pd-b6:hover{background:#e9e9e9}.pd-b8 .pd-b7,.pd-b8 .pd-b7:hover{background:#fb955d}"),i.exports=d.View.extend({tmpl:(e,t,i)=>{let d,o,p,r,{disabled:n,i18n:c,value:h}=e;return p=[s||(s=t(0,"\ue687"))],o="pd-Z pd-b6 pd-_","flex-start"==h.hpos&&(o+=" pd-b7"),r=[t("li",{title:c("ai"),"mx5-click":i+"\x1e_9({type:'h',v:'flex-start'})",class:o},p)],p=[a||(a=t(0,"\ue68a"))],o="pd-Z pd-b6 pd-_","center"==h.hpos&&(o+=" pd-b7"),r.push(t("li",{title:c("aj"),"mx5-click":i+"\x1e_9({type:'h',v:'center'})",class:o},p)),p=[l||(l=t(0,"\ue686"))],o="pd-Z pd-b6 pd-_","flex-end"==h.hpos&&(o+=" pd-b7"),r.push(t("li",{title:c("ak"),"mx5-click":i+"\x1e_9({type:'h',v:'flex-end'})",class:o},p)),p=[s||(s=t(0,"\ue687"))],o="pd-Z pd-b6 pd-f pd-_","flex-start"==h.vpos&&(o+=" pd-b7"),r.push(t("li",{title:c("al"),"mx5-click":i+"\x1e_9({type:'v',v:'flex-start'})",class:o},p)),p=[a||(a=t(0,"\ue68a"))],o="pd-Z pd-b6 pd-_ pd-f","center"==h.vpos&&(o+=" pd-b7"),r.push(t("li",{title:c("am"),"mx5-click":i+"\x1e_9({type:'v',v:'center'})",class:o},p)),p=[l||(l=t(0,"\ue686"))],o="pd-Z pd-b6 pd-_ pd-f","flex-end"==h.vpos&&(o+=" pd-b7"),r.push(t("li",{title:c("an"),"mx5-click":i+"\x1e_9({type:'v',v:'flex-end'})",class:o},p)),o="pd-t pd-5 pd-b5",n&&(o+=" pd-b8"),d=[t("ul",{class:o},r)],t(i,0,d)},assign(e){return this._bJ=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_9<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bJ,{type:s,v:a}=e.params;i[s+"pos"]=a,t._bJ=i,t.digest({value:i}),d.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{let s,a,l;const d=e("magix");d.applyStyle("pd-m",".pd-b5{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pd-b6{background:#e0e0e0;border-radius:2px;cursor:pointer;height:20px;line-height:20px;margin:0 1px;text-align:center;width:20px}.pd-b6:hover{background:#ccc}.pd-b7,.pd-b7:hover{background:#fa742b;color:#fff}.pd-b8,.pd-b8 .pd-b6{cursor:not-allowed;opacity:.7}.pd-b8 .pd-b6,.pd-b8 .pd-b6:hover{background:#e9e9e9}.pd-b8 .pd-b7,.pd-b8 .pd-b7:hover{background:#fb955d}"),i.exports=d.View.extend({tmpl:(e,t,i)=>{let d,o,p,r,{disabled:n,i18n:c,value:h}=e;return p=[s||(s=t(0,"\ue749"))],o="pd-Z pd-b6 pd-_",h.styleBold&&(o+=" pd-b7"),r=[t("li",{title:c("ao"),"mx5-click":i+"\x1e_9({key:'styleBold'})",class:o},p)],p=[a||(a=t(0,"\ue65f"))],o="pd-Z pd-b6 pd-_",h.styleItalic&&(o+=" pd-b7"),r.push(t("li",{title:c("ap"),"mx5-click":i+"\x1e_9({key:'styleItalic'})",class:o},p)),p=[l||(l=t(0,"\ue62e"))],o="pd-Z pd-b6 pd-_",h.styleUnderline&&(o+=" pd-b7"),r.push(t("li",{title:c("aq"),"mx5-click":i+"\x1e_9({key:'styleUnderline'})",class:o},p)),o="pd-t pd-5 pd-b5",n&&(o+=" pd-b8"),d=[t("ul",{class:o},r)],t(i,0,d)},assign(e){return this._bJ=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_9<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bJ,{key:s}=e.params;i[s]=!i[s],t._bJ=i,t.digest({value:i}),d.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-layout/column",["magix","../mx-number/index"],(e,t,i)=>{let s,a;e("../mx-number/index");let l={class:"pd-b9"};const d=e("magix");d.applyStyle("pd-n",".pd-b9{align-items:center;display:flex;margin:5px 0}.pd-c_{color:#333;flex-basis:24px;font-size:12px;text-align:right}.pd-ca,.pd-c_{cursor:pointer}.pd-cb{color:#bbb;cursor:not-allowed}"),i.exports=d.View.extend({tmpl:(e,t,i,d,o,p)=>{let r,n,c,h=[],{columns:g,disabled:_,i18n:x}=e;for(let e=g.length,a=0;a<e;a+=1){let e=g[a];(c=[]).push(t("div",{"mx5-owner":i,$:"columns",disabled:_,"mx5-input":i+"\x1e_bL({index:"+a+"})","mx5-change":i+"\x1e_bK()",class:"pd-1 pd-a","mx5-view":"gallery/mx-number/index?value="+p(o,e.width,"_."+a+".a")+"&max=100&min=0&step=1"})),g.length>1&&(n=[s||(s=t(0,"\ue6b3"))],r="pd-_ pd-c_",_&&(r+=" pd-cb"),c.push(t("i",{title:x("ar"),"mx5-click":i+"\x1e_bN({index:"+a+"})",class:r},n))),h.push(t("div",l,c))}return c=[a||(a=t(0,"\ue606"))],r="pd-_ pd-ca",(_||g.length>9)&&(r+=" pd-cb"),h.push(t("i",{title:x("as"),"mx5-click":i+"\x1e_bM()",class:r},c)),t(i,0,h)},assign(e){this.set(e)},render(){this.digest()},"_bK<change>"(e){e.stopPropagation()},"_bL<input>"(e){let t=this.get("columns"),{index:i}=e.params;t[i].width=e.value,d.dispatch(this.root,"change")},"_bM<click>"(){if(this.get("disabled"))return;let e=this.get("columns");if(e.length>9)return;let t=0;for(let i of e)t+=i.width;if(t>=100)for(let t of e)if(t.width>10){t.width-=10;break}e.push({width:10,elements:[]}),this.digest({columns:e}),d.dispatch(this.root,"change")},"_bN<click>"(e){if(this.get("disabled"))return;let t=this.get("columns"),{index:i}=e.params;t.splice(i,1),this.digest({columns:t}),d.dispatch(this.root,"change")}})}),define("gallery/mx-layout/guage",["magix","../mx-number/index"],(e,t,i)=>{e("../mx-number/index");let s={class:"pd-cc"},a={class:"pd-cd"};const l=e("magix");l.applyStyle("pd-o",".pd-cc{align-items:center;display:flex}.pd-cd{width:30px}");let d=["at","au","av","aw"];i.exports=l.View.extend({tmpl:(e,t,i,l,d,o)=>{let p,r,n=[],{i18n:c,titles:h,disabled:g,guage:_}=e;for(let e=0;e<4;e++)p=[t(0,c(h[e]))],r=[t("div",a,p),t("div",{"mx5-owner":i,$:"guage",disabled:g,"mx5-input":i+"\x1e_bL({index:"+e+"})","mx5-change":i+"\x1e_bK()",class:"pd-1 pd-a","mx5-view":"gallery/mx-number/index?max=500&min=0&value="+o(d,_[e])})],n.push(t("div",s,r));return t(i,0,n)},init(){this.set({titles:d})},assign(e){let{guage:t,disabled:i}=e,s=t.split(" "),a=[];for(let e of s)a.push(parseInt(e,10));return this.set({disabled:i,guage:a}),!0},render(){this.digest()},"_bK<change>"(e){e.stopPropagation()},"_bL<input>"(e){e.stopPropagation();let t=this.get("guage"),{index:i}=e.params;t[i]=e.value,l.dispatch(this.root,"change",{value:t.join("px ")+"px"})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,a={class:"pd-5 pd-cf"};const l=e("magix"),d=e("../mx-monitor/index");l.applyStyle("pd-p",".pd-ce{z-index:400}.pd-cf{background-color:#fff;border:1px solid #e6e6e6;box-shadow:0 1px 3px 1px rgba(0,0,0,.06);padding:2px 0}.pd-cf,.pd-cg{border-radius:2px;cursor:default}.pd-cg{height:22px;line-height:22px;margin:2px;padding:0 8px}.pd-ch{background-color:#fa742b;color:#fff}.pd-ci{background:#eee;height:1px;margin:4px 0}.pd-cj{color:#ccc;cursor:not-allowed}"),i.exports=l.View.extend({tmpl:(e,t,i,l,d,o)=>{let p,r,n,c,h,{width:g,list:_,disabled:x,textKey:u}=e;c=[];for(let e=_.length,a=0;a<e;a+=1){let e=_[a];e.spliter?s?c.push(s):c.push(s=t("li",{_:"_",class:"pd-ci"})):(n=[t(0,e[u])],r="pd-8 pd-cg ",x[e.id]&&(r+=" pd-cj"),c.push(t("li",{"mx5-pointerover":i+"\x1e_bV({d:"+(x[e.id]||0)+"})","mx5-pointerout":i+"\x1e_bV({d:"+(x[e.id]||0)+"})","mx5-click":i+"\x1e_bI({item:'"+o(d,e,"_."+a+".a")+"',d:"+(x[e.id]||0)+"})",title:e[u],class:r},n)))}return h=[t("ul",a,c)],p=[t("div",{style:"width:"+g+"px;position:absolute;left:-10000px;top:-10000px",class:"pd-ce",id:"cnt_"+i,"mx5-contextmenu":i+"\x1e_A()"},h)],t(i,0,p)},init(e){let t=this;d._aY(),t.on("destroy",()=>{d._aZ(t),d._a0()})},assign(e){let t=this,i=e.width||140,s=e.valueKey||"id",a=e.textKey||"text";t._bO=e.list,t._bP=i,t._bQ=s,t._bR=a,t._bS=e.disabled||{},t._bT=e.picked},async render(e){let t=this;await t.digest({disabled:t._bS,list:t._bO,width:t._bP,valueKey:t._bQ,textKey:t._bR}),e&&this._x(e)},_bd(e){return l.inside(e,this.root)},_x(e){let t=this;if(!t._bU){t._bU=1;let i=l.node("cnt_"+t.id),s=i.clientWidth,a=i.clientHeight,o=e.pageX,p=e.pageY;o+s>window.innerWidth&&(o-=s)<0&&(o=0),p+a>window.innerHeight&&(p-=a)<0&&(p=0),i.style.left=o+"px",i.style.top=p+"px",d._be(t)}},_y(){let e=this;if(e._bU){e._bU=!1,l.node("cnt_"+e.id).style.left="-10000px",d._aZ(e)}},"_bV<pointerover,pointerout>"(e){if(e.params.d)return;let t=e.eventTarget;!l.inside(e.relatedTarget,t)&&t.classList["pointerout"==e.type?"remove":"add"]("pd-ch")},"_bI<click>"(e){if(e.params.d)return;this._y();let t=this._bT;t&&t(e.params.item)},"_A<contextmenu>"(e){e.preventDefault()}}).static({show(e,t,i){let s="ctx_"+e.id,a=l.node(s),d=a&&l.Vframe.byNode(a);d?(d.invoke("assign",[i]),d.invoke("render",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${s}"></div>`),(d=e.owner.mount(l.node(s),"gallery/mx-menu/index",i)).invoke("_x",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{let s=0,a=[],l=["pointerdown","keyup","touchstart","pointerstart"],d=e=>{for(let t=a.length;t--;){let i=a[t];if(i._bW)a.splice(t,1);else{let t=i._bX;"resize"!=e.type&&t._bd(e.target)||t._y()}}},o=e=>{let t=a[e.id];t&&(t._bW=!0),delete a[e.id]};i.exports={_be(e){o(e);let t={_bX:e};a.push(t),a[e.id]=t},_aZ:o,_aY(){if(!s){for(let e of l)document.addEventListener(e,d);window.addEventListener("resize",d)}s++},_a0(){if(s>0&&!--s){for(let e of l)document.removeEventListener(e,d);window.removeEventListener("resize",d)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{const s=e("magix");let{node:a,View:l,applyStyle:d,has:o,mark:p,dispatch:r,isFunction:n}=s,c=Number.MAX_SAFE_INTEGER;d("pd-q",'.pd-ck{background:none;border:none;color:#333;font-size:100%;padding:0 20px 0 0}.pd-ck:focus{outline:0}.pd-ck:disabled{background:#f5f5f5;color:#999;cursor:not-allowed}.pd-cl,.pd-cm{border:2px solid #fff;border-radius:2px;height:50%;right:0;width:20px}.pd-cl:hover,.pd-cm:hover{background-color:#f0f0f0}.pd-cm{top:1px}.pd-cl{bottom:1px}.pd-cn:after{border-left:4px solid transparent;border-right:4px solid transparent;bottom:0;content:"";display:block;height:0;left:0;margin:auto;position:absolute;right:0;top:0;width:0}.pd-cl:after{border-top:4px solid #ccc}.pd-cm:after{border-bottom:4px solid #ccc}.pd-cl.pd-co,.pd-cm.pd-co{border-color:transparent;cursor:not-allowed}.pd-cl.pd-co:hover,.pd-cm.pd-co:hover{background-color:transparent}');let h=e=>e.shiftKey?1:e.metaKey||e.ctrlKey?2:0;i.exports=l.extend({tmpl:(e,t,i)=>{let s,a,{disabled:l}=e;return a="pd-cm pd-M pd-cn pd-5 pd-J",l&&(a+=" pd-co"),(s=[t("input",{class:"pd-B pd-C pd-R pd-ck",id:"_mx_ipt_"+i,"mx5-focusin":i+"\x1e_cd()","mx5-focusout":i+"\x1e_cf()","mx5-change":i+"\x1e_bK()","mx5-keydown":i+"\x1e_cm()",disabled:l,autocomplete:"off","mx5-input":i+"\x1e_cp()","mx5-wheel":i+"\x1e_cn()"},1)]).push(t("span",{"mx5-click":i+"\x1e_c_({i:1})","mx5-pointerdown":i+"\x1e_ck({i:1})","mx5-contextmenu":i+"\x1e_A()",class:a})),a="pd-cl pd-M pd-cn pd-5 pd-J",l&&(a+=" pd-co"),s.push(t("span",{"mx5-click":i+"\x1e_c_()","mx5-pointerdown":i+"\x1e_ck()","mx5-contextmenu":i+"\x1e_A()",class:a})),t(i,0,s)},assign(e){let t=this,{root:i}=t;return i.classList.contains("pd-d")?(t._bY=t._b7(e.value),!1):(delete t._bY,n(e.max)&&(//!important callback with ops.props
e.max=e.max(e.props)),n(e.min)&&(e.min=e.min(e.props)),n(e.fixed)&&(e.fixed=e.fixed()),n(e.step)&&(e.step=e.step()),t._bZ=+e.step||1,t._b0=e.empty,t._b1=i.hasAttribute("disabled"),t._b2=o(e,"max")?+e.max:c,t._b3=o(e,"min")?+e.min:-c,t._b4=+e.ratio||10,t._b5=+e.fixed||0,t._b6=t._b7(e.value),!0)},async render(){let{root:e}=this,t=p(this,"_aU");await this.digest({disabled:this._b1}),t()&&!e.classList.contains("pd-d")&&this._b8()},_b8(e){e=void 0===e?void 0===this._bY?this._b6:this._bY:e,a("_mx_ipt_"+this.id).value=e},_b7(e){let t=this;if((e=+e)||0===e){let i=t._b2,s=t._b3;e>i?e=i:e<s&&(e=s),e=+e.toFixed(t._b5)}return isNaN(e)?t._b0?"":0:e},_b9(e,t){let i=this;if(""!==e||!i._b0)return(e=i._b7(e))!==i._b6&&(t||i._b8(e),r(i.root,"input",{value:i._b6=e})),i._b6;r(i.root,"input",{value:i._b6=e})},_c_(e,t){let i=this,s=i._b6;""===s&&(s=0);let a=i._bZ;if(t)if(1==t)a*=i._b4;else{let e=i._b5,t=Number((a/i._b4).toFixed(e));0!=t&&(a=t)}e?s+=a:s-=a,i._b9(s)},_ca(){let e=a("_mx_ipt_"+this.id);e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},_cc(){let e=this;e.root.classList.add("pd-d"),o(e,"_cb")||(e._cb=e._b6)},"_cd<focusin>"(){this._cc()},"_cf<focusout>"(){let e=this;e._ce||(e.root.classList.remove("pd-d"),e._b8(),e._cb!=e._b6&&r(e.root,"change",{value:e._b6}),delete e._cb)},"_c_<click>"(e){let t=this;t._b1||t._cg||(t._c_(e.params.i,h(e)),t._ca())},"_ck<pointerdown>"(e){let t=this;if(!t._b1){t._ce=1,t._cc();let i=e.params.i,s=p(this,"_ch");t._ci=setTimeout(()=>{s()&&(t._cj=setInterval(()=>{s()&&(t._cg=1,t._c_(i,h(e)),t._ca())},50))},300)}},"_cm<keydown>"(e){if("ArrowUp"==e.code||"ArrowDown"==e.code){this._cl(e),this._c_("ArrowUp"==e.code,h(e))}},"_cn<wheel>&{passive:false}"(e){if(this.root.classList.contains("pd-d")){this._cl(e);let t=e.deltaY;this._c_(t>0,h(e))}},"_cp<input>"(e){this._co(e);let t=e.eventTarget;this._b9(t.value,1)},"$doc<pointerup>"(){let e=this;clearTimeout(e._ci),clearInterval(e._cj),delete e._ce;let t=p(this,"@:pointerup");setTimeout(()=>{t()&&delete e._cg},0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{let s,a={class:"pd-P pd-Y pd-cq"};const l=e("magix"),d=e("../mx-dialog/index");let{View:o,applyStyle:p,dispatch:r}=l;p("pd-r",".pd-cp{border:1px solid #e6e6e6;border-radius:2px;margin:4px 0}.pd-cp:hover{border-color:#ccc}.pd-cq{line-height:92px}.pd-cr{border:1px solid #e6e6e6;border-radius:2px;margin:4px;width:100px}.pd-cr:hover{border-color:#fa742b}.pd-cs{background-position:50%;background-repeat:no-repeat;background-size:contain}.pd-ct{height:25px;margin:0 5px;width:100px}.pd-cu{opacity:.2;right:3px;top:2px}.pd-cu:hover{opacity:.5}.pd-cv{background:#f5f5f5;cursor:not-allowed}.pd-cv .pd-cu,.pd-cv .pd-cu:hover{opacity:.1}.pd-cv:hover{border-color:#e6e6e6}.pd-cw{border-bottom:1px solid #fa742b;margin-bottom:10px}.pd-cx{border:1px solid transparent;border-bottom:none;height:25px;line-height:25px;margin:0 5px -1px;min-width:50px;padding:0 4px}.pd-cy{background:#fff;border-color:#fa742b;border-radius:2px 2px 0 0;color:#fa742b}.pd-cz{margin:100px}"),i.exports=o.extend({tmpl:(e,t,i)=>{let l,d,o,p,r,{disabled:n,src:c,i18n:h}=e;return r=[],c?(o=[s||(s=t(0,"\ue624"))],p=[t("i",{class:"pd-M pd-_ pd-cu","mx5-click":!n&&i+"\x1e1\x1e_cs()",title:h("ax")},o)],r.push(t("div",{class:"pd-B pd-C pd-cs",style:"background-image:url('"+c+"')"},p))):(p=[t(0,h("ay"))],r.push(t("div",a,p))),d="pd-cp pd-F pd-J pd-S pd-1 pd-V",n&&(d+=" pd-cv"),l=[t("div",{"mx5-click":!n&&i+"\x1e_cr()",class:d},r)],t(i,0,l)},assign(e){this.set(e)},render(){this.digest()},"_cr<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:1042,done(t){e._cq(t)}})},_cq(e){r(this.root,"change",e)},"_cs<click>"(e){this._co(e),this._cq({src:"",width:0,height:0})}}).merge(d)}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index","../mx-dialog/index","../mx-toast/index"],(e,t,i)=>{let s,a,l,d={class:"pd-F pd-a_ pd-af pd-am pd-an pd-c pd-i pd-j"},o={class:"pd-s"},p={class:"pd-ae pd-l"},r={class:"pd-2 pd-W pd-Y"},n={class:"pd-a_ pd-cw"},c={class:"pd-a_ pd-cz"},h={class:"pd-L pd-a_"},g={class:"pd-8 pd-Y pd-ct"};const _=e("magix"),x=e("../../designer/service"),u=e("../../i18n/index"),m=e("../mx-dialog/index"),f=e("../mx-toast/index");let{View:b,mark:y,node:w}=_;i.exports=b.extend({tmpl:(e,t,i,_,x,u,m)=>{let f,b,y,w,v,k,{i18n:S,error:z,list:j,current:T}=e;if(f=s?[s]:[s=t("div",{_:"_",class:"pd-al pd-c pd-k"})],b=[t(0,S("aA"))],y=[t("h5",o,b)],f.push(t("div",d,y)),y=[],z)b=[t(0,z.message)],y.push(t("div",r,b));else{b=[];for(let e=j.length,s=0;s<e;s+=1){v=[t(0,j[s].title)],w="pd-cx pd-Y pd-J",s==T&&(w+=" pd-cy"),b.push(t("div",{"mx5-click":s!=T&&i+"\x1e_cv({to:"+s+"})",class:w},v))}if(v=[a||(a=t(0,"\u7f51\u7edc\u56fe\u7247"))],w="pd-cx pd-Y pd-J","network"==T&&(w+=" pd-cy"),b.push(t("div",{"mx5-click":"network"!=T&&i+"\x1e_cv({to:'network'})",class:w},v)),y.push(t("div",n,b)),"network"==T)b=[l||(l=t(0,"\u7f51\u7edc\u5730\u5740: ")),t("input",{placeholder:"\u8bf7\u7c98\u8d34/\u8f93\u5165\u7f51\u7edc\u56fe\u7247\u5730\u5740",class:"pd-A pd-T pd-U pd-a",id:"_rd_nw_"+i},1)],v=[t(0,S("c"))],b.push(t("button",{class:"pd-A pd-g pd-h","mx5-click":i+"\x1e_cw()"},v)),y.push(t("div",c,b));else{b=[];for(let e=j[T].list,s=e.length,a=0;a<s;a+=1){let s=e[a];k=[t("div",{class:"pd-C pd-cs",style:"background-image:url('"+s.src+"')"})],v=[t("div",{class:"pd-J pd-S pd-V pd-ap pd-cr","mx5-click":i+"\x1e_cu({src:'"+m(s.src)+"'})"},k)],k=[t(0,s.title)],v.push(t("div",g,k)),b.push(t("div",{title:s.title},v))}y.push(t("div",h,b))}}return f.push(t("div",p,y)),t(i,0,f)},init(e){this._J=e.dialog,this._ct=e.done,this.set({current:0}),this.on("destroy",()=>{f.hide()})},render(){let e=y(this,"_aU");(new x).all("_ar",(t,i)=>{e()&&this.digest({error:t,list:i.get("data",[])})})},"_cu<click>"(e){let t=this,i=new Image,s=t._ct,a=e.params.src,l=y(this,"_cu");f.show("\u6b63\u5728\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8..."),i.onerror=(()=>{l()&&(f.hide(),t.alert(u("az")))}),i.onload=(()=>{if(l()){f.hide();let e=i.width,l=i.height;s({src:a,width:e,height:l}),t._J.close()}}),i.src=a},"_cv<click>"(e){let{to:t}=e.params;this.digest({current:t})},"_bu<click>"(){this._J.close()},"_cw<click>"(){let e=w(`_rd_nw_${this.id}`),t=e.value.trim();if(t){let i=y(this,"_cu"),s=this._ct;f.show("\u6b63\u5728\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8...");let a=new Image;a.onload=(()=>{i()&&(f.hide(),s({src:t,width:a.width,height:a.height}),this._J.close())}),a.onerror=(()=>{i()&&(e.select(),f.show("\u65e0\u6cd5\u52a0\u8f7d\u56fe\u7247\uff0c\u8bf7\u68c0\u67e5\u5730\u5740\u540e\u91cd\u8bd5~",2e3))}),a.src=t}else f.show("\u8bf7\u7c98\u8d34/\u8f93\u5165\u56fe\u7247\u5730\u5740~",2e3),e.focus()},"_cx<change>"(e){}}).merge(m)}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{const s=e("magix"),a=s.guid("cursor_");s.applyStyle("pd-s",".pd-cA{background:#fff;bottom:0;left:0;opacity:0;position:fixed;right:0;top:0;z-index:10000}"),i.exports={_x(e){let t=getComputedStyle(e);this._cy(t.cursor)},_cy(e){let t=s.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pd-cA" id="${a}"/>`),t=s.node(a)),t.style.cursor=e,t.style.display="block"},_y(){s.node(a).style.display="none"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("pd-t",".pd-cB{background:#fa742b;border-radius:2px;color:#fff;height:30px;left:-1000px;line-height:30px;opacity:.6;pointer-events:none;position:absolute;text-align:center;top:-1000px;width:30px;z-index:5000}.pd-cC{box-shadow:3px 3px #bb4504}");let a=s.guid("de_");i.exports={_P(e){let t=s.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="pd-cB pd-_" id="${a}"/>`),t=s.node(a)),t.innerHTML=e},_x(e,t){let i=s.node(a),l=i.style,d=i.classList;l.left=e.pageX+10+"px",l.top=e.pageY+18+"px",t?d.contains("pd-cC")||i.classList.add("pd-cC"):d.contains("pd-cC")&&i.classList.remove("pd-cC")},_y(){let e=s.node(a).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("pd-u",".pd-cD{border:1px dashed #fa742b;display:none;pointer-events:none;position:absolute}");let a=s.guid("set_");i.exports={_cz(){s.node(a)||document.body.insertAdjacentHTML("beforeend",`<div id="${a}" class="pd-cD"></div>`)},_P(e,t,i,l){let d=s.node(a).style;d.left=e+"px",d.top=t+"px",d.width=i+"px",d.height=l+"px",d.display="block"},_y(){s.node(a).style.display="none"}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{const s=e("magix");let a=window.requestAnimationFrame||(e=>setTimeout(e,16)),l=window.cancelAnimationFrame||clearTimeout,d=Date.now;i.exports={_cA:[],_av(e,t){this._cA.push({i:e||15,f:t,n:d()}),this._cB()},_aw(e){let t=this._cA;for(let i,s=0;s<t.length;s++)if(!(i=t[s]).r&&i.f==e){i.r=1;break}},_cB(){let e=this;if(!e._cC){let t=()=>{let i=e._cA;for(let e,t,a=0;a<i.length;a++)(e=i[a]).r?i.splice(a--,1):(t=d())-e.n>=e.i&&(e.n=t,s.toTry(e.f));i.length?e._cC=a(t):(l(e._cC),delete e._cC)};e._cC=a(t)}}}}),define("gallery/mx-toast/index",["magix"],(e,t,i)=>{const s=e("magix");let{applyStyle:a,guid:l,node:d}=s;a("pd-v",".pd-cE{background:#0008;border-radius:5px;color:#fff;left:50%;min-width:15%;padding:6px;position:fixed;text-align:center;top:50%;transform:translate(-50%,-50%);z-index:2000}");let o,p=l("_mx_toast_");i.exports={show(e,t){let i=d(p);i||((i=document.createElement("div")).id=p,i.className="pd-cE pd-v",document.body.appendChild(i)),i.style.display="block",i.innerHTML=e,clearTimeout(o),t&&(o=setTimeout(()=>{this.hide()},t))},hide(){clearTimeout(o);let e=d(p);e&&(e.style.display="none")}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{const s=e("magix"),a=e("./zh-cn"),l={"zh-cn":a,zh:a},d=s.has,o=/\{(\d+)\}/g;i.exports=((e,...t)=>{let i=(s.config("lang")||navigator.language).toLowerCase();d(l,i)||(i="zh-cn");let a=l[i],p=d(a,e)?a[e]:e;return t.length&&(p=p.replace(o,(e,i,s)=>(i|=0,t.length>i?(s=t[i],d(a,s)?a[s]:s):e))),p})}),define("i18n/zh-cn",[],(e,t,i)=>{i.exports={_:"\u5220\u9664\u8f85\u52a9\u7ebf",a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",c:"\u5e94\u7528",d:"\u53d6\u6d88",ah:"\u786e\u5b9a",aB:"\u8fd8\u539f",ay:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",af:"\u6dfb\u52a0\u914d\u8272",ae:"\u79fb\u9664\u5f53\u524d\u914d\u8272",ag:"\u63d0\u793a",o:"\u67f1\u72b6\u56fe",v:"\u6298\u7ebf\u56fe",w:"\u4eea\u8868\u76d8",x:"\u997c\u56fe",y:"\u56fe\u7247",D:"\u5e03\u5c40",H:"\u9875\u9762",R:"\u5e73\u94fa\u56fe",W:"\u6587\u672c",as:"\u70b9\u51fb\u6dfb\u52a0\u5217",ar:"\u70b9\u51fb\u5220\u9664\u5217",aA:"\u56fe\u7247\u5e93",az:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",h:"\u5220\u9664",ac:"\u786e\u5b9a",an:"\u5782\u76f4\u5c45\u4e0b",aj:"\u6c34\u5e73\u5c45\u4e2d",ai:"\u6c34\u5e73\u5c45\u5de6",am:"\u5782\u76f4\u5c45\u4e2d",ak:"\u6c34\u5e73\u5c45\u53f3",al:"\u5782\u76f4\u5c45\u4e0a",ao:"\u52a0\u7c97",ap:"\u659c\u4f53",aq:"\u4e0b\u5212\u7ebf",av:"\u4e0b",aw:"\u5de6",au:"\u53f3",at:"\u4e0a",m:"\u5173\u95ed\u6240\u6709\u9762\u677f(Shift+Z)",k:"\u5173\u95ed{0}\u9762\u677f(\u6570\u5b57\u952e{1})",aC:"\u7ec4\u4ef6\u6811",aD:"\u6570\u636e\u6e90",aE:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",aF:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",aG:"\u5c55\u5f00{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",aH:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",n:"\u6253\u5f00\u6240\u6709\u9762\u677f(Shift+Z)",l:"\u6253\u5f00{0}\u9762\u677f(\u6570\u5b57\u952e{1})",aI:"\u5c5e\u6027",aJ:"\u6298\u53e0{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",q:"\u900f\u660e\u5ea6\uff1a",K:"\u80cc\u666f\u56fe\u7247\uff1a",L:"\u80cc\u666f\u5e73\u94fa\uff1a",r:"\u80cc\u666f\u989c\u8272\uff1a",s:"\u56fe\u8868\u6807\u9898\uff1a",E:"\u5217\u5206\u914d\uff1a",t:"\u914d\u8272\uff1a",A:"\u6392\u5217\uff1a",X:"\u5b57\u53f7\uff1a",a_:"\u6837\u5f0f\uff1a",Z:"\u6587\u5b57\u989c\u8272\uff1a",M:"\u62c9\u4f38\u94fa\u6ee1",p:"\u9ad8\uff1a",T:"\u56fe\u7247\u9ad8\uff1a",aK:"\u8fd8\u539f\u5c3a\u5bf8\uff1a",S:"\u56fe\u7247\u5bbd\uff1a",z:"\u56fe\u7247\uff1a",Y:"\u5b57\u95f4\u8ddd\uff1a",u:"\u9501\u5b9a\u7f16\u8f91\uff1a",F:"\u5916\u8fb9\u8ddd\uff1a",N:"\u539f\u59cb\u5c3a\u5bf8",U:"\u6c34\u5e73(%)\uff1a",V:"\u5782\u76f4(%)\uff1a",G:"\u5185\u8fb9\u8ddd\uff1a",J:"\u6700\u5c0f\u9ad8\u5ea6\uff1a",I:"\u6700\u5c0f\u5bbd\u5ea6\uff1a",O:"\u6a2a\u5411\u5e73\u94fa",P:"\u5782\u76f4\u5e73\u94fa",Q:"\u53cc\u5411\u5e73\u94fa",B:"\u5782\u76f4\u955c\u50cf\uff1a",C:"\u6c34\u5e73\u955c\u50cf\uff1a",aa:"\u5185\u5bb9\uff1a",aL:"\u7c7b\u578b\uff1a",j:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",ab:"\u6e05\u9664\u989c\u8272",ax:"\u6e05\u9664\u56fe\u7247",b:"\u7f16\u8f91\u533a\u6570\u636e",g:"\u6388\u6743\u6216\u529f\u80fd\u5b9a\u5236\u8bf7\u8054\u7cfb\u5fae\u4fe1:qq84685009\u3002&copy;2018-"+(new Date).getFullYear(),e:"\u901a\u7528\u9875\u9762\u8bbe\u8ba1\u5668",f:"\u7cfb\u7edf\u6b63\u5fd9...",i:"\u64a4\u9500(Ctrl+Z)"}}),define("panels/index",["magix"],(e,t,i)=>{const s=e("magix");let a=[{title:"aC",icon:"&#xe7ef;",show:!0,left:30,top:90,width:200,height:145,resizeY:!0,key:1,id:"p-elements",view:"panels/elements/index"},{title:"aI",icon:"&#xe7a1;",width:240,height:145,right:10,top:90,key:2,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"}],l=s.toMap(a,"id");i.exports={_ab(){let e=!0;for(let t of a){if(!l[t.id]._){e=!1;break}}return e},_ac(){for(let e of a)this._cX(e.id,!0);s.State.fire("p")},_ad(){for(let e of a)this._cY(e.id,!0);s.State.fire("p")},_aa(){for(let e of a)e.show&&this._cY(e.id,!0);s.State.fire("p")},_cY(e,t){let i=l[e];if(!i._){if(i._=1,i.eId)s.node(i.eId).style.display="block";else{i.eId=s.guid("panel_");let e=s.node(s.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=s.Vframe.byNode(e);i.close=(()=>{this._cX(i.id)}),t.mount(s.node(i.eId),"panels/panel",i)}if(!t){s.State.fire("p"),s.Vframe.byNode(s.node(i.eId)).invoke("_x")}}},_cX(e){let t=l[e];if(t._){t._=0;let e=s.node(t.eId);e.style.display="none",s.State.fire("p"),s.Vframe.byNode(e).invoke("_y")}},_7(e){l[e]._?this._cX(e):this._cY(e)},_6(e){let t=l[e];if(t._){let e=s.node(t.eId);s.Vframe.byNode(e).invoke("_cZ")}},_5:()=>a}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{let s,a,l={class:"pd-4 pd-5 pd-cR"},d={class:"pd-_ pd-cP pd-w"},o={class:"pd-0 pd-C pd-a_ pd-af"};const p=e("magix"),r=e("../gallery/mx-pointer/cursor"),n=e("../gallery/mx-dragdrop/index");let{node:c,applyStyle:h,View:g}=p;h("pd-x",".pd-cP{font-size:12px}.pd-cQ{background:#fffe;box-shadow:0 2px 4px 0 rgba(0,0,0,.3);position:absolute}.pd-cR{background:#fa742b;color:#fff;font-size:12px;height:18px;line-height:18px}.pd-cS{cursor:move;padding:0 5px;width:calc(100% - 36px)}.pd-cT{align-items:center;border-radius:2px;cursor:pointer;display:inline-flex;font-size:11px;height:14px;justify-content:center;margin:0 1px;width:16px}.pd-cT:hover{background:#bb4504}.pd-cU{overflow:hidden;transition:height .25s}.pd-cV{transition:none}.pd-cW{float:left;overflow:auto;width:calc(100% - 2px)}.pd-cX{cursor:ew-resize;float:right;width:2px}.pd-cY,.pd-cX{background:#fafafa}.pd-cY{cursor:ns-resize;height:2px}");let _=[],x={_be(e){_.push(e)},_aZ(e){for(let t=_.length;t--;)if(_[t]==e){_.splice(t,1);break}this._c0()},_c0(){for(let e=_.length;e--;)_[e]._c1(300+e)},_c2(e){if(_[_.length-1]!=e){for(let t=_.length;t--;)if(_[t]==e){_.splice(t,1);break}_.push(e),this._c0()}}};i.exports=g.extend({tmpl:(e,t,i)=>{let p,r,n,c,h,g,_,{width:x,left:u,right:m,top:f,zIndex:b,i18n:y,icon:w,title:v,shrink:k,key:S,height:z,resizeX:j,view:T,resizeY:L}=e;return n=[t(0,w,1)],c=[t("i",d,n),t(0,y(v))],g=[t("div",{class:"pd-Z pd-cS",title:y("aE"),"mx5-pointerdown":i+"\x1e1\x1e_c4()"},c)],n=[s||(s=t(0,"\ue73a"))],h="pd-_ pd-cT",k&&(h+=" pd-x"),c=[t("i",{"mx5-click":i+"\x1e_cZ()",title:y(k?"aG":"aJ",v,S),class:h},n)],n=[a||(a=t(0,"\ue712"))],c.push(t("i",{class:"pd-_ pd-cT","mx5-click":i+"\x1e_bu()",title:y("k",v,S)},n)),g.push(t("div",o,c)),_=[t("div",l,g)],(g=[]).push(t("div",{"mx5-owner":i,style:"width:"+(j?"calc(100% - 2px)":"100%"),class:"pd-5 pd-6 pd-7 pd-C pd-cW","mx5-view":T})),j||g.push(t("div",{class:"pd-5 pd-C pd-cX",title:y("aF"),"mx5-pointerdown":i+"\x1e1\x1e_aW({w:1})"})),_.push(t("div",{class:"pd-cU",id:"c_"+i,style:"height:"+(k?0:`calc(100vh - ${z}px)`)},g)),h="pd-cY pd-5",!k&&L||(h+=" pd-3"),_.push(t("div",{title:y("aH"),"mx5-pointerdown":i+"\x1e\x1e_aW({h:1})",class:h})),r="width:"+x+"px;",r+=0===u||u?"left:"+u:"right:"+m,p=[t("div",{class:"pd-cQ",id:"p_"+i,"mx5-pointerdown":i+"\x1e_c5()",style:r+="px;top:"+f+"px;z-index:"+b},_)],t(i,0,p)},init(e){x._be(this),this.on("destroy",()=>{x._aZ(this)}),this._c3=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,key:e.key,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+_.length})},"_c4<pointerdown>"(e){let t=c("p_"+this.id).style,i=this.get("left"),s=this.get("width"),a=0;void 0===i&&(a=1,i=this.get("right"));let l=this.get("top"),d=a?"right":"left",o=0,p=e.eventTarget;this._w(e,n=>{o||(o=1,r._x(p));let c=(a?e.pageX-n.pageX:n.pageX-e.pageX)+i;c<0?c=0:c+s>window.innerWidth&&(c=window.innerWidth-s);let h=n.pageY-e.pageY+l;h<0?h=0:h+18>window.innerHeight&&(h=window.innerHeight-18),t[d]=c+"px",t.top=h+"px",this.set({[d]:c,top:h})},()=>{r._y()})},"_aW<pointerdown>"(e){let{w:t}=e.params,i=this.get("width"),s=this.get("height"),a=this.get("right"),l=c("c_"+this.id);l.classList.add("pd-cV");let d=l.style,o=c("p_"+this.id).style,p=0,n=e.eventTarget;this._w(e,l=>{if(p||(p=1,r._x(n)),t){let t=l.pageX-e.pageX;t+i<100&&(t=100-i);let d=t+i;o.width=d+"px",(a||0===s)&&(o.right=a-t+"px",this.set({right:a-t})),this.set({width:d})}else{let t=e.pageY-l.pageY+s;d.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{r._y(),l.classList.remove("pd-cV")})},_c1(e){c("p_"+this.id).style.zIndex=e},"_c5<pointerdown>"(){x._c2(this)},_x(){x._c2(this)},_y(){},_cZ(){this.digest({shrink:!this.get("shrink")})},"_cZ<click>"(){this.digest({shrink:!this.get("shrink")})},"_bu<click>"(){let e=this._c3;e&&p.toTry(e)}}).merge(n)}),define("panels/elements/branch",["magix","../../designer/stage-selection","../../designer/stage-elements","../../designer/history"],(e,t,i)=>{let s,a,l={class:"pd-cG"},d={class:"pd-_ pd-y"};const o=e("magix"),p=e("../../designer/stage-selection"),r=e("../../designer/stage-elements"),n=e("../../designer/history");let c=o.guid("rp_"),h={_cz(){o.node(c)||document.body.insertAdjacentHTML("beforeend",`<div class="pd-cM" id="${c}"></div>`)},_x(e){let t=o.node(c).style,i=e.getBoundingClientRect();t.left=i.left+"px",t.top=i.top+"px",t.width=i.width+"px",t.height=i.height+"px"},_y(){o.node(c).style.left="-10000px"},_cQ(){this._cP=setTimeout(()=>{h._y()},100)},_cR(){clearTimeout(this._cP)}};i.exports=o.View.extend({tmpl:(e,t,i,o,p,r)=>{let n,c,h,g,_=[],{elements:x,selectedId:u,i18n:m,locked:f}=e;for(let e=x.length,b=0;b<e;b+=1){let e=x[b];if(g=[],h=[],"layout"==e.role?(c=[s||(s=t(0,"\ue63b"))],n="pd-_ pd-cJ",e.closed&&(n+=" pd-cK"),h.push(t("i",{role:"icon",class:n},c))):a?h.push(a):h.push(a=t("i",{_:"_",class:"pd-cI"})),c=[t(0,e.ctrl.icon,1)],h.push(t("i",d,c)),c=[t(0,m(e.ctrl.title))],h.push(t("span",0,c)),n="pd-cH",e.id==u&&(e.props.locked?n+=" pd-cO":n+=" pd-cN"),g.push(t("div",{"mx5-click":i+"\x1e_cS({element:'"+r(p,e,"_."+b+".a")+"'})","mx5-pointerover":i+"\x1e_cV({element:'"+r(p,e,"_."+b+".a")+"'})","mx5-pointerout":i+"\x1e_cW()",class:n},h)),"layout"==e.role)for(let s=e.props.columns,a=s.length,l=0;l<a;l+=1){let a=s[l];n="pd-cL",e.closed&&(n+=" pd-3"),g.push(t("div",{"mx5-owner":i,$:"elements,locked","mx5-view":"panels/elements/branch?elements="+r(p,a.elements,"_."+b+".b."+l+".c")+"&locked="+r(p,[f,e.props.locked,f||e.props.locked],"d."+b+".e")+"&selectedId="+o(u),class:n}))}_.push(t("div",l,g))}return t(i,0,_)},init(){h._cz()},assign(e){this.set(e)},render(){this.digest()},"_cS<click>"(e){let{element:t}=e.params,i=this.get("selectedId"),s=this.get("elements"),a=e.target.getAttribute("role");if("layout"==t.ctrl.role&&"icon"==a)return t.closed=!t.closed,void this.digest({elements:s});t.id!=i&&(p._9(t),n._s(),r._aB(t.id))},"_cT<click>"(e){let t=this.get("elements"),{element:i}=e.params;i.closed=!i.closed,this.digest({elements:t})},"_cU<click>"(e){let{element:t}=e.params;p._9(t),r._aB(t.id)},"_cV<pointerover>"(e){if(!o.inside(e.relatedTarget,e.eventTarget)){h._cR();let{element:t}=e.params,i=o.node(t.id);i&&h._x(i)}},"_cW<pointerout>"(e){o.inside(e.relatedTarget,e.eventTarget)||h._cQ()}})}),define("panels/elements/index",["magix","./branch"],(e,t,i)=>{e("./branch");let s={class:"pd-5 pd-cF"};const a=e("magix");a.applyStyle("pd-w",".pd-cF{padding:4px}.pd-cG{padding-left:4px}.pd-cH{align-items:center;border-radius:2px;cursor:pointer;display:inline-flex;height:22px;padding-right:12px;transition:opacity .25s}.pd-cH:hover{background:#eee;opacity:.6}.pd-cI{display:inline-block;height:16px;width:16px}.pd-cJ{transform:rotate(90deg);transition:transform .25s}.pd-cK{transform:rotate(0deg)}.pd-cL{margin-left:12px}.pd-cM{background:#fa742b;opacity:.4;position:absolute}.pd-cN,.pd-cN:hover{background-color:#fa742b;color:#fff;opacity:.9}.pd-cO,.pd-cO:hover{background-color:#ccc;color:#fff;opacity:.9}"),i.exports=a.View.extend({tmpl:(e,t,i,a,l,d)=>{let o,p,{elements:r,selectedId:n}=e;return p=[t("div",{"mx5-owner":i,$:"elements","mx5-view":"panels/elements/branch?elements="+d(l,r,"_")+"&selectedId="+a(n)})],o=[t("div",s,p)],t(i,0,o)},init(){let e=this._cD(this.render.bind(this),100);a.State.on("b",e),a.State.on("_",e),a.State.on("m",e),a.State.on("o",e)},render(){let e=a.State.get("_U"),t=a.State.get("_V"),i="";t&&t.length&&(i=t[0].id),this.digest({selectedId:i,elements:e})}})}),define("panels/props/element",["magix","../../designer/props","../../designer/history","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-layout/column","gallery/mx-layout/guage","gallery/mx-color/series","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s,a;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-layout/column"),e("gallery/mx-layout/guage"),e("gallery/mx-color/series"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let l={class:"pd-cZ pd-t"},d={class:"pd-c0"},o={class:"pd-c1"},p={class:"pd-c5 pd-r"},r={checked:"checked"},n={value:"value"};const c=e("magix"),h=e("../../designer/props"),g=e("../../designer/history");i.exports=c.View.extend({tmpl:(e,t,i,c,h,g,_)=>{let x,u,m,f,b,y,w,{elements:v,i18n:k,props:S}=e,z=v[0];w=[],m=[t(0,k("aL"))],f=[t("span",o,m)],m=[t(0,k(z.ctrl.title))],f.push(t("span",0,m)),w.push(t("li",d,f));for(let e=z.ctrl.props,l=e.length,d=0;d<l;d+=1){let l=e[d];if(l.type==S._ag)s?w.push(s):w.push(s=t("li",{_:"_",class:"pd-9"}));else{let e=z.props[l.key];l._aX&&!l._aX(z.props)||(f=[],m=[t(0,k(l.tip))],f.push(t("span",o,m)),l.type==S._ae?(y="gallery/mx-number/index?value="+g(h,e,"_.0.a."+l.key+".b"),null!=(x=l.max)&&(y+="&max="+c(x)),null!=(x=l.step)&&(y+="&step="+c(x)),null!=(x=l.fixed)&&(y+="&fixed="+c(x)),null!=(x=l.min)&&(y+="&min="+c(x)),f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-1 pd-a pd-c2",disabled:null!=(x=z.props.locked)&&x,"mx5-input":i+"\x1e_c6({key:'"+_(l.key)+"',use:'value',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":y}))):l.type==S._af?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-input":i+"\x1e_c6({key:'"+_(l.key)+"',use:'color',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-color/index?clear="+c(l.clear)+"&color="+g(h,e,"_.0.a."+l.key+".b")+"&align=right&disabled="+c(z.props.locked)+"&alpha="+c(l.alpha)})):l.type==S._ah?(m=[t("input",{class:"pd-c6",type:"checkbox",checked:null!=(x=z.props[l.key])&&x,"mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',native:'checked',element:'"+g(h,z,"_.0.c")+"'})"},1,r)],a?m.push(a):m.push(a=t("i",{_:"a",class:"pd-c7"})),f.push(t("label",p,m))):l.type==S._ai?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-layout/column?columns="+g(h,e,"_.0.a."+l.key+".b")+"&disabled="+g(h,z.props.locked,"_.0.d")})):l.type==S._aj?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',use:'value',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-layout/guage?guage="+g(h,e,"_.0.a."+l.key+".b")+"&disabled="+g(h,z.props.locked,"_.0.d")})):l.type==S._aq?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-color/series?colors="+g(h,e,"_.0.a."+l.key+".b")+"&disabled="+g(h,z.props.locked,"_.0.d")})):l.type==S._am?f.push(t("textarea",{class:"pd-b pd-c2 pd-c3 pd-e",disabled:z.props.locked,"mx5-input":i+"\x1e_c6({key:'"+_(l.key)+"',native:'value',element:'"+g(h,z,"_.0.c")+"'})",value:e},0,n)):l.type==S._ap?f.push(t("input",{class:"pd-a pd-c2",disabled:z.props.locked,"mx5-input":i+"\x1e_c6({key:'"+_(l.key)+"',native:'value',element:'"+g(h,z,"_.0.c")+"'})",value:e},1,n)):l.type==S._ak?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-input":i+"\x1e_c6({element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-font/style?disabled="+g(h,z.props.locked,"_.0.d")+"&value="+g(h,z.props,"_.0.e")})):l.type==S._al?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-input":i+"\x1e_c6({element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-font/align?disabled="+g(h,z.props.locked,"_.0.d")+"&value="+g(h,z.props,"_.0.e")})):l.type==S._an?f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',use:'src',element:'"+g(h,z,"_.0.c")+"',write:'"+g(h,l.write,"_.0.f."+d+".g")+"'})","mx5-view":"gallery/mx-picture/index?src="+c(e)+"&disabled="+g(h,z.props.locked,"_.0.d")})):l.type==S._c7?(m=[t(0,k("aM"))],f.push(t("button",{class:"pd-g pd-h",disabled:z.props.locked,"mx5-click":i+"\x1e_c8({key:'"+_(l.key)+"',element:'"+g(h,z,"_.0.c")+"'})"},m))):l.type==S._ao&&f.push(t("div",{"mx5-owner":i,$:"elements",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+_(l.key)+"',use:'value',element:'"+g(h,z,"_.0.c")+"'})","mx5-view":"gallery/mx-dropdown/index?selected="+c(e)+"&list="+g(h,l.items,"_.0.f."+d+".h")+"&textKey=text&valueKey=value"})),b="pd-c0",l._aR&&(b+=" pd-c4"),w.push(t("li",{class:b},f)))}}return u=[t("ul",l,w)],t(i,0,u)},init(){let e=this._cD(this.render.bind(this),30);c.State.on("m",e),c.State.on("o",e),c.State.on("_",e)},render(){let e=c.State.get("_V");e.length>0&&this.digest({props:h,elements:e})},"_c6<input,change>"(e){let{key:t,use:i,element:s,native:a,write:l}=e.params;if(i||a){let{props:d}=s,o=e.eventTarget,p=a?o[a]:e[i];l&&(p=l(p,d,e)),d[t]=p}c.State.fire("o");let d=c.node(s.id),o=c.Vframe.byNode(d);o&&o.invoke("_P",[s]),g._s("_"+t,500)}})}),define("panels/props/index",["magix","./element","./page"],(e,t,i)=>{e("./element"),e("./page");const s=e("magix");s.applyStyle("pd-y",'.pd-cZ{min-width:200px;padding:4px}.pd-c0{align-items:center;display:flex;line-height:28px}.pd-c1{text-align:right;width:80px}.pd-c2{width:140px}.pd-c3{height:90px}.pd-c4{align-items:flex-start}.pd-c5{align-items:center;cursor:pointer;display:flex}.pd-c6{position:absolute;visibility:hidden}.pd-c7{background:#ccc;border-radius:22px;display:inline-block;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:32px}.pd-c7:before{background:#fff;border-radius:50%;content:"";height:12px;left:0;margin:2px;position:absolute;transition:all .25s;width:12px}.pd-c6:checked+.pd-c7{background:#fa742b}.pd-c6:checked+.pd-c7:before{left:100%;margin-left:-14px}.pd-c6:disabled+.pd-c7{background:#e6e6e6;cursor:not-allowed}'),i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,{elements:a}=e,l=1==a.length;return s=[t("div",{"mx5-owner":i,class:!l&&"pd-3","mx5-view":"panels/props/element"}),t("div",{"mx5-owner":i,class:l&&"pd-3","mx5-view":"panels/props/page"})],t(i,0,s)},init(){let e=this._cD(this.render.bind(this),30);s.State.on("m",e),s.State.on("_",e)},render(){this.digest({elements:s.State.get("_V")})}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let a={class:"pd-cZ pd-t"},l={class:"pd-c0"},d={class:"pd-c1"};const o=e("magix"),p=e("../../designer/history"),r=e("../../designer/props");i.exports=o.View.extend({tmpl:(e,t,i,o,p,r,n)=>{let c,h,g,_,x,u,m,{i18n:f,ctrl:b,props:y,page:w}=e;m=[],g=[t(0,f("aL"))],_=[t("span",d,g)],g=[t(0,f(b.title))],_.push(t("span",0,g)),m.push(t("li",l,_));for(let e=b.props,a=e.length,l=0;l<a;l+=1){let a=e[l];a.type==y._ag?s?m.push(s):m.push(s=t("li",{_:"_",class:"pd-9"})):a._aX&&!a._aX(w)||(_=[],g=[t(0,f(a.tip))],_.push(t("span",d,g)),a.type==y._ae?(u="gallery/mx-number/index?value="+r(p,w[a.key],"_."+l+".a"),null!=(c=a.max)&&(u+="&max="+o(c)),null!=(c=a.step)&&(u+="&step="+o(c)),null!=(c=a.fixed)&&(u+="&fixed="+o(c)),null!=(c=a.min)&&(u+="&min="+o(c)),_.push(t("div",{"mx5-owner":i,$:"page,ctrl",class:"pd-1 pd-a pd-c2","mx5-input":i+"\x1e_c6({key:'"+n(a.key)+"',use:'value'})","mx5-view":u}))):a.type==y._af?(u="gallery/mx-color/index?color="+r(p,w[a.key],"_."+l+".a")+"&align=right",null!=(c=a.alpha)&&(u+="&alpha="+o(c)),_.push(t("div",{"mx5-owner":i,$:"page,ctrl",clear:a.clear,class:"pd-c2","mx5-input":i+"\x1e_c6({key:'"+n(a.key)+"',use:'color'})","mx5-view":u}))):a.type==y._an?_.push(t("div",{"mx5-owner":i,$:"ctrl",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+n(a.key)+"',use:'src',write:'"+r(p,a.write,"b."+l+".c")+"'})","mx5-view":"gallery/mx-picture/index?src="+o(w[a.key])})):a.type==y._ao&&_.push(t("div",{"mx5-owner":i,$:"ctrl",class:"pd-c2","mx5-change":i+"\x1e_c6({key:'"+n(a.key)+"',use:'value'})","mx5-view":"gallery/mx-dropdown/index?selected="+o(w[a.key])+"&list="+r(p,a.items,"b."+l+".d")+"&textKey=text&valueKey=value"})),x="pd-c0",a._aR&&(x+=" pd-c4"),m.push(t("li",{class:x},_)))}return h=[t("ul",a,m)],t(i,0,h)},init(){let e=this.render.bind(this);o.State.on("_",e),o.State.on("a",e)},render(){this.digest({props:r,ctrl:o.State.get("_a_"),page:o.State.get("_T")})},"_c6<input,change>"(e){let{key:t,use:i,write:s}=e.params,a=o.State.get("_T");a[t]=e[i],s&&s(a,e),o.State.fire("a"),p._s("a",500)}})}),define("elements/index",["magix","./layout/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-pie/designer","./chart-meter/designer","./chart-bar/designer"],(e,t,i)=>{const s=e("magix"),a=e("./layout/designer"),l=e("./text/designer"),d=e("./image/designer"),o=e("./repeat/designer"),p=e("./page/designer");let r=[a,{spliter:1},l,d,o,{spliter:1},e("./chart-line/designer"),e("./chart-pie/designer"),e("./chart-meter/designer"),e("./chart-bar/designer")],n=[];for(let e of r)if(e.spliter||e.subs){if(e.subs)for(let t of e.subs)n.push(t)}else n.push(e);let c=s.toMap(n,"role");i.exports={_O:()=>r,_2:()=>p,_3(e){let t={},i=e=>{for(let a of e){let e=c[a.role];if(a.id||(a.id=s.guid("e_")),a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/normal",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-pointer/cursor"),d=e("../designer/history");let{State:o,has:p,applyStyle:r,View:n}=s;r("pd-h",".pd-ba{pointer-events:none}.pd-bb{display:flex}.pd-bc{background:#0000;bottom:0;left:0;position:absolute;right:0;top:0}.pd-bd,.pd-be{border:1px solid #fa742b}.pd-be{border-color:#999}.pd-bf{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pd-bg{border-style:dashed}.pd-bh{background-color:#fa742b;border-radius:2px;cursor:ns-resize;height:5px;left:calc(50% - 20px);margin-top:-3px;position:absolute;width:40px;z-index:1}"),i.exports=n.extend({tmpl:(e,t,i,s,a,l)=>{let d,o=[],{element:p,view:r,selected:n}=e,c=p.props,h=p.ctrl;return d="pd-bf",c.locked&&(d+=" pd-bg"),"layout"==h.role?d+=" pd-bb":d+=" pd-ba",o.push(t("div",{"mx5-owner":i,$:"element","mx5-view":r+"?element="+l(a,p,"_")+"&props="+l(a,c,"a"),id:"entity_"+i,class:d})),d="pd-bc","layout"==h.role&&(d+=" pd-ba"),n&&(c.locked?d+=" pd-be":d+=" pd-bd"),o.push(t("div",{class:d})),!c.locked&&n&&h._aQ&&h._aQ.height&&o.push(t("div",{class:"pd-bh","mx5-pointerdown":i+"\x1e_aW()"})),t(i,0,o)},_aV(){let e=o.get("_4"),t=o.get("_V").length,i=this.get().element.id;this.set({selected:p(e,i),count:t})},assign(e){return this.set(e),this._aV(),!0},render(){this.digest()},_P(e){this.digest({element:e})},"_aW<pointerdown>"(e){if(!e._aI){e._aI=1;let t=0,i=e.eventTarget,s=this.get("element"),{props:a}=s,p=a.height,r=o.get("_c");o.fire("n",{show:1}),this._w(e,d=>{t||(t=1,l._x(i));let n=(d.pageY-e.pageY)/r+p;n<0&&(n=0),a.height=n,this._P(s),o.fire("o")},()=>{t&&(l._y(),d._s()),o.fire("n")})}}}).merge(a)}),define("elements/chart-bar/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-bar/index"})}}).static({role:"chart-bar",title:"o",icon:"&#xe603;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ap,json:1},{tip:"t",key:"colors",type:s._aq,json:1,_aR:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/chart-bar/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a,{props:l,error:d}=e;return a="height:"+l.height+"px;opacity:"+l.alpha+";",l.background&&(a+="background:"+l.background+";"),s=[t("div",{class:"pd-ao","data-tip":d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6...",id:"chart_"+i,style:a})],t(i,0,s)},assign(e){this.set(e)},_aT(){if(!this._aS){let e=s.node("chart_"+this.id);this._aS=echarts.init(e),this.on("destroy",()=>{this._aS.dispose()}),this._aS.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"}]},!0),e.dataset.tip=""}this._aS.resize()},async render(){let e=s.mark(this,"_aU");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aT();let t={title:{text:e.title}};e.colors&&e.colors.length&&(t.color=e.colors),this._aS.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-line/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-line/index"})}}).static({role:"chart-line",title:"v",icon:"&#xe64b;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ap,json:1},{tip:"t",key:"colors",type:s._aq,json:1,_aR:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/chart-line/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a,{props:l,error:d}=e;return a="height:"+l.height+"px;opacity:"+l.alpha+";",l.background&&(a+="background:"+l.background+";"),s=[t("div",{class:"pd-ao","data-tip":d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6...",id:"chart_"+i,style:a})],t(i,0,s)},assign(e){this.set(e)},_aT(){if(!this._aS){let e=s.node("chart_"+this.id);this._aS=echarts.init(e),this.on("destroy",()=>{this._aS.dispose()}),this._aS.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),e.dataset.tip=""}this._aS.resize()},async render(){let e=s.mark(this,"_aU");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aT();let t={title:{text:e.title}};e.colors&&e.colors.length&&(t.color=e.colors),this._aS.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-meter/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-meter/index"})}}).static({role:"chart-meter",title:"w",icon:"&#xeb94;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ap,json:1},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/chart-meter/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a,{props:l,error:d}=e;return a="height:"+l.height+"px;opacity:"+l.alpha+";",l.background&&(a+="background:"+l.background+";"),s=[t("div",{class:"pd-ao","data-tip":d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6...",id:"chart_"+i,style:a})],t(i,0,s)},assign(e){this.set(e)},_aT(){if(!this._aS){let e=s.node("chart_"+this.id);this._aS=echarts.init(e),this.on("destroy",()=>{this._aS.dispose()}),this._aS.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.dataset.tip=""}this._aS.resize()},async render(){let e=s.mark(this,"_aU");await this.digest();try{if(await a(),e()){this._aT();let e={title:{text:this.get("props").title}};this._aS.setOption(e)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-pie/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-pie/index"})}}).static({role:"chart-pie",title:"x",icon:"&#xe6d4;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ap,json:1},{tip:"t",key:"colors",type:s._aq,json:1,_aR:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/chart-pie/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a,{props:l,error:d}=e;return a="height:"+l.height+"px;opacity:"+l.alpha+";",l.background&&(a+="background:"+l.background+";"),s=[t("div",{class:"pd-ao","data-tip":d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6...",id:"chart_"+i,style:a})],t(i,0,s)},assign(e){this.set(e)},_aT(){if(!this._aS){let e=s.node("chart_"+this.id);this._aS=echarts.init(e),this.on("destroy",()=>{this._aS.dispose()}),this._aS.setOption({series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie"}]},!0),e.dataset.tip=""}this._aS.resize()},async render(){let e=s.mark(this,"_aU");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aT();let t={title:{text:e.title,x:"center"}};e.colors&&e.colors.length&&(t.color=e.colors),this._aS.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/image/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/image/index"})}}).static({role:"image",title:"y",icon:"&#xe650;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:100,src:"",hpos:"flex-start",vpos:"flex-start",rotateX:!1,rotateY:!1,locked:!1}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{type:s._ag},{tip:"z",key:"src",type:s._an,json:1},{tip:"A",type:s._al,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"B",type:s._ah,key:"rotateX",json:1},{tip:"C",type:s._ah,key:"rotateY",json:1},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/image/index",["magix"],(e,t,i)=>{let s;const a=e("magix");i.exports=a.View.extend({tmpl:(e,t,i)=>{let a,l,d,o,{props:p}=e;return o=[],p.src?(l="",(p.rotateX||p.rotateY)&&(l+="transform:",p.rotateX&&(l+="rotateX(180deg)"),p.rotateY&&(l+=" rotateY(180deg)")),o.push(t("img",{src:p.src,class:"pd-D pd-E pd-u",style:l},1))):s?o.push(s):(d=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],o.push(s=t("div",{_:"_",class:"pd-B pd-C pd-a_ pd-af pd-ag pd-ap"},d))),l="display:flex;align-items:"+p.vpos+";justify-content:"+p.hpos+";height:"+p.height+"px;opacity:"+p.alpha+";",p.background&&(l+="background:"+p.background+";"),a=[t("div",{style:l},o)],t(i,0,a)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/layout/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),a=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/layout/index"})}}).static({role:"layout",title:"D",icon:"&#xe764;",_8:()=>({columns:[{width:100,elements:[]}],margin:"5px 5px 5px 5px",padding:"5px 5px 5px 5px",locked:!1}),props:[{tip:"E",key:"columns",_aR:!0,type:a._ai,json:1,encode(e,t){let{columns:i}=t,s=[];for(let e of i)s.push({elements:e.elements,width:e.width});e.columns=s}},{tip:"F",key:"margin",_aR:!0,type:a._aj,json:1},{tip:"G",key:"padding",_aR:!0,type:a._aj,json:1},{type:a._ag},{tip:"u",key:"locked",type:a._ah,free:!0}]})}),define("elements/layout/index",["magix","../../designer/stage-elements","../../gallery/mx-dragdrop/index"],(e,t,i)=>{const s=e("magix"),a=e("../../designer/stage-elements"),l=e("../../gallery/mx-dragdrop/index");s.applyStyle("pd-g",".pd-a9{display:flex;min-height:40px;width:100%}.pd-b_{border:1px dashed #ccc;flex-shrink:1}"),i.exports=s.View.extend({tmpl:(e,t,i,s,a,l)=>{let d,o,p,{props:r,element:n}=e;p=[];for(let e=r.columns,s=e.length,d=0;d<s;d+=1){let s=e[d];o=[];for(let e=s.elements,p=e.length,r=0;r<p;r+=1){let s=e[r];o.push(t("div",{"mx5-owner":i,$:"props",class:"pd-1",id:s.id,eid:s.id,"mx5-view":"elements/"+s.role+"/designer?element="+l(a,s,"_."+d+".a."+r+".b"),"mx5-pointerdown":i+"\x1e_aJ({element:'"+l(a,s,"_."+d+".a."+r+".b")+"'})",role:s.role}))}p.push(t("div",{style:"flex-basis:"+s.width+"%",class:"pd-b_",role:"column",index:d,pid:n.id},o))}return d=[t("div",{style:"margin:"+r.margin+";padding:"+r.padding,class:"pd-a9"},p)],t(i,0,d)},assign(e){this.set(e)},render(){this.digest()},"_aJ<pointerdown>"(e){e._aI||(e._aI=1,a._aE(e,this))}}).merge(l)}),define("elements/page/designer",["../../designer/props","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../../i18n/index");i.exports={title:"H",_8:()=>({width:900,height:500,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0}),props:[{tip:"I",key:"width",type:s._ae,min:0,json:1},{tip:"J",key:"height",type:s._ae,min:0,json:1},{type:s._ag},{tip:"r",key:"background",type:s._af,json:1},{tip:"K",_aR:!0,key:"backgroundImage",type:s._an,write(e,t){e.backgroundWidth=t.width,e.backgroundHeight=t.height},json:1},{tip:"L",key:"backgroundRepeat",type:s._ao,items:[{text:a("M"),value:"full"},{text:a("N"),value:"no-repeat"},{text:a("O"),value:"repeat-x"},{text:a("P"),value:"repeat-y"},{text:a("Q"),value:"repeat"}],_aX:e=>e.backgroundImage,json:1}]}}),define("elements/provider/echarts",[],(e,t,i)=>{let s=[],a=1,l="can not load echarts library";i.exports=(()=>new Promise((e,t)=>{if(2&a)window.echarts?e():t(l);else if(4&a)s.push([e,t]);else{a|=4,s.push([e,t]);let i=document.createElement("script");i.src="//cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js",i.onload=i.onerror=(()=>{document.head.removeChild(i),a|=2;for(let[e,t]of s)window.echarts?e():t(l);s.length=0}),document.head.appendChild(i)}}))}),define("elements/repeat/designer",["../../designer/props","../normal","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal"),l=e("../../i18n/index");i.exports=a.extend({ctor(){this.set({view:"elements/repeat/index"})}}).static({role:"repeat",title:"R",icon:"&#xe78f;",_aQ:{height:1},_8:()=>({background:"",alpha:1,height:100,src:"",imageWidth:0,imageHeight:0,positionXOffset:0,positionYOffset:0,repeat:"repeat",locked:!1}),props:[{tip:"p",key:"height",type:s._ae,min:0,json:1},{tip:"q",key:"alpha",type:s._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._af,key:"background",alpha:!0,clear:!0,json:1},{type:s._ag},{tip:"z",key:"src",type:s._an,json:1,write:(e,t,i)=>(t.imageWidth=i.width,t.imageHeight=i.height,e)},{tip:"S",key:"imageWidth",type:s._ae,min:0,_aX:e=>e.src,json:1},{tip:"T",key:"imageHeight",type:s._ae,min:0,_aX:e=>e.src,json:1},{tip:"U",key:"positionXOffset",type:s._ae,_aX:e=>e.src,json:1},{tip:"V",key:"positionYOffset",type:s._ae,_aX:e=>e.src,json:1},{tip:"L",key:"repeat",type:s._ao,_aX:e=>e.src,items:[{text:l("Q"),value:"repeat"},{text:l("O"),value:"repeat-x"},{text:l("P"),value:"repeat-y"}],json:1},{type:s._ag},{tip:"u",key:"locked",type:s._ah,free:!0}]})}),define("elements/repeat/index",["magix"],(e,t,i)=>{let s;const a=e("magix");i.exports=a.View.extend({tmpl:(e,t,i)=>{let a,l,d,o,{props:p}=e;return o=[],p.src||(s?o.push(s):(d=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],o.push(s=t("div",{_:"_",class:"pd-C pd-a_ pd-af pd-ag pd-ap"},d)))),l="height:"+p.height+"px;opacity:"+p.alpha+";",p.background&&(l+="background:"+p.background+";"),p.src&&(l+="background-image:url("+p.src+");",p.imageWidth>0&&p.imageHeight>0&&(l+="background-size:"+p.imageWidth+"px "+p.imageHeight+"px;"),l+="background-repeat:"+p.repeat+";background-position:"+p.positionXOffset+"% "+p.positionYOffset+"%"),a=[t("div",{style:l},o)],t(i,0,a)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/text/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),a=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/text/index"})}}).static({role:"text",title:"W",icon:"&#xe6bc;",_aQ:{height:1},_8:()=>({background:"",height:50,alpha:1,text:"",ls:0,forecolor:"#000000",fontsize:14,locked:!1,styleBold:!1,styleUnderline:!1,styleItalic:!1,margin:"0px 0px 0px 0px",padding:"4px 4px 4px 4px",hpos:"flex-start",vpos:"flex-start"}),props:[{tip:"p",key:"height",type:a._ae,min:0,json:1},{tip:"X",key:"fontsize",type:a._ae,min:0,json:1},{tip:"q",key:"alpha",type:a._ae,step:.1,fixed:1,min:0,max:1,json:1},{tip:"Y",key:"ls",type:a._ae,min:0},{tip:"r",key:"background",clear:!0,alpha:!0,type:a._af,json:1},{tip:"Z",key:"forecolor",type:a._af,json:1},{tip:"a_",type:a._ak,json:1,encode(e,t){e.styleBold=t.styleBold,e.styleUnderline=t.styleUnderline,e.styleItalic=t.styleItalic,e.styleStrike=t.styleStrike}},{tip:"A",type:a._al,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"aa",key:"text",type:a._am,_aR:!0,json:1},{type:a._ag},{tip:"F",key:"margin",_aR:!0,type:a._aj,json:1},{tip:"G",key:"padding",_aR:!0,type:a._aj,json:1},{type:a._ag},{tip:"u",key:"locked",type:a._ah,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{const s=e("magix");i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a,l,d,{props:o}=e;return l="",o.text?l+=" "+o.text+" ":l+=" \u8bf7\u8f93\u5165\u6587\u5b57 ",d=[t(0,l)],a="display:flex;color:"+o.forecolor+";",o.background&&(a+="background:"+o.background+";"),a+="font-size:"+o.fontsize+"px;height:"+o.height+"px;letter-spacing:"+o.ls+"px;opacity:"+o.alpha+";margin:"+o.margin+";padding:"+o.padding+";",o.styleBold&&(a+="font-weight:bold;"),o.styleItalic&&(a+="font-style:italic;"),o.styleUnderline&&(a+="text-decoration:underline;"),s=[t("div",{style:a+=";align-items:"+o.vpos+";justify-content:"+o.hpos+";overflow:hidden"},d)],t(i,0,s)},assign(e){this.set(e)},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{let s,a,l,d={class:"pd-aE"},o={class:"pd-aC"};const p=e("magix"),r=e("../gallery/mx-dragdrop/index"),n=e("../gallery/mx-pointer/cursor"),c=e("./history");let{applyStyle:h,node:g,State:_,View:x,inside:u,guid:m}=p;h("pd-a",".pd-aq{background:#fff;border-bottom:1px solid #ccc;height:20px;overflow:hidden;position:relative;width:100%;z-index:200}.pd-ar{top:0;width:1px}.pd-ar,.pd-as{background:#fa742b;display:none;pointer-events:none;position:absolute;z-index:200}.pd-as{height:1px;left:0}.pd-at{float:left;overflow:hidden;position:relative;z-index:200}.pd-au,.pd-at{background:#fff;border-right:1px solid #ccc;width:20px}.pd-au{border-bottom:1px solid #ccc;height:20px;left:0;position:absolute;top:0;z-index:201}.pd-av{left:5px;top:22px}.pd-av,.pd-aw{cursor:default;font-size:10px;position:absolute}.pd-aw{left:24px;top:2px}.pd-ax,.pd-ay{position:relative;z-index:100}.pd-ax{top:20px}.pd-ay{left:20px}.pd-az{border-left:1px solid #fa742b;width:4px}.pd-az,.pd-aA{pointer-events:none;position:absolute}.pd-aA{background:#fa742b;height:1px}.pd-aB{color:#666;cursor:pointer;font-size:10px;left:-15px;pointer-events:all;position:absolute;top:4px}.pd-aC{cursor:default;top:2px}.pd-aC,.pd-aD{color:#666;font-size:10px;left:4px;position:absolute}.pd-aD{cursor:pointer;pointer-events:all;top:-15px}.pd-aE{color:#666;cursor:default;font-size:10px;left:4px;position:absolute;top:2px}.pd-aF{cursor:ns-resize;height:3px;left:30px;top:-1px;width:25px}.pd-aG,.pd-aF{background:#fa742b;overflow:hidden;pointer-events:all;position:absolute}.pd-aG{cursor:ew-resize;height:25px;left:-2px;top:20px;width:3px}");let f={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};i.exports=x.extend({tmpl:(e,t,i,p,r,n,c)=>{let h,g,_,x,u,m,f,b,{sTop:y,yHelpers:w,yStart:v,scale:k,vWidth:S,i18n:z,sLeft:j,xHelpers:T,xStart:L,vHeight:I,width:C,step:Y,space:V,hbar:A,barColor:F,bar:X,xEnd:K,height:H,yEnd:M}=e;x=[];for(let e=w.length,a=0;a<e;a+=1){let e=w[a];b=Math.abs(v)+e.mm*k+20,g=[s||(s=t(0,"\ue6b3"))],_=[t("i",{class:"pd-_ pd-aD",title:z("_"),"mx5-click":i+"\x1e_v({type:'y',id:'"+c(e.id)+"'})"},g)],g=[t(0,e.mm)],_.push(t("span",d,g),t("span",{class:"pd-aF","mx5-pointerdown":i+"\x1e_z({type:'y',id:'"+c(e.id)+"',c:"+b+"})",title:z("a")})),x.push(t("div",{class:"pd-aA",style:"width:"+S+"px;top:"+b+"px"},_))}h=[t("div",{class:"pd-ay",style:"top:-"+y+"px",id:i+"_y_help","mx5-contextmenu":i+"\x1e_A()"},x)],x=[];for(let e=T.length,a=0;a<e;a+=1){let e=T[a];b=Math.abs(L)+e.mm*k,g=[s||(s=t(0,"\ue6b3"))],_=[t("i",{class:"pd-_ pd-aB",title:z("_"),"mx5-click":i+"\x1e_v({type:'x',id:'"+c(e.id)+"'})"},g)],g=[t(0,e.mm)],_.push(t("span",o,g),t("span",{class:"pd-aG","mx5-pointerdown":i+"\x1e_z({type:'x',id:'"+c(e.id)+"',c:"+b+"})",title:z("a")})),x.push(t("div",{class:"pd-az",style:"height:"+I+"px;left:"+b+"px"},_))}h.push(t("div",{class:"pd-ax",style:"left:-"+j+"px",id:i+"_x_help","mx5-contextmenu":i+"\x1e_A()"},x)),m=[];for(let e=0;e<L;e+=Y)e&&((f=e/k)%V==0?(m.push(t("rect",{width:1,height:A,x:L-e,y:20-A-1,style:"fill:"+F},1)),u=[t(0,-f)],m.push(t("text",{x:L-e+2,y:14,style:"font-size:10px;fill:#999"},u))):m.push(t("rect",{width:1,height:X,x:L-e,y:20-X-1,style:"fill:"+F},1)));for(let e=0;e<K;e+=Y)(f=e/k)%V==0?(m.push(t("rect",{width:1,height:A,x:L+e,y:20-A-1,style:"fill:"+F},1)),u=[t(0,f)],m.push(t("text",{x:L+e+2,y:14,style:"font-size:10px;fill:#999"},u))):m.push(t("rect",{width:1,height:X,x:L+e,y:20-X-1,style:"fill:"+F},1));g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+C+" 19",style:"cursor:default"},m)],_=[t("div",{style:"width:"+C+"px;height:100%"},g)],x=[t("div",{class:"pd-aq",id:i+"_x"},_)],g=[a||(a=t(0,"-"))],_=[t("span",{class:"pd-av",id:i+"_x_tip"},g)],x.push(t("div",{class:"pd-ar",id:i+"_x_line",style:"height:"+(I+20)+"px"},_)),h.push(t("div",{"mx5-pointermove":i+"\x1e_o()","mx5-pointerout":i+"\x1e_p()","mx5-click":i+"\x1e_t()"},x)),m=[];for(let e=0;e<v;e+=Y)e&&((f=e/k)%V==0?(m.push(t("rect",{width:A,height:1,x:20-A,y:v-e,style:"fill:"+F},1)),u=[t(0,-f)],m.push(t("text",{x:14,y:v-e+2,style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+(v-e)+")"},u))):m.push(t("rect",{width:X,height:1,x:20-X,y:v-e,style:"fill:"+F},1)));for(let e=0;e<M;e+=Y)(f=e/k)%V==0?(m.push(t("rect",{width:A,height:1,x:20-A,y:v+e,style:"fill:"+F},1)),u=[t(0,f)],m.push(t("text",{x:14,y:v+e,style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+(v+e-2)+")"},u))):m.push(t("rect",{width:X,height:1,x:20-X,y:v+e,style:"fill:"+F},1));return g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+H,style:"cursor:default"},m)],_=[t("div",{style:"height:"+H+"px"},g)],x=[t("div",{class:"pd-at",style:"height:"+I+"px",id:i+"_y"},_)],g=[a||(a=t(0,"-"))],_=[t("span",{class:"pd-aw",id:i+"_y_tip"},g)],x.push(t("div",{class:"pd-as",id:i+"_y_line",style:"width:"+(S+20)+"px"},_)),h.push(t("div",{"mx5-pointermove":i+"\x1e_q()","mx5-pointerout":i+"\x1e_r()","mx5-click":i+"\x1e_u()"},x)),l?h.push(l):h.push(l=t("div",{_:"_",class:"pd-au"})),t(i,0,h)},init(e){let t=g(e.scroll);t.addEventListener("scroll",()=>{this.__()},{passive:!0}),this._a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);_.on("_",i),_.on("a",i),_.on("b",i),_.on("c",i)},async _l(){if(this._b){let e=this._a,t=_.get("_c"),i=Math.max(e.scrollWidth,window.innerWidth)+500,s=Math.max(e.scrollHeight,window.innerHeight)+300,a=0,l=0,d=20,o=0,p=0,r=10,n=10,c=g("stage_canvas"),h=g("stage_outer"),x=c.getBoundingClientRect(),u=h.getBoundingClientRect();l=i-(a=Math.round(x.left-u.left)+d),p=s-(o=Math.round(x.top-u.top)),r=e.offsetHeight,n=e.offsetWidth;let m=f[t];await this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:i,scale:t,space:m.space,step:m.step,height:s,xStart:a,xEnd:l,yStart:o,vHeight:r,vWidth:n,yEnd:p}),this._d=g(this.id+"_x"),this._e=g(this.id+"_y"),this._f=g(this.id+"_x_line"),this._g=g(this.id+"_y_line"),this._h=g(this.id+"_x_tip"),this._i=g(this.id+"_y_tip"),this._j=g(this.id+"_x_help"),this._k=g(this.id+"_y_help")}},__(){let e=this._d,t=this._e,i=this._k,s=this._j,a=this._a,l=a.scrollTop,d=a.scrollLeft;e&&(e.scrollLeft=d),t&&(t.scrollTop=l),s&&(s.style.left=-d+"px"),i&&(i.style.top=-l+"px"),this.set({sLeft:d,sTop:l})},render(){this.set({xHelpers:_.get("_m"),yHelpers:_.get("_n")});let e=()=>{g("stage_canvas")?(this._b=1,this._l()):setTimeout(e,30)};setTimeout(e,30)},"_o<pointermove>"(e){let t=this._d,i=e.pageX,s=this.get("xStart"),a=this._f.style;a.display="block",a.left=i+"px";let l=i-s+t.scrollLeft,d=this.get("scale");this._h.innerHTML=(l/d).toFixed(0)},"_p<pointerout>"(e){u(e.relatedTarget,e.eventTarget)||(this._f.style.display="none")},"_q<pointermove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,s=this.get("yStart"),a=this._e,l=this._g.style;l.display="block",l.top=i+"px";let d=i-s-20+a.scrollTop,o=this.get("scale");this._i.innerHTML=(d/o).toFixed(0)},"_r<pointerout>"(e){u(e.relatedTarget,e.eventTarget)||(this._g.style.display="none")},"_t<click>"(e){let t=(e.pageX-this.get("xStart")+this._d.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:m("x_")}),this.digest({xHelpers:i}),this._f.style.display="none",c._s()},"_u<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this._e.scrollTop)/this.get("scale")|0,s=this.get("yHelpers");s.push({mm:i,id:m("x_")}),this.digest({yHelpers:s}),this._g.style.display="none",c._s()},"_v<click>"(e){let{type:t,id:i}=e.params,s=t+"Helpers",a=this.get(s);for(let e=a.length;e--;){if(a[e].id==i){a.splice(e,1);break}}this.digest({[s]:a}),c._s()},"_z<pointerdown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:s,c:a}=e.params,l=i+"Helpers",d=this.get(l);for(let e of d)if(e.id==s){t=e;break}if(t){let s=this.get(i+"Start"),o=0;this._w(e,p=>{let r;o||(o=1,n._x(e.eventTarget)),r="x"==i?p.pageX-e.pageX+a:p.pageY-e.pageY+a-20,t.mm=(r-s)/this.get("scale")|0,this.digest({[l]:d})},()=>{o&&(n._y(),c._s())})}},"_A<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){this._l()}}).merge(r)}),define("designer/const",[],(e,t,i)=>{i.exports={_B:50,_c:1,_C:5,_D:30,_E:30,_F:20,_G:10,_H:4,_I:10}}),define("designer/content",["magix","./tojson"],(e,t,i)=>{let s,a,l={class:"pd-F pd-a_ pd-af pd-am pd-an pd-c pd-i pd-j"},d={class:"pd-s"},o={class:"pd-l"},p={class:"pd-F pd-H pd-I pd-a_ pd-af pd-ak pd-c pd-n pd-o"},r={value:"value"};const n=e("magix"),c=e("./tojson");n.applyStyle("pd-b",".pd-aH{height:500px;width:100%}"),i.exports=n.View.extend({tmpl:(e,t,i)=>{let n,c,h,{i18n:g,body:_}=e;return n=s?[s]:[s=t("div",{_:"_",class:"pd-al pd-c pd-k"})],c=[t(0,g("b"))],h=[t("h5",d,c)],n.push(t("div",l,h)),h=[t("textarea",{class:"pd-B pd-aH pd-b",spellcheck:"false",id:"_rd_ta_"+i,value:_},0,r)],n.push(t("div",o,h)),c=[t(0,g("c"))],h=[t("button",{"mx5-click":i+"\x1e_M()",class:"pd-J pd-Y pd-g pd-h",type:"button"},c)],c=[t(0,g("d"))],h.push(t("button",{"mx5-click":i+"\x1e_K()",class:"pd-A pd-J pd-Y pd-g",type:"button"},c)),n.push(t("div",p,h)),a?n.push(a):n.push(a=t("div",{_:"a",class:"pd-aj pd-c pd-m"})),t(i,0,n)},init(e){this._J=e.dialog},render(){this.digest({body:c()})},"_K<click>"(){this._J.close()},"_M<click>"(){let e,t=n.node("ta_"+this.id).value.trim();try{e=JSON.parse(t)}catch(e){return void this.owner.parent(2).invoke("alert",["\u89e3\u6790JSON\u5931\u8d25\uff1a"+e.message])}n.State.fire("d",{_L:e}),this._J.close()}})}),define("designer/header",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/follower","../gallery/mx-toast/index"],(e,t,i)=>{let s,a,l,d,o,p,r,n={class:"pd-Z pd-a_ pd-af"},c={class:"pd-5 pd-Z pd-aI pd-a_ pd-af"},h={class:"pd-1 pd-aK pd-aM"},g={class:"pd-_ pd-aO"},_={class:"pd-aN"},x={class:"pd-aP"},u={class:"pd-0 pd-5 pd-aJ pd-a_ pd-af"};const m=e("magix"),f=e("../gallery/mx-dragdrop/index"),b=e("../gallery/mx-pointer/follower"),y=e("../gallery/mx-toast/index");m.applyStyle("pd-c",".pd-aI{margin-left:100px}.pd-aJ{margin-right:10px}.pd-aK,.pd-aL{align-items:center;cursor:pointer;display:grid;grid-template-rows:20px 20px;height:40px;justify-items:center;margin:0 2px;width:60px}.pd-aM{grid-template-columns:50px 10px}.pd-aL{border-radius:2px;float:left}.pd-aL:hover{background:#bb4504}.pd-aN{cursor:default;display:none;left:0;padding:4px;position:absolute;top:100%;width:264px}.pd-aN,.pd-aK:hover{background:#ec5706}.pd-aK:hover .pd-aN{display:block}.pd-aO{align-self:flex-end;grid-column:1/2;grid-row:1/2}.pd-aP{font-size:12px;font-weight:400;grid-column:1/2;grid-row:2/3;line-height:12px}.pd-aQ{font-size:10px;grid-column:2/3;grid-row:1/3;margin-left:-10px}.pd-aR{background:linear-gradient(hsla(0,0%,100%,.25),#fff 30%,#fff 70%,hsla(0,0%,100%,.25));float:left;height:30px;margin:2px 12px;width:1px}"),i.exports=m.View.extend({tmpl:(e,t,i,m,f,b)=>{let y,w,v,k,S,z,{i18n:j,elements:T}=e;s?v=[s]:(w=[t(0,"\ue627")],v=[s=t("i",{_:"_",class:"pd-_ pd-aJ"},w)]),v.push(t(0,j("e"))),y=[t("div",n,v)],v=[];for(let e=T.length,s=0;s<e;s+=1){let e=T[s];if(e.spliter)a?v.push(a):v.push(a=t("div",{_:"a",class:"pd-aR"}));else if(e.subs){k=[t(0,e.icon,1)],w=[t("i",g,k)],k=[t(0,j(e.title))],w.push(t("b",{class:"pd-aP",title:j(e.title)},k)),l?w.push(l):(k=[t(0,"\ue73a")],w.push(l=t("i",{_:"b",class:"pd-_ pd-aQ"},k))),k=[];for(let a=e.subs,l=a.length,d=0;d<l;d+=1){let e=a[d];S=[t(0,e.icon,1)],z=[t("i",g,S)],S=[t(0,j(e.title))],z.push(t("b",x,S)),k.push(t("div",{class:"pd-aL","mx5-pointerdown":i+"\x1e_R({ctrl:'"+b(f,e,"_."+s+".a."+d+".b")+"'})",title:j(e.title)},z))}w.push(t("div",_,k)),v.push(t("div",h,w))}else k=[t(0,e.icon,1)],w=[t("i",g,k)],k=[t(0,j(e.title))],w.push(t("b",x,k)),v.push(t("div",{class:"pd-1 pd-aK","mx5-pointerdown":i+"\x1e_R({ctrl:'"+b(f,e,"_."+s+".c")+"'})",title:j(e.title)},w))}return y.push(t("div",c,v)),d?w=[d]:(k=[t(0,"\ue60e")],w=[d=t("i",{_:"c",class:"pd-_"},k)]),o?w.push(o):(k=[t(0,"\u9884\u89c8")],w.push(o=t("b",{_:"d",class:"pd-aP"},k))),v=[t("div",{class:"pd-aK","mx5-click":i+"\x1e_S()"},w)],p?w=[p]:(k=[t(0,"\ue64e")],w=[p=t("i",{_:"e",class:"pd-_"},k)]),r?w.push(r):(k=[t(0,"\u4fdd\u5b58")],w.push(r=t("b",{_:"f",class:"pd-aP"},k))),v.push(t("div",{class:"pd-aK","mx5-click":i+"\x1e_s()"},w)),y.push(t("div",u,v)),t(i,0,y)},render(){let e=m.State.get("_N");this.digest({elements:e._O()})},"_R<pointerdown>"(e){let{ctrl:t}=e.params,i=0;b._P(t.icon),m.State.set({_Q:t}),this._w(e,e=>{i&&(b._x(e),m.State.fire("e",{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY})),i=1},e=>{b._y(),i?e&&m.State.fire("f"):m.State.fire("g"),m.State.set({_Q:null})})},"_s<click>"(){m.State.fire("h")},"_S<click>"(){y.show("\u672a\u6388\u6743\u7248\u672c\u4e0d\u652f\u6301\u8be5\u529f\u80fd~",3e3)}}).merge(f)}),define("designer/history",["magix","./const"],(e,t,i)=>{const s=e("magix"),a=e("./const");let l,d=[],o=[],p=null,r="",n=null,c=(e,t)=>e.startsWith("_")?void 0:t,h=()=>JSON.stringify({page:s.State.get("_T"),scale:s.State.get("_c"),layouts:s.State.get("_U"),select:s.State.get("_V"),xLines:s.State.get("_m"),yLines:s.State.get("_n")},c),g=e=>{let t=JSON.parse(e),i=s.State.get("_c"),a=t.scale||i;s.State.fire("_",{json:t,scale:i!==a})};i.exports={_W(){n||(n=h())},_X:()=>({canRedo:o.length,canUndo:d.length}),_Y(){d.length=0,o.length=0},_Z(){if(d.length>0){let e=d.pop();o.push(e);let t=d[d.length-1]||n;g(t)}},_0(){let e=o.pop();e&&(d.push(e),g(e))},_s(e="_1",t=0){let i=h();e!=r&&(p&&(clearTimeout(l),d.push(p),p=null),r=e),o.length=0;let c=e=>{d.push(e),d.length>a._B&&(n=d.shift()),p=null,s.State.fire("i")};t?(p=i,clearTimeout(l),l=setTimeout(()=>{c(p)},t)):c(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./stage-selection","./keys","../i18n/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{let s,a;e("./header"),e("./toolbar"),e("./axis"),e("./stage");let l={class:"pd-5 pd-aY"},d={class:"pd-Z"};const o=e("magix"),p=e("../elements/index"),r=e("../gallery/mx-dialog/index"),n=e("./const"),c=e("./history"),h=e("../panels/index"),g=e("./stage-selection"),_=e("./keys"),x=e("../i18n/index");o.State.set({_N:p});let u=p._2();o.applyStyle("pd-d",".pd-aS{background:#fa742b;color:#fff;font-size:16px;height:40px;line-height:40px;padding:0 10px;z-index:202}.pd-aS,.pd-aT{position:relative}.pd-aT{background:#fafafa;border-bottom:1px solid #eee;color:#333;height:26px;padding:0 26px;z-index:201}.pd-aU{background-color:#edeef3;height:calc(100% - 106px);margin-left:20px;overflow:scroll;transition:all .3s;width:calc(100% - 20px)}.pd-aV{scroll-behavior:smooth}.pd-aW{box-shadow:inset 1px 1px 6px 2px #dadada}.pd-aX{bottom:21px;box-shadow:inset 0 0 0 30px rgba(250,116,43,.1);left:20px;pointer-events:none;position:absolute;right:0;top:86px;z-index:1000}.pd-aY{background:#fafafa;border-top:1px solid #ccc;color:#999;font-size:12px;height:20px;line-height:20px;padding-left:25px;position:relative;z-index:200}");let m=/^(?:input|textarea)$/i,f={Digit1:0,Digit2:1,Digit3:2,Digit4:3};i.exports=o.View.extend({tmpl:(e,t,i)=>{let o,p,r,{i18n:n}=e;return o=[t("div",{"mx5-owner":i,"mx5-view":"designer/header",class:"pd-aS"}),t("div",{"mx5-owner":i,"mx5-view":"designer/toolbar",class:"pd-5 pd-aT"}),t("div",{"mx5-owner":i,"mx5-view":"designer/axis?scroll=stage",class:"pd-1 pd-5"}),t("div",{"mx5-owner":i,"mx5-view":"designer/stage",id:"stage",class:"pd-6 pd-aU pd-aW"})],p=[t(0,n("g"),1)],r=[t("div",d,p)],s?r.push(s):r.push(s=t("div",{_:"_",class:"pd-0 pd-z",id:"ss"})),o.push(t("div",l,r)),a?o.push(a):o.push(a=t("div",{_:"a",id:"sdsz",class:"pd-3 pd-aX"})),t(i,0,o)},init(){o.State.on("_",e=>{(e=>{let t=o.State.get("_T"),i=o.State.get("_U"),s=o.State.get("_V"),a=o.State.get("_m"),l=o.State.get("_n"),{elements:d,map:r}=p._3(e.layouts);i.length=0,i.push(...d),a.length=0,e.xLines&&a.push(...e.xLines),l.length=0,e.yLines&&l.push(...e.yLines);let n={};if(s.length=0,e.select)for(let t of e.select){let e=r[t.id];e&&(n[e.id]=1,s.push(e))}Object.assign(t,e.page),o.State.set({_c:e.scale||1,_4:n})})(e.json)}),o.State.on("d",e=>{let t=o.node("stage");t&&(t.scrollLeft=0,t.scrollTop=0);let{page:i,layouts:s}=e._L,{elements:a}=p._3(s),l=u._8();Object.assign(l,i),o.State.set({_T:l,_U:[...a]}),g._9(),o.State.fire("b"),o.State.fire("a"),c._s()}),o.State.on("j",e=>{let t=o.node("ss");t&&(t.innerHTML=e.busy?x("f"):"")}),o.State.on("h",()=>{this.mxDialog("designer/content",{width:1200})}),o.State.set({_a_:u,_T:u._8(),_c:n._c,_U:[],_V:[],_4:{},_m:[],_n:[]}),c._W()},async render(){await this.digest(),h._aa()},"$doc<keydown>"(e){if((()=>{let e=document.activeElement;return m.test(e.tagName)||e.isContentEditable})())return;let{shiftKey:t,metaKey:i,ctrlKey:s,code:a}=e;if(a!=_._||!t||s||i)s||i||!o.has(f,a)?(i||s)&&a==_.a&&(e.preventDefault(),o.State.fire("h",{shift:e.shiftKey})):((e,t)=>{let i=h._5()[e];i&&(t?h._6(i.id):h._7(i.id))})(f[a],t);else{h._ab()?h._ac():h._ad()}}}).merge(r)}),define("designer/keys",[],(e,t,i)=>{i.exports={b:"Backspace",c:"Delete",d:"Tab",_:"KeyZ",e:"KeyY",a:"KeyS",f:"Equal",g:"Minus",h:"Digit0"}}),define("designer/props",[],(e,t,i)=>{i.exports={_ae:1,_af:2,_ag:3,_ah:4,_ai:5,_aj:6,_ak:7,_al:8,_am:9,_an:10,_ao:11,_ap:12,_aq:13}}),define("designer/service",["magix"],(e,t,i)=>{const s=e("magix");let a=s.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set({data:i.data}),t()}).catch(e=>{t({msg:e.message})})});a.add([{name:"_ar",url:s.config("getImageUrl"),cache:18e5},{name:"_as",url:s.config("getFieldUrl"),cache:18e5},{name:"_at",cache:18e5}]),i.exports=a}),define("designer/stage-dragdrop",["magix","../gallery/mx-dragdrop/index","../gallery/mx-runner/index","./const","./history","./stage-elements"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-runner/index"),d=e("./const"),o=e("./history"),p=e("./stage-elements");i.exports={_aC(e,t){let i,r=null,n=null,c=null,h=null,g=null,_=this,x=0,u=0,m=null,f=null,b=0,y=()=>{n=null,h=null,r=null,g=null,b=0},w=()=>{let t=e.getBoundingClientRect(),i=e.scrollWidth>e.clientWidth+d._F,s=e.scrollHeight>e.clientHeight+d._F;m.pageY>t.top&&m.pageY<t.top+t.height&&m.pageX>t.left&&m.pageX<t.left+t.width&&(i||s)?t.top+t.height-d._E<m.pageY?e.scrollTop+e.clientHeight+d._F<e.scrollHeight?++x>d._I&&(c.display="none",e.scrollTop+=d._H):x=0:t.top+d._E>m.pageY?e.scrollTop<d._F?x=0:++x>d._I&&(e.scrollTop-=d._H,c.display="none"):t.left+d._D>m.pageX?e.scrollLeft<d._F?x=0:++x>d._I&&(e.scrollLeft-=d._H,c.display="none"):t.left+t.width-d._D<m.pageX&&e.scrollLeft+e.clientWidth+d._F<e.scrollWidth?++x>d._I&&(c.display="none",e.scrollLeft+=d._H):x=0:x=0};s.State.on("e",o=>{if(m=o,u||(u=1,i||(i=s.node("sdsz")),i.classList.remove("pd-3"),e.addEventListener("scroll",y),e.classList.remove("pd-aV"),f=p._au(),l._av(d._G,w)),x)return;let v=a._ay(o.clientX,o.clientY);if(o.copy!=b&&(b=o.copy,n=null),v!=n){n=v,c||(c=s.node(t+"_bar").style),h||(h=s.node("stage_outer").getBoundingClientRect());let e=_._az(f,v,o.moved,b);r=e||null}if(r){let e=_._aA(r,o);e?(g=e,c.left=e.rect.left-h.left+"px",c.top=e.rect.top-h.top+"px",c.width=e.rect.width+"px",c.display="block"):(g=null,c.display="none")}else c&&(g=null,c.display="none")}),s.State.on("f",()=>{x=0,u&&(u=0,i.classList.add("pd-3"),e.removeEventListener("scroll",y),l._aw(w)),g&&(c.display="none",r.moved?p._ax(g,r.moved,b):p._R(g,!0),s.State.fire("b"),o._s()),y(),f=null}),s.State.on("g",()=>{let e=s.State.get("_Q"),t=s.State.get("_U"),i=s.State.get("_V")[0],a=!0;i&&"layout"==i.role&&(t=i.props.columns[0].elements,a="layout"==e.role);let{id:l}=p._R({elements:t,ctrl:e,index:0},a);s.State.fire("b"),o._s(),p._aB(l)})},_aA(e,{pageY:t,copy:i}){let a=!1,{entity:l,subIndex:o,ctrl:p,moved:r,role:n}=e;if(r&&"stage"!=n){let e=t=>{if(t.id==l.id)a=!0;else if("layout"==t.role)for(let i of t.props.columns){for(let t of i.elements)if(e(t),a)break;if(a)break}};e(r)}if(!i&&a)return;let c=(e.layout||e.node).getBoundingClientRect(),h={left:c.left,top:c.top,width:c.width,height:c.height};if("stage"==e.role){let t=e.elements.length;return t&&(h.top+=h.height),{ctrl:e.ctrl,elements:e.elements,index:t,rect:h}}if("layout"==e.role){let s=e.index,a=s;h.top+h.height/2<t?(h.top+=h.height,s++,a++):a--;let l=e.ownerList[a];return!i&&l&&r&&l.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}if("column"==e.role){let a=e.index,n=a,g=h.top+d._C>=t,_=h.top+h.height-d._C<=t;if(_?(a++,n++,h.top+=h.height):n--,g||_){let t=e.ownerList[n];return!i&&t&&r&&t.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:a,rect:h}}g=(h={left:(c=e.node.getBoundingClientRect()).left,top:c.top,width:c.width,height:c.height}).top+d._C>=t;let x,u=l.props.columns[o].elements,m=u.length;if(m){if(g?(a=0,x=u[0]):(a=m,x=u[m-1]),!i&&r&&r.id==x.id)return;h={left:(c=s.node(x.id).getBoundingClientRect()).left,top:c.top+(g?0:c.height),width:c.width,height:c.height}}else a=0;return{elements:u,ctrl:p,index:a,rect:h}}{let s=e.index,a=s;h.top+h.height/2<t?(h.top+=h.height,s++,a++):a--;let l=e.ownerList[a];return!i&&l&&r&&l.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}},_az(e,t,i,a){let l=s.State.get("_Q"),d=s.node("stage_canvas");if((l||i)&&s.inside(t,d)){let o=s.State.get("_U");if(t==d){let e=o[o.length-1],t=d;if(!a&&i&&e.id==i.id)return;return e&&(t=s.node(e.id)),{moved:i,elements:o,ctrl:l,role:"stage",node:t}}{let o="";do{if(o=t.getAttribute("role"))break;t=t.parentNode}while(t!=d);if(o){let r=t.getAttribute("column"==o?"pid":"eid"),{entity:n,pInfo:c}=p._aD(e,r);if(i&&!a&&i.id==n.id)return;n.props.locked&&(o=(t=s.node(n.id)).getAttribute("role"));let h=-1,g=null;if("column"==o)for(h=0|t.getAttribute("index"),g=t;g!=d&&"layout"!=g.getAttribute("role");)g=g.parentNode;return{ctrl:l,role:o,moved:i,subIndex:h,layout:g,entity:n,index:c.index,ownerList:c.elements,node:t}}}}return null}}}),define("designer/stage-elements",["magix","../gallery/mx-pointer/follower","./history","./stage-selection"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-pointer/follower"),l=e("./history"),d=e("./stage-selection");let o=(e,t)=>{let i=s.node(e);if(t||(t=1),t>5)return;if(!i)return void setTimeout(o,20,e,t++);let a=s.node("stage_outer").parentNode,l=a.getBoundingClientRect(),d={x:l.left,y:l.top,width:l.width-20,height:l.height-20},p={x:(l=i.getBoundingClientRect()).left,y:l.top,width:l.width,height:l.height};if(!((e,t)=>{let i=e.width/2,s=e.height/2,a=t.width/2,l=t.height/2,d=e.x+i,o=e.y+s,p=t.x+a,r=t.y+l;return Math.abs(p-d)<=i+a&&Math.abs(r-o)<=s+l})(d,p)){let e=a.clientHeight/3;a.classList.add("pd-aV"),a.scrollTop=p.y+a.scrollTop-d.y-e}},p=(e,t)=>{if("id"!=e)return t};i.exports={_R(e,t){let i=e.ctrl,a=i._8(),l={id:s.guid("e_"),role:i.role,ctrl:i,props:a};return e.elements.splice(e.index,0,l),t&&d._9(l),l},_ax(e,t,i){let a=null,l=e=>{let s=0,d=!1;for(let o of e){if(o.id==t.id){i||e.splice(s,1,null),a=e,d=!0;break}if("layout"==o.role)for(let e of o.props.columns)if(l(e.elements),d)break;s++}},o=s.State.get("_U");if(l(o),i){let e=JSON.stringify(t,p),i=JSON.parse(e),a=s.State.get("_N"),{elements:l}=a._3([i]);t=l[0],d._9(t)}if(e.elements.splice(e.index,0,t),!i)for(let e=a.length;e--;)if(null===a[e]){a.splice(e,1);break}},_au(){let e=s.State.get("_U"),t={},i={},a=(e,s,l)=>{let d=0;for(let o of e){if(t[o.id]={pId:s,index:d,elements:e,role:l},i[o.id]=o,"layout"==o.role)for(let e of o.props.columns)a(e.elements,o.id,o.role);d++}};return a(e,0,"stage"),{idMap:t,elements:i}},_aD(e,t){let{idMap:i,elements:a}=e,l=t,d=t;do{a[l].props.locked&&(d=l),l=i[l].pId}while(s.has(i,l));let o=i[d];return{entity:a[d],pInfo:o}},_aE(e,t){let{element:i}=e.params,o=this._au(),{entity:p}=this._aD(o,i.id),r=s.State.get("_V");if(void 0!==e.button&&0!=e.button){let e=!1;for(let t of r)if(t.id===i.id){e=!0;break}return void(e||d._9(p)&&l._s())}let n=!1;for(let e of r)p.id==e.id&&(n=!0);if(n||(d._9(p)&&l._s(),r.length=0,r.push(p)),p.props.locked)return;let c,h=p.ctrl,g=1,_=()=>{s.State.fire("e",{pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,copy:g,moved:p})},x=e=>{c&&(a._x(c,g=e.shiftKey),_())},u=e=>{c&&(a._x(c,g=e.shiftKey),_())};s.State.on("k",x),s.State.on("l",u),a._P(h.icon),t._w(e,e=>{g=e.shiftKey,c=e,a._x(e,e.shiftKey),_()},e=>{if(a._y(),s.State.off("k",x),s.State.off("l",u),e){let t=s.node("stage_outer").parentNode,i=t.scrollTop;e.preventDefault(),s.State.fire("f"),i!=t.scrollTop&&(t.scrollTop=i)}})},_aF(){let e=s.State.get("_V"),t=s.State.get("_U"),i=!1;if(e.length){let a=s.toMap(e,"id"),l=e=>{for(let t,s=e.length;s--;)if(!(t=e[s]).props.locked)if(a[t.id])i=!0,e.splice(s,1);else if("layout"==t.role)for(let e of t.props.columns)l(e.elements)};l(t),i&&d._9()}return i},_aG(e){let t=s.State.get("_V"),i=s.State.get("_U");if(i.length){let s=t.length,a=t[0],p=null;if(0===s||s>1)p=i[e.shiftKey?i.length-1:0];else{let t=null,s=null,l=null,d=null,o=!1,r=a.id,n=e=>{for(let i of e)if(i.id==r?(o=!0,t=i):t&&!s?s=i:o?d=i:l=i,"layout"==i.role&&!i.props.locked)for(let e of i.props.columns)n(e.elements)};n(i),e.shiftKey?l?p=l:"layout"==(p=i[i.length-1]).role&&d&&(p=d):p=s||i[0]}a&&p.id==a.id||(d._9(p),l._s(),o(p.id))}},_aB:o}}),define("designer/stage-selection",["magix"],(e,t,i)=>{const s=e("magix");i.exports={_9(e){let t=s.State.get("_V"),i=t.length,a=!1;if(i||e){let l=i>1?null:t[0];t.length=0,e?(t.push(e),a=e!=l):i&&(a=!0),a&&(s.State.set({_4:s.toMap(t,"id")}),s.State.fire("m"))}return a}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-selection","./stage-dragdrop"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("./history"),d=e("./keys"),o=e("./stage-elements"),p=e("./stage-selection"),r=e("./stage-dragdrop");s.applyStyle("pd-e",".pd-aZ{display:flex;outline:0;position:relative}.pd-a0{padding:100px 240px}.pd-a1{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}@-webkit-keyframes pd-a{0%{background-position:10px 0}to{background-position:0 0}}@keyframes pd-a{0%{background-position:10px 0}to{background-position:0 0}}.pd-a2{animation:pd-a .4s linear infinite reverse;background:linear-gradient(45deg,#fa742b 25%,#fff 0,#fff 50%,#fa742b 0,#fa742b 75%,#fff 0,#fff);background-size:10px 10px;display:none;height:2px;margin-top:-1px;pointer-events:none;position:absolute;transition:all .25s,3}");let n=/^(?:input|textarea)$/i;i.exports=s.View.extend({tmpl:(e,t,i,s,a,l)=>{let d,o,p,r,n,{scale:c,page:h,layouts:g}=e;p=[];for(let e=g.length,s=0;s<e;s+=1){let e=g[s];p.push(t("div",{"mx5-owner":i,$:"layouts",class:"pd-1",id:e.id,"mx5-view":"elements/"+e.ctrl.role+"/designer?element="+l(a,e,"_."+s+".a"),"mx5-pointerdown":i+"\x1e2\x1e_aJ({element:'"+l(a,e,"_."+s+".a")+"'})",role:e.ctrl.role,eid:e.id}))}return o="min-width:"+h.width+"px;min-height:"+h.height+"px;background:"+h.background+";",h.backgroundImage&&(o+="background-image:url("+h.backgroundImage+");background-repeat:"+("full"==h.backgroundRepeat?"no-repeat":h.backgroundRepeat)+";background-size:","full"==h.backgroundRepeat?o+="100% 100%":o+=h.backgroundWidth+"px "+h.backgroundHeight+"px;"),r=[t("div",{class:"pd-a1",id:"stage_canvas",style:o},p)],n=[t("div",{class:"pd-a0",style:"transform-origin:0 0;transform:scale("+c+");padding:"+100/c+"px "+240/c+"px"},r),t("div",{class:"pd-a2",id:i+"_bar"})],d=[t("div",{class:"pd-aZ",id:"stage_outer","mx5-contextmenu":i+"\x1e_A()","mx5-pointerdown":i+"\x1e_aK()",tabindex:0,"mx5-keydown":i+"\x1e_aL()","mx5-keyup":i+"\x1e_aM()"},n)],t(i,0,d)},init(){let e,t=e=>{let t=s.State.get("_U");e?this.digest({layouts:t}):this.set({layouts:t})},i=0,a=this.render.bind(this);s.State.on("_",a),s.State.on("c",a),s.State.on("a",a),s.State.on("b",t),s.State.on("m",t),s.State.on("e",()=>{this._aH=1}),s.State.on("f",()=>{this._aH=0}),s.State.on("n",t=>{if(t.show){if(!i){i=1;let t=s.State.get("_T");e=t.height;let a=s.node("stage_canvas");a.style.minHeight=a.scrollHeight+"px"}}else i&&(i=0,s.node("stage_canvas").style.minHeight=e+"px")}),r._aC(this.root,this.id)},render(){let e=s.State.get("_T"),t=s.State.get("_U");this.digest({layouts:t,scale:s.State.get("_c"),page:e})},"_aJ<pointerdown>"(e){"layout"==e.from||e._aI||o._aE(e,this)},"_aK<pointerdown>"(e){let t=e.target;s.inside(s.node("stage_canvas"),t)&&(e.shiftKey||e.metaKey||e.ctrlKey||p._9()&&l._s())},"$doc<keydown>"(e){this._aH||(()=>{let e=document.activeElement;return n.test(e.tagName)||e.isContentEditable})()||(e.metaKey||e.ctrlKey?e.code==d._?(e.preventDefault(),e.shiftKey?l._0():l._Z()):e.code==d.e&&(e.preventDefault(),l._0()):e.code==d.d?(e.preventDefault(),o._aG(e)):e.code!=d.b&&e.code!=d.c||(e.preventDefault(),o._aF()&&(s.State.fire("b"),l._s())))},"_aL<keydown>"(e){s.State.fire("k",e)},"_aM<keyup>"(e){s.State.fire("l",e)},"_A<contextmenu>"(e){e.preventDefault()}}).merge(a)}),define("designer/tojson",["magix"],(e,t,i)=>{const s=e("magix");let a=(e,t)=>{if(!e.startsWith("@")&&!e.startsWith("_"))return t};i.exports=(()=>{let e=s.State.get("_U"),t=s.State.get("_T"),i=s.State.get("_N")._2(),l={unit:"px"};for(let e of i.props)e.json&&(l[e.key]=t[e.key]);let d=[],o=(e,t)=>{for(let{role:i,ctrl:s,props:a,id:l}of e){let e={id:`${l}`,role:i,props:{}};for(let t of s.props)t.json&&(t.encode?t.encode(e.props,a):t.read?e.props[t.key]=t.read(a[t.key]):e.props[t.key]=a[t.key]);if("layout"==i)for(let t of e.props.columns)if(t.elements){let e=[];o(t.elements,e),t.elements=e}t.push(e)}};o(e,d);let p={page:l,layouts:d};return JSON.stringify(p,a,2)})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{let s,a;const l=e("magix"),d=e("./stage-elements"),o=e("./history");i.exports=l.View.extend({tmpl:(e,t,i)=>{let l,d,o,{elements:p,i18n:r}=e,n=p.length;return l=s?[s]:[s=t("i",{_:"_",class:"pd-a6"})],o=[a||(a=t(0,"\ue6b3"))],d="pd-_ pd-a4",(n<1||p[0].props.locked)&&(d+=" pd-a7"),l.push(t("i",{title:r("h")+"(Delete)","mx5-click":i+"\x1e_aN()",class:d},o)),t(i,0,l)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("m",e),l.State.on("o",e)},render(){this.digest({elements:l.State.get("_V")})},"_aN<click>"(e){e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled")||d._aF()&&(l.State.fire("b"),o._s())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{let s;const a=e("magix"),l=e("./history");i.exports=a.View.extend({tmpl:(e,t,i)=>{let a,l,d,{status:o,i18n:p}=e;return d=[s||(s=t(0,"\ue682"))],l="pd-_ pd-a4",o.canUndo||(l+=" pd-a7"),a=[t("i",{title:p("i"),"mx5-click":i+"\x1e_aO({s:'-',b:"+o.canUndo+"})",class:l},d)],d=[s||(s=t(0,"\ue682"))],l="pd-_ pd-a4 pd-ah",o.canRedo||(l+=" pd-a7"),a.push(t("i",{title:p("j"),"mx5-click":i+"\x1e_aO({s:'+',b:"+o.canRedo+"})",class:l},d)),t(i,0,a)},init(){let e=this.render.bind(this);a.State.on("_",e),a.State.on("i",e)},render(){this.digest({status:l._X()})},"_aO<click>"(e){if(e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled"))return;let{s:t,b:i}=e.params;i&&("-"==t?l._Z():l._0())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{const s=e("magix"),a=e("../panels/index");i.exports=s.View.extend({tmpl:(e,t,i,s,a,l,d)=>{let o,p,r=[],{panels:n,i18n:c}=e;for(let e=n.length,s=0;s<e;s+=1){let e=n[s];p=[t(0,e.icon,1)],o="pd-_ pd-a4",e._&&(o+=" pd-a5"),r.push(t("i",{"mx5-click":i+"\x1e_7({id:'"+d(e.id)+"'})",title:c(e._?"k":"l",e.title,s+1),class:o},p))}return t(i,0,r)},init(){s.State.on("p",()=>{this.render()})},render(){this.digest({panels:a._5()})},"_7<click>"(e){let{id:t}=e.params;a._7(t)}})}),define("designer/toolbar-scale",["magix","./history","./keys"],(e,t,i)=>{let s,a,l={class:"pd-a8"};const d=e("magix"),o=e("./history"),p=e("./keys");i.exports=d.View.extend({tmpl:(e,t,i)=>{let d,o,p,{scale:r,i18n:n}=e;return p=[s||(s=t(0,"\ue602"))],o="pd-_ pd-a4",r<=.5&&(o+=" pd-a7"),d=[t("i",{"mx5-click":i+"\x1escale({s:'-'})",title:n("zoomOut"),class:o},p)],p=[t(0,100*r+"%")],d.push(t("b",l,p)),p=[a||(a=t(0,"\ue699"))],o="pd-_ pd-a4",r>=2&&(o+=" pd-a7"),d.push(t("i",{"mx5-click":i+"\x1escale({s:'+'})",title:n("zoomIn"),class:o},p)),t(i,0,d)},init(){let e=this.render.bind(this);d.State.on("c",e),d.State.on("_",e)},render(){this.digest({scale:d.State.get("_c")})},"scale<click>"(e){let{s:t}=e.params,i=this.get("scale"),s=i;"+"==t?(i+=.5)>2&&(i=2):(i-=.5)<.5&&(i=.5),s!=i&&(d.State.set({_c:i}),d.State.fire("c",{step:i/s}),o._s())},"$doc<keydown>"(e){let t=this.get("scale"),i=t,{metaKey:s,ctrlKey:a,code:l}=e;(s||a)&&(l==p.f?(e.preventDefault(),(t+=.5)>2&&(t=2)):l==p.g?(e.preventDefault(),(t-=.5)<.5&&(t=.5)):l==p.h&&(e.preventDefault(),t=1),i!=t&&(d.State.set({_c:t}),d.State.fire("c",{step:t/i}),o._s()))}})}),define("designer/toolbar",["magix","../panels/index","./toolbar-do","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{let s,a;e("./toolbar-do"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels");let l={class:"pd-C pd-Z pd-a_ pd-af"},d={class:"pd-0 pd-C pd-a_ pd-af"};const o=e("magix"),p=e("../panels/index");o.applyStyle("pd-f",".pd-a3{height:22px}.pd-a4{align-items:center;border-radius:2px;cursor:pointer;display:inline-flex;height:22px;justify-content:center;margin:0 2px;width:22px}.pd-a4:hover{background:#e6e6e6;color:#333}.pd-a5,.pd-a5:hover{background:#c4c4c4}.pd-a6{background:#eee;float:left;height:16px;margin:3px 12px;width:1px}.pd-a7{color:#aaa;cursor:not-allowed}.pd-a7:hover{background:transparent;color:#aaa}.pd-a8{display:inline-block;font-weight:400;text-align:center;width:40px}"),i.exports=o.View.extend({tmpl:(e,t,i)=>{let o,p,r,n,{allOpen:c,i18n:h}=e;return p=[t("div",{"mx5-owner":i,class:"pd-a3","mx5-view":"designer/toolbar-do"}),t("div",{"mx5-owner":i,class:"pd-a3","mx5-view":"designer/toolbar-del"})],o=[t("div",l,p)],p=[t("div",{"mx5-owner":i,class:"pd-a3","mx5-view":"designer/toolbar-scale"})],s?p.push(s):p.push(s=t("i",{_:"_",class:"pd-a6"})),p.push(t("div",{"mx5-owner":i,class:"pd-a3","mx5-view":"designer/toolbar-panels"})),s?p.push(s):p.push(s=t("i",{_:"_",class:"pd-a6"})),n=[a||(a=t(0,"\ue651"))],r="pd-_ pd-a4",c&&(r+=" pd-a5"),p.push(t("i",{"mx5-click":i+"\x1e_aP()",title:h(c?"m":"n"),class:r},n)),o.push(t("div",d,p)),t(i,0,o)},init(){let e=this.render.bind(this);o.State.on("p",e),this.on("destroy",()=>{o.State.off("p",e)})},render(){this.digest({allOpen:p._ab()})},"_aP<click>"(){this.get("allOpen")?p._ac():p._ad()}})});