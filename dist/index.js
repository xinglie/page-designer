/*!Sea.js 2.2.3|https://github.com/seajs/seajs/blob/master/LICENSE.md*/
(e=>{if(e.seajs)return;let t,i,s,l=e.seajs={},a=l.data={},o=e=>t=>({}).toString.call(t)=="[object "+e+"]",d=o("Object"),n=o("String"),r=Array.isArray||o("Array"),p=o("Function"),c=o("Undefined"),h=0,g=()=>h++,u=/[^?#]*\//,x=/\/\.\//g,m=/\/[^/]+\/\.\.\//,f=/([^:/])\/\//g,b=e=>e.match(u)[0],_=/^([^/:]+)(\/.+)$/,y=/^\/\/.|:\//,v=/^.*?\/\/.*?\//,w=(e,t)=>{let i,s=e.charAt(0);if(y.test(e))i=e;else if("."===s)i=(e=>{for(e=e.replace(x,"/");e.match(m);)e=e.replace(m,"/");return e=e.replace(f,"$1/")})((t?b(t):a.cwd)+e);else if("/"===s){let t=a.cwd.match(v);i=t?t[0]+e.substring(1):e}else i=a.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i},k=(e,t)=>{if(!e)return"";return e=(e=>{let t=e.length-1,i=e.charAt(t);return"#"===i?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===i?e:e+".js"})(e=(e=>{let t,i=a.paths;return i&&(t=e.match(_))&&n(i[t[1]])&&(e=i[t[1]]+t[2]),e})(e=(e=>{let t=a.alias;return t&&n(t[e])?t[e]:e})(e))),w(e,t)},S=document,z=b(S.URL),j=S.scripts,T=j[j.length-1],L=b((e=>e.hasAttribute?e.src:e.getAttribute("src",4))(T)||z),I=S.head,A=I.getElementsByTagName("base")[0],R=/\.css(?:\?|$)/i,C=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,B=(e,t,i)=>{let s="onload"in e;if(i&&(C||!s))return void setTimeout(()=>{E(e,t)},1);let l=()=>{e.onload=e.onerror=e.onreadystatechange=null,i||a.debug||I.removeChild(e),e=null,t()};s?(e.onload=l,e.onerror=l):e.onreadystatechange=(()=>{/loaded|complete/.test(e.readyState)&&l()})},E=(e,t)=>{let i,s=e.sheet;if(C)s&&(i=!0);else if(s)try{s.cssRules&&(i=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(i=!0)}setTimeout(()=>{i?t():E(e,t)},20)},X=l.cache={},F={},Y={},V={},H=1,M=2,N=3,O=4,D=5,K=6;function W(e,t){this.uri=e,this._cB=t||[],this.exports=null,this.status=0,this._cC={},this._cD=0}W.prototype.resolve=function(){let e=this,t=e._cB,i=[];for(let s=0,l=t.length;s<l;s++)i[s]=k(t[s],e.uri);return i},W.prototype.load=function(){let e=this;if(e.status>=N)return;e.status=N;let t,i=e.resolve(),s=e._cD=i.length;for(let l=0;l<s;l++)(t=W.get(i[l])).status<O?t._cC[e.uri]=(t._cC[e.uri]||0)+1:e._cD--;if(0===e._cD)return void e.onload();let l={};for(let e=0;e<s;e++)(t=X[i[e]]).status<H?t.fetch(l):t.status===M&&t.load();for(let e in l)l.hasOwnProperty(e)&&l[e]()},W.prototype.onload=function(){let e=this;e.status=O,e._cE&&e._cE();let t,i,s=e._cC;for(t in s)s.hasOwnProperty(t)&&((i=X[t])._cD-=s[t],0===i._cD&&i.onload());delete e._cC,delete e._cD},W.prototype.fetch=function(e){let i=this,l=i.uri;if(i.status=H,!l||Y[l])return void i.load();if(F[l])return void V[l].push(i);F[l]=!0,V[l]=[i];let o=()=>{delete F[l],Y[l]=!0,s&&(W.save(uri,s),s=null);let e,t=V[l];for(delete V[l];e=t.shift();)e.load()},d=()=>{((e,i,s,l)=>{let a=R.test(e),o=S.createElement(a?"link":"script");s&&(o.charset=s),c(l)||o.setAttribute("crossorigin",l),B(o,i,a,e),a?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),t=o,A?I.insertBefore(o,A):I.appendChild(o),t=null})(l,o,a.charset,a.crossorigin)};e?e[l]=d:d()},W.prototype.exec=function(){let e=this;if(e.status>=D)return e.exports;e.status=D;let t=e.uri,i=e=>W.get(i.resolve(e)).exec();i.resolve=(e=>k(e,t)),i.async=((e,s)=>(W.use(e,s,t+"__cF_"+g()),i));let s=e.factory,l=p(s)?s(i,e.exports={},e):s;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=K,l},W.define=function(e,l,a){let o=arguments.length;1===o?(a=e,e=void 0):2===o&&(a=l,r(e)?(l=e,e=void 0):l=void 0),!r(l)&&p(a)&&(l=[]);let d={id:e,uri:k(e),deps:l,factory:a};if(!d.uri&&S.attachEvent){let e=(()=>{if(t)return t;if(i&&"interactive"===i.readyState)return i;let e=I.getElementsByTagName("script");for(let t=e.length;t--;){let s=e[t];if("interactive"===s.readyState)return i=s}})();e&&(d.uri=e.src)}d.uri?W.save(d.uri,d):s=d},W.save=((e,t)=>{let i=W.get(e);i.status<M&&(i.id=t.id||e,i._cB=t.deps||[],i.factory=t.factory,i.status=M)}),W.get=((e,t)=>X[e]||(X[e]=new W(e,t))),W.use=((t,i,s)=>{let l=W.get(s,r(t)?t:[t]);l._cE=(()=>{let t=[],s=l.resolve();for(let e=0,i=s.length;e<i;e++)t[e]=X[s[e]].exec();i&&i.apply(e,t),delete l._cE}),l.load()}),l.use=((e,t)=>{W.use(e,t,a.cwd+"__cn_"+g())}),e.define=W.define,l.require=(e=>{let t=W.get(k(e));return t.status<D&&(t.onload(),t.exec()),t.exports}),a.base=L,a.cwd=z,a.charset="utf-8",l.config=(e=>{for(let t in e){let i=e[t],s=a[t];if(s&&d(s))for(let e in i)s[e]=i[e];else r(s)&&(i=s.concat(i)),a[t]=i}return l})})(this),(e=>{window.define?define("magix5",e):window.Magix=e()})(()=>{let e=0,t=[],i=window,s=document,l=i.setTimeout,a=encodeURIComponent;function o(){}let d,n=JSON.stringify,r=s.head,p=i.performance,c=p.now.bind(p),h="prototype",g=Object[h].toString,u=e=>g.call(e).slice(8,-1),x=e=>"Object"==u(e),m=Array.isArray,f=t=>(t||"_")+e++,b=e=>s.getElementById(e),_=(e,t)=>e.innerHTML=t,y={rootId:f(),wait:o,error(e){throw e}},v=e=>!e||"object"!=typeof e,w=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},k=e=>{e["\x1ea"]=null},{assign:S,keys:z,hasOwnProperty:j}=Object,T=r.getAttribute,L=(e,t)=>T.call(e,t),I=(e,t,i)=>{t&&!I[e]&&(I[e]=1,i=s.createElement("style"),_(i,t),r.appendChild(i))},A=(e,t,i,s)=>{try{s=m(t)?e.apply(i,t):e.call(i,t)}catch(e){y.error(e)}return s},R=(e,t)=>e&&j.call(e,t),C=(e,t)=>{let i,s;if(v(t))"\x1e"==(i=t+"")[0]&&(t=e[i]);else for(i in t)s=t[i],s=C(e,s),t[i]=s;return t},B=(e,t)=>t.a-e.a;function E(e,t,i){(i=this).a=[],i.b=t||5,i.c=i.b+(e||20)}S(E[h],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let i=this,s=i.a,l="\x1e"+e,a=s[l],o=i.b;if(!a){if(s.length>=i.c)for(s.sort(B);o--;)(a=s.pop()).a>0&&i.del(a.o);a={d:e},s.push(a),s[l]=a}a.c=t,a.a=1},del(e){e="\x1e"+e;let t=this.a,i=t[e];i&&(i.a=-1,i.c="",t[e]=null)},has(e){return R(this.a,"\x1e"+e)}});let X={bubbles:!0,cancelable:!0},F=[],Y=(e,t,i,s,l,a)=>{let o={a:l,b:i,c:t,d:e,e(e){l?A(i,e,a):i(e)}};F.push(o),e.addEventListener(t,o.e,s)},V=(e,t,i,s,l)=>{for(let a,o=F.length;o--;)if((a=F[o]).c==t&&a.a==l&&a.d==e&&a.b===i){F.splice(o,1),e.removeEventListener(t,a.e,s);break}},H=new E,M=(e,t=1,i)=>(t&&H.has(e)?i=H.get(e):(i=A(Function(`return ${e}`)),t&&H.set(e,i)),i),N=decodeURIComponent,O=new E,D=e=>{let t,i,s,l,a,o,d=O.get(e);if(!d){if(l={},-1==(a=e.indexOf("?"))?(t=e,o=""):(t=e.substring(0,a),o=e.substring(a+1)),o)for(a of o.split("&"))[i,s]=a.split("="),l[N(i)]=N(s||"");O.set(e,d={a:t,b:l})}return{path:d.a,params:S({},d.b)}},K=new E,W=(e,t,i)=>(K.has(e)?i=K.get(e):(i=M(e,0),e.includes("\x1e")?C(t,i):K.set(e,i)),i),$=0,q=[],P=()=>{let e,t,i,s=c(),a=y.wait;try{for(;;){if(e=q[$],i=q[$-1],t=q[$+1],q[$]=null,q[$-1]=null,q[$+1]=null,q[$+2]=null,$+=4,!e){a(0),q.length=$=0;break}if(e!=o&&(m(t)?e.apply(i,t):e.call(i,t)),c()-s>8&&q.length>$){a(1),l(P);break}}}catch(e){y.error(e),l(P)}},U=(e,t,i,s)=>{if($||($=1,l(P)),s)for(let e=q.length-1;e>=$;e-=4)q[e]==s&&(q[e-3]=null,q[e-2]=o,q[e-1]=null,q[e]=null);q.push(i,e,t,s)},Q=e=>e.__esModule||window.Symbol&&"Module"===e[Symbol.toStringTag],G=(e,t)=>{if(e){let i=[];seajs.use(e,(...e)=>{for(let t of e)i.push(Q(t)?t.default:t);U(t,i)})}else U(t)},J=(e,t,i,s)=>(o[h]=t[h],s=new o,S(s,i),s.constructor=e,e[h]=s,e),Z=e=>e;let ee,te,ie={fire(e,t){let i,s,l=this,a=l["\x1e"+e],o=0;if(t||(t={}),t.type=e,a)for(i=a.length;o<i;o++)(s=a[o]).a?(s.b=1,A(s.a,t,l),s.b=""):s.b||(a.splice(o--,1),i--);(a=l[`on${e}`])&&A(a,t,l)},on(e,t){let i="\x1e"+e;(this[i]||(this[i]=[])).push({a:t})},off(e,t){let i,s="\x1e"+e,l=this,a=l[s];if(t){if(a)for(i of a)if(i.a==t){i.a="";break}}else l[s]=null,l[`on${e}`]=null}},se={},le=(e,t,i,s)=>{t.includes("\x1e")&&(s=se[e])&&C(s.a,i)},ae=(e,t)=>{R(se,e)||(se[e]=t)},oe=(e,t,i,s,l,a,o)=>{for(t=e.c,l=e.d;t.length;)[i,o,s]=t.shift(),U(s,(a=l[i])&&A(a,o,l))},de=(e,t)=>{let i,s,l;for(i in e.b)(l=t?(s=se[i])&&w(s.root,t):1)&&e.unmount(i,1)},ne=e=>{let{d:t,root:i}=e;e.c=[],t&&(e.d=0,t.a&&(t.a=0,k(t),de(e),t.fire("destroy"),lt(t,1),i&&e.f&&_(i,e.g))),e.h++},re=(e,t,i)=>{let s,l,a,o,{id:d,root:n,pId:r}=e;!e.f&&n&&(e.f=1,e.g=n.innerHTML),ne(e),n&&t&&(s=D(t),a=s.path,e.path=t,o=s.params,le(r,t,o),e.i=a,(r=o["\x1e"])&&x(r)?o=r:S(o,i),l=e.h,G(a,t=>{l==e.h&&(t?(ct(t),a=new t(d,n,e,o),e.d=a,lt(a),A(a.init,o,a),U(a.f,o,a),U(()=>{a.g(),a.tmpl||a.h||st(a)})):y.error(Error(`${d} cannot load:${a}`)))}))},pe=e=>e.b||(e.b=f(te));function ce(e,t){let i=this,s=pe(e);i.id=s,i.root=e,i.h=1,i.b={},i.pId=t,i.c=[],i.a={},ae(s,i)}S(ce,{root:()=>ee,all:()=>se,byId:e=>se[e],byNode:e=>se[e.b]}),S(ce[h],{mount(e,t,i){let s,l=this,a=l.id,o=l.b,d=pe(e);return(s=se[d])||(R(o,d)||(l.j=0),o[d]=d,s=new ce(e,a)),re(s,t,i),s},unmount(e,t){let i,s;var l,a,o;e=e?this.b[t?e:e.b]:this.id,(i=se[e])&&(ne(i),s=i.pId,(a=se[l=e])&&(delete se[l],(o=a.root).a=0,o.b=0,a.id=a.root=a.pId=a.b=null),(i=se[s])&&R(i.b,e)&&(delete i.b[e],i.j=0))},children(e){return(e=this).j||(e.j=z(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=se[t.pId];return t},invoke(e,t){let i,s,l=this,a=l.c;return new Promise(o=>{(i=l.d)&&i.h?o((s=i[e])&&A(s,t,i)):a.push([e,t,o])})}});let he=new E(30,10),ge=/([\w\-]+)\x1e(\x1e)?([^(]+)\(([\s\S]*?)\)/,ue={},xe={},me={},fe={},be={},_e={},ye={capture:!0},ve={passive:!1},we={passive:!1,capture:!0};let ke=(e,i)=>{let s,l,a,o,n,r,p,c,h=[],g=e,u=L(e,"mx5-"+i),x=0;if(u&&((n=he.get(u))||(n={v:(n=u.match(ge)||t)[1],t:n[2],n:n[3],i:n[4]},he.set(u,n)),n=S({},n)),n&&!n.v||be[i]){if(""!==(c=g.c)){for(p=[g];g!=d&&(g=g.parentNode);){if(se[l=g.b]||(l=g.c)){c=l;break}p.push(g)}for(u of p)u.c=c||""}if(g=e.b,se[g]&&(x=c=g),c)do{if((s=se[c])&&(r=s.d)){if(o=(a=r.i)[i])for(g=o.length;g--;)a={r:l=o[g],v:c,n:l},l?!x&&e.matches(l)&&h.push(a):x&&h.push(a);if(r.tmpl&&!x)break;x=0}}while(s&&(c=s.pId))}return n&&h.push(n),h},Se=e=>{let t,i,s,l,a,o,n,{target:r,type:p}=e,c=[];for(;r&&1==r.nodeType&&r!=d&&!(e.cancelBubble||(i=r.d)&&i[p]);){if(i=1,c.push(r),(t=ke(r,p)).length)for(o of(c.length=0,t)){let{v:t,n:d,i:c,t:h}=o;if(!(l=(s=se[t])&&s.d)){0;break}l.h&&l.a&&((o=l[a=d+"\x1e"+p])&&(e.eventTarget=r,n=c?W(c,s.a):_e,e.params=n,A(o,e,l)),h||r==l.root||be[p]||(r=l.root,i=0))}i&&((s=r.b)&&(l=(s=se[s])&&s.d)&&l.j[p]&&(c.length=0),r=r.parentNode)}for(r of c)(i=r.d||(r.d={}))[p]=1},ze=(e,t,i,s)=>{let l=0|ue[e],a=0|me[e],o=0|fe[e],n=i?-1:1,r=i?V:Y;4&s&&(a+=n,me[e]=a),8&s&&(o+=n,fe[e]=o);let p,c=xe[e];a&&o?p=we:a?p=ve:o&&(p=ye),l&&i!==l?p!=c&&(V(d,e,Se,c),Y(d,e,Se,p)):r(d,e,Se,i?c:p),xe[e]=p,ue[e]=l+n,t&&(be[e]=(0|be[e])+n)};let je={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},Te=/[&<>"'\`]/g,Le=e=>null==e?"":""+e,Ie=e=>je[e],Ae=e=>Le(e).replace(Te,Ie),Re={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ce=e=>Re[e],Be=/[!')(*]/g,Ee=e=>a(Le(e)).replace(Be,Ce),Xe=/[\\'"]/g,Fe=e=>Le(e).replace(Xe,"\\$&"),Ye=(e,t,i)=>(e[i]=t,i),Ve=(e,i,s)=>{if(e.a&&(s=e.tmpl)){let i,l=e.k,a=e.id,o=se[a],d={a:[],b:0},n=e.d,r=o.a;e.l=0,e.k={},i=s(n,Me,a,Le,Ee,r,Ye,Fe,m);let p=()=>{if(e.a)for(i of((s=d.c||!e.h)&&st(e),d.a))U(i.g,t,i,"\x1e"+i.id)},c=()=>{if(e.m=i,e.n>1)e.n=1,p(),Ve(e);else{for(i of(e.n=0,p(),l=e.o))i();l.length=0}};U(Ge,[e.root,e.m,i,d,o,l,e,c])}},He={},Me=(e,t,i,s)=>{let l;if(e){t=t||He;let a,o,d,n,r,p="",c=1==i,h={},g=0,u="<"+e,x="",m="",f=[],b=0;if(i&&1!=i)for(n of i){if(d=n.a,n.b==Oe){if(!d)continue;d=Ae(d)}m+=d,r&&n.b==Oe&&r.b==Oe?r.a+=n.a:(n.d&&(h[n.d]=(h[n.d]||0)+1,g++),a=a||n.e,r=n,f.push(n))}for(o in s=s||He,t)!1!==(d=t[o])&&null!=d?(!0===d&&(t[o]=d=s[o]?d:""),"id"==o||"mx5-key"==o?p=d:"_"!=o||p?"mx5-view"==o&&d&&(b=1,p||(p=e+"\x1e"+D(d).path)):p=d,"value"==o&&"textarea"==e?(m=d,x+=d):R(Ne,o)||(u+=` ${o}="${d&&Ae(d)}"`)):s[o]||delete t[o];x+=u,l={a:u+=c?"/>":`>${m}</${e}>`,c:m,d:p,b:e,f:b,e:a||t.$,g:s,h:x,i:t,j:f,k:h,l:g,m:c}}else l={b:i?"\x1e":Oe,a:t+""};return l},Ne={_:1,$:1,"mx5-key":1};let Oe=e;let De="http://www.w3.org/",Ke={svg:`${De}2000/svg`,math:`${De}1998/Math/MathML`},We=(e,t,i)=>{let l,a,o,d=0,n=i.g,r=t.g,p=i.i,c=t.i;if(t)for(l in c)R(p,l)||(d=1,(o=r[l])?e[o]="":e.removeAttribute(l));for(l in p)R(Ne,l)||(a=p[l],(o=n[l])&&s.activeElement!=e?t&&e[o]==a||(d=1,e[o]=a):t&&c[l]==a||(d=1,e.setAttribute(l,a)));return d},$e=(e,t)=>{let i,l=e.b;return l==Oe?i=s.createTextNode(e.a):(i=s.createElementNS(Ke[l]||t.namespaceURI,l),We(i,0,e),_(i,e.c)),i},qe=(e,t,i,s,l)=>{let a,o,d,n={};for(a=s;a>=i;a--,l--)(d=(o=e[a]).d)&&(o=n[d]||(n[d]=[])).push(t[l]);return n},Pe=(e,t)=>e.d&&t.d==e.d||!e.d&&!t.d&&e.b==t.b||"\x1e"==t.b,Ue=(e,t,i,s)=>{i&&((s=se.b)?s.unmount():de(t,e))},Qe=(e,t,i,s,l)=>{Ue(e,i,1==e.nodeType),t.removeChild(e),--s.b||U(l)},Ge=(e,t,i,s,l,a,o,d)=>{if(o.a)if(t){if(t.e||t.c!=i.c){let n,r,p,c,h,g=t.j,u=i.j,x=i.k,m=i.l,f=t.l,b=e.childNodes,y=0,v=g.length-1,w=0,k=u.length-1;0;let S,z=g[y],j=g[v],T=u[w],L=u[k],I=y,A=v;for(;y<=v&&w<=k;)if("\x1e"!=T.b&&"\x1e"!=L.b||(A=-1),z)if(j)if(Pe(z,T))s.b++,U(Je,[b[I],e,z,T,s,l,a,o,d]),x[z.d]&&(x[z.d]--,m--,(c=h&&h[z.d])&&--h[z.d]),I++,z=g[++y],T=u[++w];else if(Pe(j,L))s.b++,U(Je,[b[A],e,j,L,s,l,a,o,d]),x[j.d]&&(x[j.d]--,m--),A--,j=g[--v],L=u[--k];else if(Pe(z,L))r=b[I],e.insertBefore(r,b[A+1]),s.b++,U(Je,[r,e,z,L,s,l,a,o,d]),x[z.d]&&(x[z.d]--,m--),A--,z=g[++y],L=u[--k];else if(Pe(T,j))r=b[A],e.insertBefore(r,b[I++]),s.b++,U(Je,[r,e,j,T,s,l,a,o,d]),x[j.d]&&(x[j.d]--,m--),j=g[--v],T=u[++w];else{if(!h&&m>0&&f>0&&(h=qe(g,b,y,v,A)),S=b[I],(c=h&&h[T.d])&&(c=c.pop())){if(p=z,c!=S){for(r=y+1,n=I+1;r<=v;r++)if((p=g[r])&&b[n++]==c){g[r]=null;break}y--,e.insertBefore(c,S)}x[p.d]&&x[p.d]--,s.b++,U(Je,[c,e,p,T,s,l,a,o,d])}else h&&h[z.d]&&x[z.d]||se[S.b]&&!T.f?(s.c=1,e.insertBefore($e(T,e),S),y--,A++):(s.b++,U(Je,[S,e,z,T,s,l,a,o,d]));++I,z=g[++y],T=u[++w]}else j=g[--v];else z=g[++y];for(n=w,r=1;n<=k;n++,r++){if(p=u[n],s.c=1,"\x1e"==p.b){s.c=1,_(e,p.a);break}e.insertBefore($e(p,e),b[A+r])}for(n=I;n<=A;n++)s.c=1,s.b++,U(Qe,[b[n],e,l,s,d])}}else s.c=1,_(e,i.c);s.b||U(d)},Je=(e,t,i,s,l,a,o,d,n)=>{if(d.a){0;let r=i.i,p=s.i;if(i.e||i.a!=s.a)if("\x1e"==s.b)l.c=1,_(t,s.a);else if(i.b==s.b){if(i.b==Oe)l.c=1,e.nodeValue=s.a;else if(!r._||r._!=p._){let t,c,h,g,u,x,m,f=p["mx5-view"],b=s.c,_=i.h!=s.h,y=se[e.b],v=f&&D(f);if(_&&(_=We(e,i,s))&&(l.c=1),f&&y&&y.i==v.path&&(g=y.d)){if(x=b!=i.c,m=f!=y.path,h=r.$,!x&&!m&&h)for(h of u=h.split(","))if("#"==h||R(o,h)){m=1;break}(m||x)&&(h=g.f,u=v.params,le(y.pId,f,u),y.path=f,y.g=b,!1!==A(h,u,g)&&l.a.push(g),t=!g.tmpl)}else t=1,c=y;c&&(l.c=1,y.unmount()),t&&!s.m&&Ge(e,i,s,l,a,o,d,n)}}else l.c=1,Ue(e,a,1),t.replaceChild($e(s,t),e)}--l.b||U(n)},Ze={},et=S({get:e=>e?Ze[e]:Ze,set(e){S(Ze,e)}},ie),tt=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,it=(e,t,i)=>(e.a?i=e:((i=function(e,t){for(t of i.a)A(t,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),st=e=>{let t,i;e.a&&(i=e.h,e.h=1,((e,t,i)=>{for(i of(t=t||e.root).querySelectorAll(`[mx5-view][mx5-owner="${e.id}"]`))i.a||(i.a=1,e.mount(i,L(i,"mx5-view")))})(t=e.owner),i||U(oe,t))},lt=(e,t)=>{let i,{j:s,i:l,p:a,id:o}=e;for(i in s)ze(i,l[i],t,s[i]);for(i of(s=t?V:Y,a))s(i.a,i.b,i.c,i.d,o,e)},at={win:i,doc:s,root:""};function ot(...e){return S(this,...e),this}let dt=(e,t,i)=>{let s,l,a,o,d={};for(l of e)for(s in l)a=l[s],o=d[s],"ctor"!=s?(tt.test(s)&&(o?a=it(o,a):a.b=1),d[s]=a):i.push(a);for(s in d)R(t,s)||(t[s]=d[s])};function nt(...e){let t=this.a||(this.a=[]);return dt(e,this[h],t),this}let rt=e=>(function(...t){return A(e,t,this)}),pt=(e,t,i,s)=>{if(e)for(s of e)A(s,t,i)};let ct=e=>{if(!e["\x1e"]){e["\x1e"]=1;let t,i,s,l,a,o,d,n,r,p,c,g=e[h],u={},x=[],m={};for(d in g)if(t=g[d],i=d.match(tt))for(n of([,o,s,l,c]=i,p=c?M(c):_e,l=l.split(","))){if(a=at[s],r=1,!1===p.passive&&(r|=4),p.capture&&(r|=8),o){if(a){x.push({c:t,a:a,b:n,d:p});continue}""===a&&(s=""),r=2,(a=m[n])||(a=m[n]=[]),a[s]||(a[s]=1,a.push(s))}u[n]|=r,(a=g[n=s+"\x1e"+n])?a.b&&(t.b?g[n]=it(t,a):R(g,d)&&(g[n]=t)):g[n]=t}g.g=g.render=rt(g.render),g.j=u,g.p=x,g.i=m,g.f=g.assign}};function ht(e,t,i,s,l){(l=this).root=t,l.owner=i,l.id=e,l.a=1,l.l=1,l.d={},l.k={},l.n=0,l.o=[],pt(ht.a,s,l)}function gt(){this.id=f("b"),this.a={}}S(ht,{merge:nt,extend:function e(t){let i=this,s=(t=t||{}).ctor;function l(e,t,a,o,d){i.call(d=this,e,t,a,o),s&&A(s,o,d),pt(l.a,o,d)}return l.merge=nt,l.extend=e,l.static=ot,J(l,i,t)}}),S(ht[h],ie,{init:o,render:o,assign:o,get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let i,s,l,a=this,o=a.d,d=a.k,n=a.l;for(l in e)i=e[l],s=o[l],v(i)&&s==i||R(t,l)||(d[l]=1,n=1),o[l]=i;return a.l=n,a},digest(e,t){return e=this.set(e,t),new Promise(t=>{e.l?(e.n++,e.o.push(t),1==e.n&&Ve(e,1)):e.n?e.o.push(t):t()})},finale(){let e=this;return new Promise(t=>{e.n?e.o.push(t):t()})}}),S(gt[h],{get(e,t){let i,s=this.a;if(e){let t,i=m(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&s;)s=s[t];t&&(s=void 0)}return void 0!==t&&(i=u(t))!=u(s)&&(s=t),s},set(e){S(this.a,e)}});let ut=(e,t,i)=>s=>{if(i=e[t]){delete e[t];for(let e of i)A(e,s,i.a)}},xt=(e,t,i,s,l)=>{if(e.a)return e;if(e.b)return e.enqueue(xt.bind(e,e,t,i,s,l));e.b=1,m(t)||(t=[t]);let a=e.constructor,o=0,d=a.d,n=((e,t,i,s,l,a)=>{let o=[],d=null,n=0;return(t,r,p)=>{let h;n++;let g,u=t.b,x=u.a;if(o[r+1]=t,p?(d=p,h=1):a.has(x)||(x&&a.set(x,t),u.b=c(),(g=u.c)&&A(g,t,t),h=1),!i.a){let a=n==s;a&&(i.b=0,2==l&&(o[0]=d,A(e,o,i))),1==l&&A(e,[p||null,t,a,r],i)}}})(i,0,e,t.length,s,a.c);for(let e of t)if(e){let t,[i,s]=a.get(e,l),r=i.b.a,p=n.bind(i,i,o++);r&&d[r]?d[r].push(p):s?(r&&((t=[p]).a=i,d[r]=t,p=ut(d,r)),a.e(i,p)):p()}return e};function mt(){this.id=f("s"),this.f=[]}S(mt[h],{all(e,t){return xt(this,e,t,2)},save(e,t){return xt(this,e,t,2,1)},one(e,t){return xt(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,l(()=>{i.b=0,i.a||(t=i.f.shift())&&A(t,i.g=e)}))},destroy(e){(e=this).a=1,e.f=0}});let ft=(e,t)=>[n(t),n(e)].join("\x1e"),bt=S({add(e){let t,i=this.h;for(t of(m(e)||(e=[e]),e))if(t){let{name:e,cache:s}=t;t.cache=0|s,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,s=new gt;s.set(t),s.b={c:t.after,a:i&&ft(t,e)},x(e)&&s.set(e);let l=t.before;return l&&A(l,s,s),s},meta(e){return this.h[e.name||e]||e},get(e,t){let i,s,l=this;return t||(i=l.cached(e)),i||(i=l.create(e),s=1),[i,s]},cached(e){let t,i,s=this,l=s.c,a=s.meta(e),o=0|e.cache||a.cache;if(o&&(i=ft(a,e)),i){let e=s.d[i];e?t=e.a:(t=l.get(i))&&c()-t.b.b>o&&(l.del(i),t=0)}return t}},ie);mt.extend=((e,t,i)=>{function s(){mt.call(this)}return s.e=e,s.c=new E(t,i),s.d={},s.h={},S(s,bt),J(s,mt)});let _t=0,yt={config:(e,t)=>(t=y,e&&(t=x(e)?S(t,e):t[e]),t),boot(e){_t||(_t=1,S(y,e),re(((e,t)=>(ee||(d=s.body,e=te=y.rootId,(t=b(e))||(t=d),ee=new ce(t)),ee))(),y.defaultView))},unboot(){_t&&ee&&(ee.unmount(),ee=null)},toMap:(e,t)=>{let i,s={};if(e)for(i of e)s[t&&i?i[t]:i]=t?i:1+(0|s[i]);return s},toTry:A,toUrl:(e,t,i)=>{let s,l,o,d=[];for(l in t)((s=t[l]+"")||R(i,l))&&(s=a(s),d.push(o=l+"="+s));return o&&(e+=(e&&(e.includes("?")?"&":"?"))+d.join("&")),e},parseUrl:D,guid:f,use:G,dispatch:(e,t,i)=>{let s=new Event(t,X);S(s,i),e.dispatchEvent(s)},guard:Z,type:u,has:R,inside:w,applyStyle:I,Cache:E,View:ht,Vframe:ce,State:et,Service:mt,Event:ie,mark:(e,t,i,s,l)=>(null!==e[l="\x1ea"]&&(i=e[l]||(e[l]={}),R(i,t)||(i[t]=0),s=++i[t]),i=>(i=e[l],i&&s===i[t])),unmark:k,node:b,task:U,taskFinale:()=>new Promise(e=>{U(e)}),taskComplete(e){let t=0,i=0,s=(...s)=>{++i==t&&e(...s)};return(...e)=>{t++,U(s,[...e])}}};return yt.default=yt,yt}),window.designer=(e=>{let t=document.getElementById("boot").src.replace(/\/[^/]+$/,"/");seajs.config({paths:{designer:t+"designer",elements:t+"elements",gallery:t+"gallery",i18n:t+"i18n",panels:t+"panels"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("d-_",'@font-face{font-family:d-_;src:url(//at.alicdn.com/t/font_890516_6qhte3162qj.eot);src:url(//at.alicdn.com/t/font_890516_6qhte3162qj.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.woff2) format("woff2"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.woff) format("woff"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.svg#iconfont) format("svg")}*,:after,:before{box-sizing:inherit}.d-_{font-family:d-_;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(250,116,43,.2)}::selection{background-color:rgba(250,116,43,.2)}.d-a,.d-b{font-size:100%;margin:0;caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;max-width:100%;outline:none;transition:border-color .25s}.d-a:hover,.d-b:hover{border-color:#ccc}.d-a:focus,.d-b:focus,.d-c{outline:none;resize:none;border-color:#fa742b!important}.d-d{resize:none}.d-c:hover{border-color:#fa742b!important}.d-b{height:auto;overflow:auto}.d-a[disabled],.d-b[disabled]{background-color:#f5f5f5;cursor:not-allowed}.d-a::-moz-placeholder,.d-b::-moz-placeholder{color:#a9a9a9;opacity:1}.d-a::-moz-focus-inner{border-style:none;padding:0}.d-a[disabled]:hover,.d-b[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}.d-e{margin:0;outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;white-space:nowrap;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-e:focus,.d-e:hover{background-color:#bbb;color:#333}.d-f{background-color:#fa742b;color:#fff}.d-f:focus,.d-f:hover{background-color:#e25305;color:#fff}.d-e[disabled]{background-color:#f5f5f5;color:#999;cursor:not-allowed}.d-e[disabled]:hover{border-color:#e6e6e6;color:#999}.d-e::-moz-focus-inner{border-style:none;padding:0}.d-g{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.5}.d-g,.d-h{background-color:#fff}.d-h{padding:18px 25px}.d-i{background-color:#fff;padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6}.d-j{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.d-j:after,.d-j:before{content:""}.d-j:after,.d-j:before,.d-k{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:d-_ 1s ease-in-out infinite both;animation:d-_ 1s ease-in-out infinite both}.d-j:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.d-k{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes d-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes d-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.d-l{cursor:default;display:inline-block;max-width:100%;font-weight:400;cursor:pointer}.d-m{font-size:14px}.d-m,.d-n{margin:0;padding:0}.d-n{list-style-type:none;list-style-image:none}.d-o{border-style:none;height:auto;max-width:100%;vertical-align:top}.d-p{box-sizing:border-box;font-size:14px;line-height:1.5;font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif}.d-q{margin-right:2px}.d-r{transform:rotate(180deg)}.d-s{margin-right:5px}.d-t{margin-right:10px}.d-u{width:100%}.d-v{height:100%}.d-w{max-width:100%}.d-x{max-height:100%}.d-y{text-align:center}.d-z{float:left}.d-A{float:right}.d-B{position:relative}.d-C{margin:30px 0}.d-D{font-size:16px}html .d-E{display:none}.d-F:after,.d-F:before{content:" ";display:table}.d-F:after{clear:both}.d-G{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-H::-webkit-scrollbar,.d-H::-webkit-scrollbar-corner{height:4px;width:4px;background:#edeef3}.d-H::-webkit-scrollbar-thumb{background:#fa742b;border-radius:2px}.d-H::-webkit-scrollbar-thumb:hover{background:#ec5706}.d-I{scroll-behavior:smooth}.d-I::-webkit-scrollbar,.d-I::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}.d-J{white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.d-K{height:1px;line-height:1px;margin:5px 0;background:linear-gradient(90deg,transparent,rgba(125,118,132,.32941176470588235) 50%,transparent)}.d-L{display:flex}.d-M{align-items:center}.d-N{justify-content:center}.d-O{transform:scaleX(-1)}.d-P{position:-webkit-sticky;position:sticky;top:0}.d-Q:before{width:100%;height:100%;content:attr(data-tip);position:absolute;display:flex;justify-content:center;align-items:center}.d-R{overflow:hidden}');let s=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(s=e.getItem("l.lang")||s)}catch(e){}t.config(e),t.config({lang:s});let{State:l,View:a}=t;a.merge({ctor(){this.set({i18n:i})},_cu(e,t){let i;return t=t||150,(...s)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}}),document.title=i("e");let o=t.node("app"),d=0;o.classList.add("d-p"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",wait(e){e!=d&&l.fire("j",{busy:d=e})},error(e){setTimeout(()=>{throw e},0)}})})}),define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{let s,l,a,o,d,n,r,p,c,h,g,u,x={class:"d-aT"},m={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},f={class:"d-B d-aL"},b={class:"d-aY"},_={value:"value"};const y=e("magix"),v=e("../mx-dragdrop/index"),w=e("../mx-monitor/index");let{abs:k,min:S,max:z,round:j}=Math;y.applyStyle("d-i",'.d-aK{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.d-aK:hover{border-color:#ccc}.d-aL,.d-aM{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.d-aM{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.d-aN{padding:3px 4px}.d-aM:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.d-aO{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.d-aP-bottom{top:100%;margin-top:4px}.d-aP-top{bottom:100%;margin-bottom:4px}.d-aQ{width:176px}.d-aR{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.d-aS:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.d-aT{margin:5px 0;height:150px}.d-aU{position:relative;float:left;width:148px;height:148px}.d-aV{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.d-aW{width:18px;height:148px;position:relative;float:left;margin-left:10px}.d-aX{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.d-aY{height:25px}.d-aZ{width:80px}.d-a0,.d-aZ{margin-right:5px;vertical-align:middle}.d-a0{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.d-a1{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.d-a1:hover{opacity:.5}.d-aL{width:174px;height:12px;margin-bottom:5px}.d-a2{height:100%}.d-a3{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.d-a4{cursor:not-allowed;background-color:#f5f5f5}.d-a4:hover{border-color:#e6e6e6}.d-a4:hover .d-a1{opacity:.1}.d-a4 .d-aM{opacity:.4}.d-a4 .d-a1{opacity:.1}');let T=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],L=(e,t,i)=>{let s,l,a,o,d;s=l=a=i-(d=i*t);let n=255*(s+=[d,o=d*(1-k((e=e%360/60)%2-1)),0,0,o,d][e=~~e]),r=255*(l+=[o,d,d,o,0,0][e]),p=255*(a+=[0,0,o,d,d,o][e]);return{r:n,g:r,b:p,hex:"#"+(16777216|p|r<<8|n<<16).toString(16).slice(1)}};i.exports=y.View.extend({tmpl:(e,t,i,y,v,w,k,S)=>{let z,j,T,L,I,A,R,C,B,E,X=[],{disabled:F,text:Y,textWidth:V,color:H,clear:M,i18n:N,placement:O,align:D,renderUI:K,shortcuts:W,alpha:$,current:q}=e;if(j=[],Y&&(I=[t(0,y(Y))],L="",V&&(L+="width:"+y(V)+"px"),T=[t("div",{class:"d-G d-aN","mx5-click":i+"\x1e\x1e_bf()",style:L},I)],j.push(...T)),T=[t(0,"picker")],z="d-aM d-G",Y||(z+=" d-u"),L="",H&&(L+="background:"+y(H)+";"),j.push(t("div",{"mx5-click":i+"\x1e\x1e_bf()",class:z,style:L},T)),M&&H&&(I=[t(0,"\ue624")],T=[t("i",{class:"d-_ d-a1","mx5-click":i+"\x1e\x1e_bg()",title:y(N("ab"))},I)],j.push(...T)),T=[],K){I=[],A=[];for(let e=W.length,s=0;s<e;s+=1){let e=W[s];R=[t("li",{class:"d-aR",id:"sc_"+y(e)+"_"+i,style:"background:#"+y(e),"mx5-click":i+"\x1e\x1e_bb({color:'#"+S(e)+"'})"})],A.push(...R)}I.push(t("ul",{class:"d-F d-aQ d-n",id:"scs_"+i},A)),E=s?[s]:[s=t("stop",{_:"_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})],l?E.push(l):E.push(l=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),B=[t("lineargradient",{id:"gb_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},E)],E=a?[a]:[a=t("stop",{_:"b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],l?E.push(l):E.push(l=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),B.push(t("lineargradient",{id:"gw_"+i,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},E)),C=[t("defs",0,B),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+i+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+i+")"})],R=[t("svg",m,C),t("div",{class:"d-aV",id:"ci_"+i})],A=[t("div",{class:"d-aU",id:"cz_"+i,"mx5-mousedown":i+"\x1e\x1e_a8()"},R)],E=o?[o]:[o=t("stop",{_:"c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})],d?E.push(d):E.push(d=t("stop",{_:"d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"})),n?E.push(n):E.push(n=t("stop",{_:"e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"})),r?E.push(r):E.push(r=t("stop",{_:"f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"})),p?E.push(p):E.push(p=t("stop",{_:"g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"})),c?E.push(c):E.push(c=t("stop",{_:"h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"})),h?E.push(h):E.push(h=t("stop",{_:"i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"})),g?E.push(g):E.push(g=t("stop",{_:"j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"})),u?E.push(u):E.push(u=t("stop",{_:"k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),B=[t("lineargradient",{id:"ghsv_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},E)],C=[t("defs",0,B),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+i+")"})],R=[t("svg",m,C),t("div",{class:"d-aX",id:"si_"+i})],A.push(t("div",{class:"d-aW","mx5-mousedown":i+"\x1e\x1e_a9()"},R)),I.push(t("div",x,A)),$&&(C=[t("div",{class:"d-a3",id:"ai_"+i})],R=[t("div",{class:"d-B d-a2",id:"at_"+i,"mx5-mousedown":i+"\x1e\x1e_b_()"},C)],A=[t("div",f,R)],I.push(...A)),A=[t("span",{class:"d-a0",id:"bc_"+i}),t("input",{class:"d-a d-aZ",readonly:!0,id:"v_"+i,value:y(q)},1,_)],R=[t(0,y(N("ac")))],A.push(t("button",{class:"d-e d-f",type:"button","mx5-click":i+"\x1e\x1e_ba()"},R)),I.push(t("div",b,A)),T.push(...I)}return j.push(t("div",{id:"bd_"+i,class:"d-aO d-aP-"+y(O),style:y(D)+":-1px"},T)),z="d-aK",F&&(z+=" d-a4"),X.push(t("div",{"mx5-contextmenu":i+"\x1e_A()",id:"root_"+i,class:z},j)),t(i,0,X)},init(e){this.set({shortcuts:T}),w._aX(),this.on("destroy",()=>{w._aY(this),w._aZ()})},assign(e){this._ae=e.color||"",this._a0=e.alpha+""=="true",this._a1={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"})},render(){this.digest({alpha:this._a0,color:this._ae,current:this._ae})},_a4(e,t,i){let s=this,l=s._a1;l.h=e.h,l.s=e.s,l.v=e.v;let a=L(e.h,e.s,e.v);t=t||a.hex;let o=y.node("cz_"+s.id),d=o.clientWidth,n=L(e.h,1,1);if(o.style.background=n.hex,s._a2=t,s._a3(),!i){let e=y.node("scs_"+s.id).querySelector('li[class$="d-aS"]');e&&e.classList.remove("d-aS");let t=y.node("si_"+s.id),i=t.clientHeight/2,a=j(l.h*d/360-i),o=y.node("ci_"+s.id),n=o.clientWidth/2;t.style.top=a+"px",a=j((1-l.v)*d-n);let r=j(l.s*d-n);o.style.left=r+"px",o.style.top=a+"px"}let r=y.node("sc_"+t.substr(1,6)+"_"+s.id);r&&r.classList.add("d-aS")},_a7(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let s=parseInt(e.substr(3,2),16);isNaN(s)&&(s=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let a=((e,t,i)=>{let s,l,a,o;return{h:s=(s=0==(o=(a=z(e/=255,t/=255,i/=255))-S(e,t,i))?null:a==e?(t-i)/o+(t<i?6:0):a==t?(i-e)/o+2:(e-t)/o+4)%6*60,s:l=0===o?0:o/a,v:a}})(i,s,l),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t._a5=("0"+o.toString(16)).slice(-2),t._a4(a,e),t._a0&&t._a6(o)},_a6(e){let t=y.node("ai_"+this.id);e/=255,e*=y.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},_a3(){let e=this,t=y.node("bc_"+e.id),i=e._a2;e._a0&&(y.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e._a5),t.style.background=i,y.node("v_"+e.id).value=i},"_A<contextmenu>"(e){e.preventDefault()},"_a8<mousedown>"(e){let t=this,i=y.node("cz_"+t.id).clientWidth,s=y.node("ci_"+t.id).clientWidth/2,l=e.eventTarget.getBoundingClientRect(),a=e.pageX-l.left-window.pageXOffset,o=e.pageY-l.top-window.pageYOffset,d=a/i,n=(i-o)/i;t._a4({h:t._a1.h,s:d,v:n});let r=y.node("ci_"+t.id),p=getComputedStyle(r),c=p.left,h=p.top,g=parseInt(c,10),u=parseInt(h,10),x=e;t._w(e,e=>{let l=e.pageY-x.pageY,a=e.pageX-x.pageX;(l+=u)<=-s?l=-s:l>=i-s&&(l=i-s),(a+=g)<=-s?a=-s:a>=i-s&&(a=i-s),r.style.left=a+"px",r.style.top=l+"px";let o=(a+s)/i,d=(i-(l+s))/i;t._a4({h:t._a1.h,s:o,v:d})})},"_a9<mousedown>"(e){let t=this,i=e.eventTarget,s=y.node("si_"+t.id),l=y.node("cz_"+t.id).clientWidth,a=s.clientHeight/2,o=i.getBoundingClientRect(),d=(e.pageY-o.top-window.scrollY)/l*360;t._a4({h:d,s:t._a1.s,v:t._a1.v});let n=parseInt(getComputedStyle(s).top,10);t._w(e,i=>{let o=i.pageY-e.pageY;(o+=n)<=-a?o=-a:o>=l-a&&(o=l-a),s.style.top=o+"px";let d=(o+a)/l*360;t._a4({h:d,s:t._a1.s,v:t._a1.v},null,!0)})},"_b_<mousedown>"(e){let t=e.eventTarget,i=this,s=y.node("ai_"+i.id),l=y.node("at_"+i.id).clientWidth,a=s.clientWidth/2,o=t.getBoundingClientRect(),d=(e.pageX-o.left)/l*255|0;i._a5=("0"+d.toString(16)).slice(-2),i._a6(d),i._a3();let n=getComputedStyle(s),r=parseInt(n.left,10);i._w(e,t=>{let o=t.pageX-e.pageX;(o+=r)<=-a?o=-a:o>=l-a&&(o=l-a),s.style.left=o+"px";let d=j((o+a)/l*255);i._a5=("0"+d.toString(16)).slice(-2),i._a3()})},"_ba<click>"(){let e=this;e._y();let t=y.node("v_"+e.id).value;t!=e._ae&&(e.digest({color:t,current:t}),y.dispatch(e.root,"input",{color:e._ae=t}))},"_bb<click>"(e){this._a7(e.params.color),e.eventTarget.classList.add("d-aS")},_bc(e){return y.inside(e,this.root)},async _x(){let e=y.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",w._bd(this),y.node("root_"+this.id).classList.add("d-c"),this._be||(await this.digest({renderUI:!0}),this._be=1),this._a7(this._ae))},_y(){let e=y.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(y.node("root_"+this.id).classList.remove("d-c"),e.style.display="none",w._aY(this))},"_bf<click>"(){if(this.get("disabled"))return;let e=y.node("bd_"+this.id);"none"==getComputedStyle(e).display?this._x():this._y()},"_bg<click>"(){if(this.get("disabled"))return;let e=this;if(e._be){let t=y.node("v_"+e.id).value;e._y(),e.digest({color:"",current:t})}else e.digest({color:""});y.dispatch(e.root,"input",{color:e._ae=""})}}).merge(v)}),define("gallery/mx-color/series",["magix","./index"],(e,t,i)=>{e("./index");let s={class:"d-a5"};const l=e("magix");l.applyStyle("d-j",".d-a5{display:flex;margin:5px 0;align-items:center}.d-a6{flex-basis:24px;text-align:right;color:#333;font-size:12px}.d-a7,.d-a6{cursor:pointer}.d-a8{cursor:not-allowed;color:#bbb}");let a=["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];i.exports=l.View.extend({tmpl:(e,t,i,l,a,o,d)=>{let n,r,p,c,h,g,u=[],{colors:x,disabled:m,i18n:f}=e;for(let e=x.length,b=0;b<e;b+=1){c="gallery/mx-color/index?color="+d(o,x[b],"\x1ef."+b)+"&align=right",(n=m)&&(c+="&disabled="+a(n)),p=[t("div",{"mx5-owner":i,$:"colors",class:"d-u","mx5-input":i+"\x1e_bh({index:"+l(b)+"})","mx5-view":c})],g=[t(0,"\ue600")],h="d-_ d-a6",m&&(h+=" d-a8"),p.push(t("i",{title:l(f("ad")),"mx5-click":i+"\x1e_bj({index:"+l(b)+"})",class:h},g)),r=[t("div",s,p)],u.push(...r)}return r=[t(0,"\ue606")],h="d-_ d-a7",(m||x.length>9)&&(h+=" d-a8"),u.push(t("i",{title:l(f("ae")),"mx5-click":i+"\x1e_bi()",class:h},r)),t(i,0,u)},assign(e){this.set(e)},render(){this.digest()},"_bh<input>"(e){let t=this.get("colors"),{index:i}=e.params;t[i]=e.color,l.dispatch(this.root,"change")},"_bi<click>"(){if(this.get("disabled"))return;let e=this.get("colors");if(e.length>9)return;let t=a[Math.floor(a.length*Math.random())];e.push(t),l.dispatch(this.root,"change")},"_bj<click>"(e){if(this.get("disabled"))return;let t=this.get("colors"),{index:i}=e.params;t.splice(i,1),l.dispatch(this.root,"change")}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{let s={class:"d-g"},l={class:"d-m"},a={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"};const d=e("magix"),n=e("../../i18n/index");i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{title:c,body:h,i18n:g}=e;return r=[t(0,d(c))],n=[t("h5",l,r)],p.push(t("div",s,n)),n=[t(0,d(h))],p.push(t("div",a,n)),r=[t(0,d(g("ag")))],n=[t("button",{"mx5-click":i+"\x1e_ba()",class:"d-A d-e d-f",type:"button"},r)],p.push(t("div",o,n)),t(i,0,p)},init(e){this._J=e.dialog,this._bk=e.body,this._bl=e.title||n("af"),this._bm=e.enter},render(){this.digest({body:this._bk,title:this._bl})},"_ba<click>"(){let e=this;e._J.close(),e._bm&&d.toTry(e._bm)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{let s={class:"d-g"},l={class:"d-m"},a={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"};const d=e("magix"),n=e("../../i18n/index");i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{title:c,body:h,i18n:g}=e;return r=[t(0,d(c))],n=[t("h5",l,r)],p.push(t("div",s,n)),n=[t(0,d(h))],p.push(t("div",a,n)),r=[t(0,d(g("c")))],n=[t("button",{type:"button","mx5-click":i+"\x1e_K()",class:"d-A d-e"},r)],r=[t(0,d(g("ag")))],n.push(t("button",{type:"button","mx5-click":i+"\x1e_ba()",class:"d-A d-e d-f d-t"},r)),p.push(t("div",o,n)),t(i,0,p)},init(e){let t=this;t._J=e.dialog,t._bk=e.body,t._bl=e.title||n("af"),t._bm=e.enter,t._bn=e.cancel},render(){this.digest({body:this._bk,title:this._bl})},"_ba<click>"(){let e=this;e._J.close(),e._bm&&d.toTry(e._bm)},"_K<click>"(){let e=this;e._J.close(),e._bn&&d.toTry(e._bn)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{let s;const l=e("magix");e("./alert"),e("./confirm"),l.applyStyle("d-k",".d-a9{position:absolute}.d-b_{position:relative;border-radius:2px;border:1px solid #e6e6e6;background-color:#fff}.d-ba{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.d-ba:focus,.d-ba:hover{opacity:.5}.d-bb{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.d-bc{filter:blur(3px)}.d-bd{-webkit-animation:d-b .3s;animation:d-b .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.d-be{position:absolute;right:10px;top:0;width:1px;height:0}.d-be:focus{outline:none}.d-bf{padding:80px 0}@-webkit-keyframes d-b{0%{opacity:0}to{opacity:.2}}@keyframes d-b{0%{opacity:0}to{opacity:.2}}.d-bg{-webkit-animation:d-c .2s;animation:d-c .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-c{0%{opacity:.2}to{opacity:0}}@keyframes d-c{0%{opacity:.2}to{opacity:0}}.d-bh{margin-bottom:50px;min-height:60px}.d-bi{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.d-bj{-webkit-animation:d-d .3s;animation:d-d .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes d-d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.d-bk{-webkit-animation:d-e .2s;animation:d-e .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes d-e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let a=500,o=[],d=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d,n,r,p=[],{removeClass:c,zIndex:h,left:g,top:u,width:x,closable:m}=e;return a="d-bb",c||(a+=" d-bd"),p.push(t("div",{style:"z-index:"+l(h-1),id:"mask_"+i,class:a})),(d=[]).push(t("input",{id:"focus_"+i,class:"d-be"},1)),m&&(r=[t(0,"\ue624")],n=[t("span",{class:"d-_ d-ba","mx5-click":i+"\x1e_br()"},r)],d.push(...n)),s?n=[s]:(r=[t("span",{class:"d-k"})],n=[s=t("div",{_:"_",class:"d-bf d-j"},r)]),d.push(t("div",{class:"d-b_ d-bh",id:"cnt_"+i},n)),a="d-a9",c||(a+=" d-bj"),o=[t("div",{id:"body_"+i,style:"left:"+l(g)+";top:"+l(u)+";width:"+l(x)+"px",class:a},d)],p.push(t("div",{class:"d-bi",style:"z-index:"+l(h)},o)),t(i,0,p)},init(e){let t=this,i=l.node("app"),s=t.root;t.on("destroy",()=>{(e=>{for(let t,i=o.length-1;i>=0;i--)if((t=o[i]).id==e.id){o.splice(i,1);break}})(t),500==(a-=2)&&i.classList.remove("d-bc"),l.dispatch(s,"close"),s.parentNode.removeChild(s)}),l.has(e,"closable")||(e.closable=!0),t.set(e),500!=a||navigator.userAgent.includes("Firefox")||i.classList.add("d-bc"),a+=2,o.push(t)},async render(){let e=this;await e.digest({zIndex:a});let t=e.get(),i=l.mark(e,"_aT");setTimeout(()=>{i()&&(e.root.style.display="block",l.node("focus_"+e.id).focus())},30),e.owner.mount(l.node("cnt_"+e.id),t.view,t),setTimeout(()=>{i()&&e.digest({removeClass:!0})},300)},_bo(e){let t=l.node("cnt_"+this.id);l.Vframe.byNode(t).invoke("fire",["unload",e])},_bp(){let e,t=this.id;(e=l.node("body_"+t)).classList.add("d-bk"),(e=l.node("mask_"+t)).classList.add("d-bg")},"_br<click>"(){l.dispatch(this.root,"_bq")},"$doc<keyup>"(e){if("Escape"==e.code){let e=o[o.length-1];e==this&&e.get("closable")&&l.dispatch(this.root,"_bq")}}});Object.assign(d,{_bt(e,t){let i=l.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" class="d-p" />');let s,a=l.node(i),o=e.owner.mount(a,"gallery/mx-dialog/index",t);return a.addEventListener("_bq",async()=>{if(!a._bs&&!s){let e=()=>{a._bs=1,o.invoke("_bp"),setTimeout(()=>{o.unmount()},200)},t={p:0,prevent(){s=1},resolve(){t.p=1,s=0,e()},reject(){t.p=1,s=0}};await o.invoke("_bo",[t]),s||t.p||e()}}),a},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,s,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancel:i,enter:t,title:s,modal:!0,width:300,top:"calc(50vh - 120px)",closable:!1})},mxDialog(e,t){let i,s,a=this,o={view:e},d=l.mark(this,"_J");return l.use(e,()=>{let n="$dlg_"+e;!a[n]&&d()&&(a[n]=1,Object.assign(o,t),o.width||(o.width=500),null==o.left&&(o.left=`calc(50vw - ${o.width/2}px)`),null==o.top&&(o.top="100px"),o.dialog={close(){i&&l.dispatch(i,"_bq")}},(i=a._bt(a,o)).addEventListener("close",()=>{delete a[n],s&&s()}))}),{close(){i&&l.dispatch(i,"_bq")},whenClose(e){s=e}}}}),i.exports=d}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{let s=window.getComputedStyle,l=e=>{(e=window.getSelection)&&e().removeAllRanges()},a=e=>{e.preventDefault()},o=["mousemove"],d=["mouseup"],n=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];i.exports={ctor(){let e=this;e.on("destroy",()=>{e._bu()})},_bu(e){let t=this;if(t._bv){let i;for(i of o)document.removeEventListener(i,t._bv);for(i of d)document.removeEventListener(i,t._bw);for(i of n)document.removeEventListener(i,a);window.removeEventListener("blur",t._bw),delete t._bv;let s=t._bx;s&&s(e)}},_w(e,t,i){let s=this;if(s._bu(),e){let e;for(e of(l(),s._bx=i,s._bw=s._bu.bind(s),s._bv=(e=>{t&&t(e)}),o))document.addEventListener(e,s._bv);for(e of d)document.addEventListener(e,s._bw);for(e of n)document.addEventListener(e,a,{passive:!1});window.addEventListener("blur",s._bw)}},_ax(e,t){let i=null;if(document.elementFromPoint)for(!a._by&&s&&(a._by=!0,a._bz=null!==document.elementFromPoint(-1,-1)),a._bz&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},_bA:l}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,l={class:"d-_ d-bx"},a={class:"d-bs"};const o=e("magix"),d=e("../mx-monitor/index");o.applyStyle("d-l",".d-bl{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.d-bl:hover{border-color:#ccc}.d-bm{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.d-bn{cursor:not-allowed;background-color:#f5f5f5}.d-bn:hover{border-color:#e6e6e6}.d-bn .d-bm{cursor:not-allowed}.d-bo{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.d-bp .d-bo{transform:rotate(180deg);top:0}.d-bp,.d-bp:hover{border-color:#fa742b}.d-bq{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.d-br{color:#999}.d-bs{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-bp .d-bs{display:block}.d-bt{overflow:auto;max-height:196px;padding:2px 0}.d-bu{padding:0 2px;margin:2px 0}.d-bv{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.d-bv:hover{color:#333;background-color:#f0f0f0}.d-bw,.d-bw:active,.d-bw:focus,.d-bw:hover{color:#fff;background-color:#fa742b}.d-bx{padding:0 4px;font-size:12px}"),i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r)=>{let p,c,h,g,u,x,m,f,b,_,y,v=[],{disabled:w,selectedText:k,selected:S,emptyText:z,selectedIcon:j,rList:T,list:L,textKey:I,valueKey:A,iconKey:R}=e;if(c=[],g=[],j&&(x=[t(0,o(j),1)],u=[t("i",l,x)],g.push(...u)),g.push(t(0,o(k))),p="d-bq",""!==S&&S!=z||(p+=" d-br"),h=[t("span",{class:p},g)],s?h.push(s):(g=[t(0,"\ue692")],h.push(s=t("span",{_:"_",class:"d-_ d-bo"},g))),c.push(t("div",{class:"d-bm","mx5-click":i+"\x1e_bf()",title:o(k)},h)),T){u=[];for(let e=L.length,s=0;s<e;s+=1){let e=L[s];x=[];let a,d=e,c=e;I&&A&&(m="",d=e[I],m+=" ",c=e[A],m+=" ",a=e[R]);let h=c+""==S+"";b=[],a&&(y=[t(0,o(a),1)],_=[t("i",l,y)],b.push(..._)),b.push(t(0,o(d))),p="d-bv d-J",h&&(p+=" d-bw"),f=[t("span",{"mx5-click":i+"\x1e_bB({item:'"+r(n,e,"\x1eg."+s)+"'})",class:p},b)],x.push(t("li",{title:o(d),active:h,class:"d-bu"},f)),u.push(...x)}g=[t("ul",{class:"d-bt d-n",id:"list_"+i},u)],h=[t("div",a,g)],c.push(...h)}return p="d-bl",w&&(p+=" d-bn"),v.push(t("div",{id:"dd_"+i,class:p},c)),t(i,0,v)},init(){d._aX(),this.on("destroy",()=>{d._aY(this),d._aZ()})},assign(e){let t=e.selected,i=e.textKey||"",s=e.valueKey||"",l=e.iconKey||"",a=e.emptyText||"",d=e.disabled+""=="true",n=e.list||[];n=n.slice();let r=o.toMap(n,s);if(a)if(i&&s){if(!r[""]){let e={};e[i]=a,e[s]="",n.unshift(e),r[""]=e}}else r[a]||(n.unshift(a),r[a]=a);t||!a||i||s||(t=a),t&&r[t]||(t=r[t]||n[0],i&&s&&(t=t[s]));let p=i&&s?r[t][i]:t,c=l?r[t][l]:"";this.set({selected:t,selectedText:p,selectedIcon:c,list:n,iconKey:l,textKey:i,valueKey:s,emptyText:a,disabled:d})},render(){this.digest()},_bc(e){return o.inside(e,this.root)},async _x(){let e=this,t=o.node("dd_"+e.id);if(!t.classList.contains("d-bp")){t.classList.add("d-bp"),e.get("rList")||await e.digest({rList:!0});let i=(t=o.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded(),d._bd(e)}},_y(){let e=this,t=o.node("dd_"+e.id);t.classList.contains("d-bp")&&(t.classList.remove("d-bp"),d._aY(e))},"_bf<click>"(){let e=this,t=o.node("dd_"+e.id);t.classList.contains("d-bp")?e._y():t.classList.contains("d-bn")||e._x()},"_bB<click>"(e){let t=this;t._y();let i=t.get("valueKey"),s=t.get("textKey"),l=t.get("iconKey"),a=t.get("selected"),d=e.params.item,n=d,r=d,p="";s&&i&&(r=d[s],n=d[i],p=d[l]),a!==n&&(t.digest({selected:n,selectedIcon:p,selectedText:r}),o.dispatch(t.root,"change",{item:d,value:i?d[i]:d,text:s?d[s]:d}))}})}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-m",".d-by{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.d-bz{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.d-bz:hover{background:#ccc}.d-bA,.d-bA:hover{background:#fa742b;color:#fff}.d-bB,.d-bB .d-bz{cursor:not-allowed;opacity:.7}.d-bB .d-bz,.d-bB .d-bz:hover{background:#e9e9e9}.d-bB .d-bA,.d-bB .d-bA:hover{background:#fb955d}"),i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a,o,d=[],{disabled:n,i18n:r,value:p}=e;return o=[t(0,"\ue687")],l="d-z d-bz d-_","flex-start"==p.hpos&&(l+=" d-bA"),a=[t("li",{title:s(r("ah")),"mx5-click":i+"\x1e_8({type:'h',v:'flex-start'})",class:l},o)],o=[t(0,"\ue68a")],l="d-z d-bz d-_","center"==p.hpos&&(l+=" d-bA"),a.push(t("li",{title:s(r("ai")),"mx5-click":i+"\x1e_8({type:'h',v:'center'})",class:l},o)),o=[t(0,"\ue686")],l="d-z d-bz d-_","flex-end"==p.hpos&&(l+=" d-bA"),a.push(t("li",{title:s(r("aj")),"mx5-click":i+"\x1e_8({type:'h',v:'flex-end'})",class:l},o)),o=[t(0,"\ue614")],l="d-z d-bz d-_","flex-start"==p.vpos&&(l+=" d-bA"),a.push(t("li",{title:s(r("ak")),"mx5-click":i+"\x1e_8({type:'v',v:'flex-start'})",class:l},o)),o=[t(0,"\ue613")],l="d-z d-bz d-_","center"==p.vpos&&(l+=" d-bA"),a.push(t("li",{title:s(r("al")),"mx5-click":i+"\x1e_8({type:'v',v:'center'})",class:l},o)),o=[t(0,"\ue612")],l="d-z d-bz d-_","flex-end"==p.vpos&&(l+=" d-bA"),a.push(t("li",{title:s(r("am")),"mx5-click":i+"\x1e_8({type:'v',v:'flex-end'})",class:l},o)),l="d-n d-G d-by",n&&(l+=" d-bB"),d.push(t("ul",{class:l},a)),t(i,0,d)},assign(e){return this._bC=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_8<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bC,{type:l,v:a}=e.params;i[l+"pos"]=a,t._bC=i,t.digest({value:i}),s.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-m",".d-by{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.d-bz{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.d-bz:hover{background:#ccc}.d-bA,.d-bA:hover{background:#fa742b;color:#fff}.d-bB,.d-bB .d-bz{cursor:not-allowed;opacity:.7}.d-bB .d-bz,.d-bB .d-bz:hover{background:#e9e9e9}.d-bB .d-bA,.d-bB .d-bA:hover{background:#fb955d}"),i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a,o,d=[],{disabled:n,i18n:r,value:p}=e;return o=[t(0,"\ue749")],l="d-z d-bz d-_",p.styleBold&&(l+=" d-bA"),a=[t("li",{title:s(r("an")),"mx5-click":i+"\x1e_8({key:'styleBold'})",class:l},o)],o=[t(0,"\ue65f")],l="d-z d-bz d-_",p.styleItalic&&(l+=" d-bA"),a.push(t("li",{title:s(r("ao")),"mx5-click":i+"\x1e_8({key:'styleItalic'})",class:l},o)),o=[t(0,"\ue62e")],l="d-z d-bz d-_",p.styleUnderline&&(l+=" d-bA"),a.push(t("li",{title:s(r("ap")),"mx5-click":i+"\x1e_8({key:'styleUnderline'})",class:l},o)),l="d-n d-G d-by",n&&(l+=" d-bB"),d.push(t("ul",{class:l},a)),t(i,0,d)},assign(e){return this._bC=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_8<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bC,{key:l}=e.params;i[l]=!i[l],t._bC=i,t.digest({value:i}),s.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-layout/column",["magix","../mx-number/index"],(e,t,i)=>{e("../mx-number/index");let s={class:"d-bC"};const l=e("magix");l.applyStyle("d-n",".d-bC{display:flex;margin:5px 0;align-items:center}.d-bD{flex-basis:24px;text-align:right;color:#333;font-size:12px}.d-bE,.d-bD{cursor:pointer}.d-bF{cursor:not-allowed;color:#bbb}"),i.exports=l.View.extend({tmpl:(e,t,i,l,a,o,d)=>{let n,r,p,c,h,g=[],{columns:u,disabled:x,i18n:m}=e;for(let e=u.length,a=0;a<e;a+=1){let e=u[a];(r=[]).push(t("div",{"mx5-owner":i,$:"columns",disabled:x,"mx5-input":i+"\x1e_bE({index:"+l(a)+"})","mx5-change":i+"\x1e_bD()",class:"d-B d-a","mx5-view":"gallery/mx-number/index?value="+d(o,e.width,"\x1eh."+a+".i")+"&max=100&min=0&step=1"})),u.length>1&&(h=[t(0,"\ue600")],c="d-_ d-bD",x&&(c+=" d-bF"),p=[t("i",{title:l(m("aq")),"mx5-click":i+"\x1e_bG({index:"+l(a)+"})",class:c},h)],r.push(...p)),n=[t("div",s,r)],g.push(...n)}return n=[t(0,"\ue606")],c="d-_ d-bE",(x||u.length>9)&&(c+=" d-bF"),g.push(t("i",{title:l(m("ar")),"mx5-click":i+"\x1e_bF()",class:c},n)),t(i,0,g)},assign(e){this.set(e)},render(){this.digest()},"_bD<change>"(e){e.stopPropagation()},"_bE<input>"(e){let t=this.get("columns"),{index:i}=e.params;t[i].width=e.value,l.dispatch(this.root,"change")},"_bF<click>"(){if(this.get("disabled"))return;let e=this.get("columns");if(e.length>9)return;let t=0;for(let i of e)t+=i.width;if(t>=100)for(let t of e)if(t.width>10){t.width-=10;break}e.push({width:10,elements:[]}),this.digest({columns:e}),l.dispatch(this.root,"change")},"_bG<click>"(e){if(this.get("disabled"))return;let t=this.get("columns"),{index:i}=e.params;t.splice(i,1),this.digest({columns:t}),l.dispatch(this.root,"change")}})}),define("gallery/mx-layout/guage",["magix","../mx-number/index"],(e,t,i)=>{e("../mx-number/index");let s={class:"d-bG"},l={class:"d-bH"};const a=e("magix");a.applyStyle("d-o",".d-bG{display:flex;align-items:center}.d-bH{width:30px}");let o=["as","at","au","av"];i.exports=a.View.extend({tmpl:(e,t,i,a,o,d,n)=>{let r,p,c,h=[],{i18n:g,titles:u,disabled:x,guage:m}=e;for(let e=0;e<4;e++)c=[t(0,a(g(u[e])))],p=[t("div",l,c),t("div",{"mx5-owner":i,$:"guage",disabled:x,"mx5-input":i+"\x1e_bE({index:"+a(e)+"})","mx5-change":i+"\x1e_bD()",class:"d-B d-a","mx5-view":"gallery/mx-number/index?max=500&min=0&value="+n(d,m[e],"\x1ej."+e)})],r=[t("div",s,p)],h.push(...r);return t(i,0,h)},init(){this.set({titles:o})},assign(e){let{guage:t,disabled:i}=e,s=t.split(" "),l=[];for(let e of s)l.push(parseInt(e,10));return this.set({disabled:i,guage:l}),!0},render(){this.digest()},"_bD<change>"(e){e.stopPropagation()},"_bE<input>"(e){e.stopPropagation();let t=this.get("guage"),{index:i}=e.params;t[i]=e.value,a.dispatch(this.root,"change",{value:t.join("px ")+"px"})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,l={class:"d-G d-bJ"};const a=e("magix"),o=e("../mx-monitor/index");a.applyStyle("d-p",".d-bI{z-index:400}.d-bJ{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.d-bK{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 8px;margin:2px}.d-bL{color:#fff;background-color:#fa742b}.d-bM{height:1px;background:#eee;margin:4px 0}.d-bN{color:#ccc;cursor:not-allowed}"),i.exports=a.View.extend({tmpl:(e,t,i,a,o,d,n)=>{let r,p,c,h,g,u,x=[],{width:m,list:f,disabled:b,textKey:_}=e;p=[];for(let e=f.length,l=0;l<e;l+=1){let e=f[l];c=[],e.spliter?(h=s?[s]:[s=t("li",{_:"_",class:"d-bM"})],c.push(...h)):(u=[t(0,a(e[_]))],g="d-J d-bK ",b[e.id]&&(g+=" d-bN"),h=[t("li",{"mx5-mouseover":i+"\x1e\x1e_bO({d:"+a(b[e.id]||0)+"})","mx5-mouseout":i+"\x1e\x1e_bO({d:"+a(b[e.id]||0)+"})","mx5-click":i+"\x1e\x1e_bB({item:'"+n(d,e,"\x1eg."+l)+"',d:"+a(b[e.id]||0)+"})",title:a(e[_]),class:g},u)],c.push(...h)),p.push(...c)}return r=[t("ul",l,p)],x.push(t("div",{style:"width:"+a(m)+"px;position:absolute;left:-10000px;top:-10000px",class:"d-bI",id:"cnt_"+i,"mx5-contextmenu":i+"\x1e_A()"},r)),t(i,0,x)},init(e){let t=this;o._aX(),t.on("destroy",()=>{o._aY(t),o._aZ()})},assign(e){let t=this,i=e.width||140,s=e.valueKey||"id",l=e.textKey||"text";t._bH=e.list,t._bI=i,t._bJ=s,t._bK=l,t._bL=e.disabled||{},t._bM=e.picked},async render(e){let t=this;await t.digest({disabled:t._bL,list:t._bH,width:t._bI,valueKey:t._bJ,textKey:t._bK}),e&&this._x(e)},_bc(e){return a.inside(e,this.root)},_x(e){let t=this;if(!t._bN){t._bN=1;let i=a.node("cnt_"+t.id),s=i.clientWidth,l=i.clientHeight,d=e.pageX,n=e.pageY;d+s>window.innerWidth&&(d-=s)<0&&(d=0),n+l>window.innerHeight&&(n-=l)<0&&(n=0),i.style.left=d+"px",i.style.top=n+"px",o._bd(t)}},_y(){let e=this;if(e._bN){e._bN=!1,a.node("cnt_"+e.id).style.left="-10000px",o._aY(e)}},"_bO<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!a.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("d-bL")},"_bB<click>"(e){if(e.params.d)return;this._y();let t=this._bM;t&&t(e.params.item)},"_A<contextmenu>"(e){e.preventDefault()}}).static({show(e,t,i){let s="ctx_"+e.id,l=a.node(s),o=l&&a.Vframe.byNode(l);o?(o.invoke("assign",[i]),o.invoke("render",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${s}"></div>`),(o=e.owner.mount(a.node(s),"gallery/mx-menu/index",i)).invoke("_x",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{let s=0,l=[],a=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=l.length;t--;){let i=l[t];if(i._bP)l.splice(t,1);else{let t=i._bQ;"resize"!=e.type&&t._bc(e.target)||t._y()}}},d=e=>{let t=l[e.id];t&&(t._bP=!0),delete l[e.id]};i.exports={_bd(e){d(e);let t={_bQ:e};l.push(t),l[e.id]=t},_aY:d,_aX(){if(!s){for(let e of a)document.addEventListener(e,o);window.addEventListener("resize",o)}s++},_aZ(){if(s>0&&!--s){for(let e of a)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-q",'.d-bO{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block;padding:0 20px 0 0;font-size:100%}.d-bO:focus{outline:none}.d-bP,.d-bQ{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.d-bP:hover,.d-bQ:hover{background-color:#f0f0f0}.d-bQ{top:1px}.d-bP{bottom:1px}.d-bR:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.d-bP:after{border-top:4px solid #ccc}.d-bQ:after{border-bottom:4px solid #ccc}.d-bP.d-bS,.d-bQ.d-bS{cursor:not-allowed;border-color:transparent}.d-bP.d-bS:hover,.d-bQ.d-bS:hover{background-color:transparent}'),i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,l=[],{disabled:a}=e;return l.push(t("input",{class:"d-bO",id:"ipt_"+i,"mx5-focusin":i+"\x1e_b9()","mx5-focusout":i+"\x1e_ca()","mx5-change":i+"\x1e_b8()","mx5-keydown":i+"\x1e_cg()",disabled:a,autocomplete:"off","mx5-input":i+"\x1e_ci()","mx5-mousewheel":i+"\x1e_ch()"},1)),s="d-bQ d-bR d-G",a&&(s+=" d-bS"),l.push(t("span",{"mx5-click":i+"\x1e_b4({i:1})","mx5-mousedown":i+"\x1e_cf({i:1})","mx5-contextmenu":i+"\x1e_A()",class:s})),s="d-bP d-bR d-G",a&&(s+=" d-bS"),l.push(t("span",{"mx5-click":i+"\x1e_b4()","mx5-mousedown":i+"\x1e_cf()","mx5-contextmenu":i+"\x1e_A()",class:s})),t(i,0,l)},assign(e){let t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);let l=t._bR!==i,a=t._bS;return t._bR=i,t._bT=+e.step||1,t._bU=e.empty+""=="true",t._bV=e.format+""=="true",t._bS=t.root.hasAttribute("disabled"),t._bW=s.has(e,"max")?+e.max:Number.MAX_VALUE,t._bX=s.has(e,"min")?+e.min:-Number.MAX_VALUE,t._bY=+e.ratio||10,t._bZ=+e.fixed||0,l||a!=t._bS},async render(){let e=this,t=s.mark(this,"_aT");await e.digest({disabled:e._bS}),t()&&!e.root.classList.contains("d-c")&&e._b0()},_b0(){let e=this,t=e._bR;""!==t&&(t=e._b1(t),e._bV&&(t=t.toFixed(e._bZ))),e._b2=s.node("ipt_"+e.id),e._b2.value=t},_b1(e){let t=this;if((e=+e)||0===e){let i=t._bW,s=t._bX;e>i?e=i:e<s&&(e=s),e=+e.toFixed(t._bZ)}return isNaN(e)?t._bU?"":0:e},_b3(e,t){let i=this;if(""!==e||!i._bU)return(e=i._b1(e))!==i._bR&&(t||(i._b2.value=e),s.dispatch(i.root,"input",{value:i._bR=e})),i._bR;s.dispatch(i.root,"input",{value:i._bR=e})},_b4(e,t){let i=this._bR;""===i&&(i=0);let s=this._bT,l=i;t&&(s*=this._bY),e?l+=s:l-=s,this._b3(l)},_b5(){let e=this._b2;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},_b7(){let e=this;e.root.classList.add("d-c"),s.has(e,"_b6")||(e._b6=e._bR)},"_b8<change>"(e){e.stopPropagation()},"_b9<focusin>"(){this._b7()},"_ca<focusout>"(e){let t=this;t._c_||(t.root.classList.remove("d-c"),t._b0(),t._b6!=t._bR&&s.dispatch(t.root,"change",{value:t._bR}),delete t._b6)},"_b4<click>"(e){let t=this;t._bS||t._cb||(t._b4(e.params.i,e.shiftKey),t._b5())},"_cf<mousedown>"(e){let t=this;if(!t._bS){t._c_=!0,t._b7();let i=e.params.i,l=s.mark(this,"_cc");t._cd=setTimeout(()=>{l()&&(t._ce=setInterval(()=>{l()&&(t._cb=!0,t._b4(i),t._b5())},50))},300)}},"_cg<keydown>"(e){if("ArrowUp"==e.code||"ArrowDown"==e.code){e.preventDefault();let t=this;if(!t._bS){let i=e.eventTarget.value;if(""===i)t._bR="";else{let e=Number(i);(e||0===e)&&e!=t._bR&&(t._bR=e)}t._b4("ArrowUp"==e.code,e.shiftKey)}}},"_ch<mousewheel>&{passive:false}"(e){if(this.root.classList.contains("d-c")){e.preventDefault();let t=e.deltaY;this._b4(t>0)}},"_A<contextmenu>"(e){e.preventDefault()},"_ci<input>"(e){e.stopPropagation();let t=e.eventTarget;this._b3(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e._cd),clearInterval(e._ce),delete e._c_;let t=s.mark(this,"@:mouseup");setTimeout(()=>{t()&&delete e._cb},0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{let s={class:"d-bU"};const l=e("magix"),a=e("../mx-dialog/index");l.applyStyle("d-r",".d-bT{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0;border-radius:2px}.d-bT:hover{border-color:#ccc}.d-bU{line-height:92px;text-align:center;color:#999}.d-bV{min-height:500px}.d-bW{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.d-bW:hover{border-color:#999}.d-bX{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.d-bY{width:100px;margin:0 5px;height:25px}.d-bZ{position:absolute;right:3px;top:2px;opacity:.2}.d-bZ:hover{opacity:.5}.d-b0{background:#f5f5f5;cursor:not-allowed}.d-b0 .d-bZ,.d-b0 .d-bZ:hover{opacity:.1}.d-b0:hover{border-color:#e6e6e6}.d-b1{margin-bottom:10px;border-bottom:1px solid #fca576}.d-b2{float:left;height:25px;line-height:25px;padding:0 4px;cursor:pointer;margin:0 5px -1px;transition:all .25s}.d-b3{background:#fca576;border-radius:2px 2px 0 0}"),i.exports=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d,n,r,p=[],{disabled:c,src:h,i18n:g}=e;return o=[],h?(r=[t(0,"\ue624")],n=[t("i",{class:"d-_ d-bZ","mx5-click":!c&&i+"\x1e_cl()",title:l(g("aw"))},r)],d=[t("div",{class:"d-bX",style:"background-image:url('"+l(h)+"')"},n)],o.push(...d)):(n=[t(0,l(g("ax")))],d=[t("div",s,n)],o.push(...d)),a="d-bT d-B",c&&(a+=" d-b0"),p.push(t("div",{"mx5-click":!c&&i+"\x1e_ck()",class:a},o)),t(i,0,p)},assign(e){this.set(e)},render(){this.digest()},"_ck<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,closable:!1,done(t){e._cj(t)}})},_cj(e){l.dispatch(this.root,"change",e)},"_cl<click>"(e){this._cj({src:"",width:0,height:0})}}).merge(a)}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{let s={class:"d-P d-g"},l={class:"d-m"},a={class:"d-F d-bV d-h"},o={class:"d-C d-D d-y"},d={class:"d-F d-b1"},n={class:"d-J d-bY d-y"};const r=e("magix"),p=e("../../designer/service"),c=e("../../i18n/index");i.exports=r.View.extend({tmpl:(e,t,i,r,p,c,h,g)=>{let u,x,m,f,b,_,y=[],{i18n:v,error:w,list:k,cIndex:S}=e;if(x=[t(0,r(v("az")))],u=[t("h5",l,x)],x=[t(0,"\ue624")],u.push(t("span",{class:"d-_ d-ba","mx5-click":i+"\x1e_br()"},x)),y.push(t("div",s,u)),u=[],w)m=[t(0,r(w.msg))],x=[t("div",o,m)],u.push(...x);else{x=[],m=[];for(let e=k.length,s=0;s<e;s+=1){_=[t(0,r(k[s].title))],b="d-b2",s==S&&(b+=" d-b3"),f=[t("div",{"mx5-click":s!=S&&i+"\x1e_co({to:"+r(s)+"})",class:b},_)],m.push(...f)}x.push(t("div",d,m));for(let e=k[S].list,s=e.length,l=0;l<s;l+=1){let s=e[l];_=[t("div",{class:"d-bX",style:"background-image:url('"+r(s.src)+"')"})],f=[t("div",{class:"d-bW","mx5-click":i+"\x1e_cn({src:'"+g(s.src)+"'})"},_)],_=[t(0,r(s.title))],f.push(t("div",n,_)),m=[t("div",{class:"d-z",title:r(s.title)},f)],x.push(...m)}u.push(...x)}return y.push(t("div",a,u)),t(i,0,y)},init(e){this._J=e.dialog,this._cm=e.done,this.set({cIndex:0})},render(){let e=r.mark(this,"_aT");this.fetch("_aq",(t,i)=>{e()&&this.digest({error:t,list:i.get("data",[])})})},"_cn<click>"(e){let t=this,i=new Image,s=t._cm,l=e.params.src,a=r.mark(this,"_cn");i.onerror=(()=>{a()&&t.alert(c("ay"))}),i.onload=(()=>{if(a()){let e=i.width,a=i.height;t._J.close(),s({src:l,width:e,height:a})}}),i.src=l},"_co<click>"(e){let{to:t}=e.params;this.digest({cIndex:t})},"_br<click>"(){this._J.close()}}).merge(p)}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{const s=e("magix"),l=s.guid("cursor_");s.applyStyle("d-s",".d-b4{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),i.exports={_x(e){let t=getComputedStyle(e);this._cp(t.cursor)},_cp(e){let t=s.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="d-b4" id="${l}"/>`),t=s.node(l)),t.style.cursor=e,t.style.display="block"},_y(){s.node(l).style.display="none"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-t",".d-b5{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}.d-b6{box-shadow:3px 3px #bb4504}");let l=s.guid("de_");i.exports={_P(e){let t=s.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="d-b5 d-_" id="${l}"/>`),t=s.node(l)),t.innerHTML=e},_x(e,t){let i=s.node(l),a=i.style,o=i.classList;a.left=e.pageX+10+"px",a.top=e.pageY+18+"px",t?o.contains("d-b6")||i.classList.add("d-b6"):o.contains("d-b6")&&i.classList.remove("d-b6")},_y(){let e=s.node(l).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-u",".d-b7{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let l=s.guid("set_");i.exports={_cq(){s.node(l)||document.body.insertAdjacentHTML("beforeend",`<div id="${l}" class="d-b7"></div>`)},_P(e,t,i,a){let o=s.node(l).style;o.left=e+"px",o.top=t+"px",o.width=i+"px",o.height=a+"px",o.display="block"},_y(){s.node(l).style.display="none"}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{const s=e("magix");let l=window.requestAnimationFrame||(e=>setTimeout(e,16)),a=window.cancelAnimationFrame||clearTimeout,o=Date.now;i.exports={_cr:[],_au(e,t){this._cr.push({i:e||15,f:t,n:o()}),this._cs()},_av(e){let t=this._cr;for(let i,s=0;s<t.length;s++)if(!(i=t[s]).r&&i.f==e){i.r=1;break}},_cs(){let e=this;if(!e._ct){let t=()=>{let i=e._cr;for(let e,t,l=0;l<i.length;l++)(e=i[l]).r?i.splice(l--,1):(t=o())-e.n>=e.i&&(e.n=t,s.toTry(e.f));i.length?e._ct=l(t):(a(e._ct),delete e._ct)};e._ct=l(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{const s=e("magix"),l=e("./zh-cn"),a={"zh-cn":l,zh:l},o=s.has,d=/\{(\d+)\}/g;i.exports=((e,...t)=>{let i=(s.config("lang")||navigator.language).toLowerCase();o(a,i)||(i="zh-cn");let l=a[i],n=o(l,e)?l[e]:e;return t.length&&(n=n.replace(d,(e,i,s)=>(i|=0,t.length>i?(s=t[i],o(l,s)?l[s]:s):e))),n})}),define("i18n/zh-cn",[],(e,t,i)=>{i.exports={e:"\u901a\u7528\u8bbe\u8ba1\u5668",g:"\u5b8c\u6574\u4ee3\u7801\u6216\u529f\u80fd\u5b9a\u5236\u8bf7\u8054\u7cfb\u5fae\u4fe1:qq84685009\u3002&copy;2018-"+(new Date).getFullYear(),af:"\u63d0\u793a",ag:"\u786e\u5b9a",c:"\u53d6\u6d88",d:"\u8fd8\u539f",_:"\u5220\u9664\u8f85\u52a9\u7ebf",a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",i:"\u64a4\u9500(Ctrl+Z)",j:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",aA:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",aB:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",aC:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",aD:"\u5c5e\u6027",aE:"\u6570\u636e\u6e90",aF:"\u7ec4\u4ef6\u6811",l:"\u6253\u5f00{0}\u9762\u677f(\u6570\u5b57\u952e{1})",k:"\u5173\u95ed{0}\u9762\u677f(\u6570\u5b57\u952e{1})",aG:"\u5c55\u5f00{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",aH:"\u6298\u53e0{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",n:"\u6253\u5f00\u6240\u6709\u9762\u677f(Shift+Z)",m:"\u5173\u95ed\u6240\u6709\u9762\u677f(Shift+Z)",aI:"\u7c7b\u578b\uff1a",r:"\u80cc\u666f\u989c\u8272\uff1a",Z:"\u6587\u5b57\u989c\u8272\uff1a",t:"\u914d\u8272\uff1a",ad:"\u79fb\u9664\u5f53\u524d\u914d\u8272",ae:"\u6dfb\u52a0\u914d\u8272",h:"\u5220\u9664",ay:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",aw:"\u6e05\u9664\u56fe\u7247",ax:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",az:"\u56fe\u7247\u5e93",ab:"\u6e05\u9664\u989c\u8272",X:"\u5b57\u53f7\uff1a",K:"\u80cc\u666f\u56fe\u7247\uff1a",L:"\u80cc\u666f\u5e73\u94fa\uff1a",M:"\u62c9\u4f38\u94fa\u6ee1",N:"\u539f\u59cb\u5c3a\u5bf8",O:"\u6a2a\u5411\u5e73\u94fa",P:"\u5782\u76f4\u5e73\u94fa",Q:"\u53cc\u5411\u5e73\u94fa",u:"\u9501\u5b9a\u7f16\u8f91\uff1a",I:"\u6700\u5c0f\u5bbd\u5ea6\uff1a",J:"\u6700\u5c0f\u9ad8\u5ea6\uff1a",E:"\u5217\u5206\u914d\uff1a",F:"\u5916\u8fb9\u8ddd\uff1a",G:"\u5185\u8fb9\u8ddd\uff1a",p:"\u9ad8\uff1a",z:"\u56fe\u7247\uff1a",S:"\u56fe\u7247\u5bbd\uff1a",T:"\u56fe\u7247\u9ad8\uff1a",aJ:"\u8fd8\u539f\u5c3a\u5bf8\uff1a",C:"\u6c34\u5e73\u955c\u50cf\uff1a",B:"\u5782\u76f4\u955c\u50cf\uff1a",U:"\u6c34\u5e73(%)\uff1a",V:"\u5782\u76f4(%)\uff1a",D:"\u5e03\u5c40",W:"\u6587\u672c",H:"\u9875\u9762",x:"\u997c\u56fe",v:"\u6298\u7ebf\u56fe",w:"\u4eea\u8868\u76d8",o:"\u67f1\u72b6\u56fe",y:"\u56fe\u7247",R:"\u5e73\u94fa\u56fe",s:"\u56fe\u8868\u6807\u9898\uff1a",ar:"\u70b9\u51fb\u6dfb\u52a0\u5217",aq:"\u70b9\u51fb\u5220\u9664\u5217",q:"\u900f\u660e\u5ea6\uff1a",Y:"\u5b57\u95f4\u8ddd\uff1a",aa:"\u5185\u5bb9\uff1a",a_:"\u6837\u5f0f\uff1a",A:"\u6392\u5217\uff1a",an:"\u52a0\u7c97",ao:"\u659c\u4f53",ap:"\u4e0b\u5212\u7ebf",ah:"\u6c34\u5e73\u5c45\u5de6",ai:"\u6c34\u5e73\u5c45\u4e2d",aj:"\u6c34\u5e73\u5c45\u53f3",ak:"\u5782\u76f4\u5c45\u4e0a",al:"\u5782\u76f4\u5c45\u4e2d",am:"\u5782\u76f4\u5c45\u4e0b",as:"\u4e0a",at:"\u53f3",au:"\u4e0b",av:"\u5de6",ac:"\u786e\u5b9a",b:"\u7f16\u8f91\u533a\u6570\u636e",f:"\u7cfb\u7edf\u6b63\u5fd9..."}}),define("panels/index",["magix"],(e,t,i)=>{const s=e("magix");let l=[{title:"aF",icon:"&#xe629;",show:!0,left:30,top:90,width:200,height:145,resizeY:!0,key:1,id:"p-elements",view:"panels/elements/index"},{title:"aD",icon:"&#xe7a1;",width:240,height:145,right:10,top:90,key:2,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"}],a=s.toMap(l,"id");i.exports={_aa(){let e=!0;for(let t of l){if(!a[t.id]._){e=!1;break}}return e},_ab(){for(let e of l)this._cO(e.id,!0);s.State.fire("o")},_ac(){for(let e of l)this._cP(e.id,!0);s.State.fire("o")},_a_(){for(let e of l)e.show&&this._cP(e.id,!0);s.State.fire("o")},_cP(e,t){let i=a[e];if(!i._){if(i._=1,i.eId)s.node(i.eId).style.display="block";else{i.eId=s.guid("panel_");let e=s.node(s.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=s.Vframe.byNode(e);i.close=(()=>{this._cO(i.id)}),t.mount(s.node(i.eId),"panels/panel",i)}if(!t){s.State.fire("o"),s.Vframe.byNode(s.node(i.eId)).invoke("_x")}}},_cO(e){let t=a[e];if(t._){t._=0;let e=s.node(t.eId);e.style.display="none",s.State.fire("o"),s.Vframe.byNode(e).invoke("_y")}},_6(e){a[e]._?this._cO(e):this._cP(e)},_5(e){let t=a[e];if(t._){let e=s.node(t.eId);s.Vframe.byNode(e).invoke("_cQ")}},_4:()=>l}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{let s={class:"d-F d-G d-cj"},l={class:"d-_ d-ch d-q"},a={class:"d-A d-L d-M d-v"};const o=e("magix"),d=e("../gallery/mx-pointer/cursor"),n=e("../gallery/mx-dragdrop/index");o.applyStyle("d-w",".d-ch{font-size:12px}.d-ci{background:hsla(0,0%,100%,.9333333333333333);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.d-cj{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.d-ck{padding:0 5px;cursor:move;width:calc(100% - 36px)}.d-cl{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.d-cl:hover{background:#bb4504}.d-cm{overflow:hidden;transition:height .25s}.d-cn{transition:none}.d-co{width:calc(100% - 2px);overflow:auto;float:left}.d-cp{width:2px;float:right;cursor:ew-resize}.d-cq,.d-cp{background:#fafafa}.d-cq{height:2px;cursor:ns-resize}");let r=[],p={_bd(e){r.push(e)},_aY(e){for(let t=r.length;t--;)if(r[t]==e){r.splice(t,1);break}this._cR()},_cR(){for(let e=r.length;e--;)r[e]._cS(300+e)},_cT(e){if(r[r.length-1]!=e){for(let t=r.length;t--;)if(r[t]==e){r.splice(t,1);break}r.push(e),this._cR()}}};i.exports=o.View.extend({tmpl:(e,t,i,o)=>{let d,n,r,p,c,h,g=[],{width:u,left:x,right:m,top:f,zIndex:b,i18n:_,icon:y,title:v,shrink:w,key:k,height:S,resizeX:z,view:j,resizeY:T}=e;return c=[t(0,o(y),1)],p=[t("i",l,c),t(0,o(_(v)))],r=[t("div",{class:"d-ck d-z",title:o(_("aA")),"mx5-mousedown":i+"\x1e\x1e_cV()"},p)],c=[t(0,"\ue73a")],h="d-_ d-cl",w&&(h+=" d-r"),p=[t("i",{"mx5-click":i+"\x1e\x1e_cQ()",title:o(_(w?"aG":"aH",v,k)),class:h},c)],c=[t(0,"\ue635")],p.push(t("i",{class:"d-_ d-cl","mx5-click":i+"\x1e\x1e_br()",title:o(_("k",v,k))},c)),r.push(t("div",a,p)),n=[t("div",s,r)],(r=[]).push(t("div",{"mx5-owner":i,style:"width:"+o(z?"calc(100% - 2px)":"100%"),class:"d-G d-H d-I d-co d-v","mx5-view":o(j)})),z||(p=[t("div",{class:"d-G d-cp d-v",title:o(_("aB")),"mx5-mousedown":i+"\x1e\x1e_aV({w:1})"})],r.push(...p)),n.push(t("div",{class:"d-cm",id:"c_"+i,style:"height:"+o(w?0:`calc(100vh - ${S}px)`)},r)),h="d-cq d-G",!w&&T||(h+=" d-E"),n.push(t("div",{title:o(_("aC")),"mx5-mousedown":i+"\x1e\x1e_aV({h:1})",class:h})),d="width:"+o(u)+"px;",d+=0===x||x?"left:"+o(x):"right:"+o(m),d+="px;top:"+o(f)+"px;z-index:"+o(b),g.push(t("div",{class:"d-ci",id:"p_"+i,"mx5-mousedown":i+"\x1e_cW()",style:d},n)),t(i,0,g)},init(e){p._bd(this),this.on("destroy",()=>{p._aY(this)}),this._cU=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,key:e.key,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+r.length})},"_cV<mousedown>"(e){let t=o.node("p_"+this.id).style,i=this.get("left"),s=this.get("width"),l=0;void 0===i&&(l=1,i=this.get("right"));let a=this.get("top"),n=l?"right":"left",r=0,p=e.eventTarget;this._w(e,o=>{r||(r=1,d._x(p));let c=(l?e.pageX-o.pageX:o.pageX-e.pageX)+i;c<0?c=0:c+s>window.innerWidth&&(c=window.innerWidth-s);let h=o.pageY-e.pageY+a;h<0?h=0:h+18>window.innerHeight&&(h=window.innerHeight-18),t[n]=c+"px",t.top=h+"px",this.set({[n]:c,top:h})},()=>{d._y()})},"_aV<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),s=this.get("height"),l=this.get("right"),a=o.node("c_"+this.id);a.classList.add("d-cn");let n=a.style,r=o.node("p_"+this.id).style,p=0,c=e.eventTarget;this._w(e,a=>{if(p||(p=1,d._x(c)),t){let t=a.pageX-e.pageX;t+i<100&&(t=100-i);let o=t+i;r.width=o+"px",(l||0===s)&&(r.right=l-t+"px",this.set({right:l-t})),this.set({width:o})}else{let t=e.pageY-a.pageY+s;n.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{d._y(),a.classList.remove("d-cn")})},_cS(e){o.node("p_"+this.id).style.zIndex=e},"_cW<mousedown>"(){p._cT(this)},_x(){p._cT(this)},_y(){},_cQ(){this.digest({shrink:!this.get("shrink")})},"_cQ<click>"(){this.digest({shrink:!this.get("shrink")})},"_br<click>"(){let e=this._cU;e&&o.toTry(e)}}).merge(n)}),define("panels/props/element",["magix","../../designer/props","../../designer/history","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-layout/column","gallery/mx-layout/guage","gallery/mx-color/series","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s,l;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-layout/column"),e("gallery/mx-layout/guage"),e("gallery/mx-color/series"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let a={class:"d-cr d-n"},o={class:"d-cs"},d={class:"d-ct"},n={class:"d-cx d-l"},r={checked:"checked"},p={value:"value"};const c=e("magix"),h=e("../../designer/props"),g=e("../../designer/history");i.exports=c.View.extend({tmpl:(e,t,i,c,h,g,u,x)=>{let m,f,b,_,y,v,w,k,S,z,j=[],{elements:T,i18n:L,props:I}=e,A=T[0];f=[],_=[t(0,c(L("aI")))],b=[t("span",d,_)],_=[t(0,c(L(A.ctrl.title)))],b.push(t("span",0,_)),f.push(t("li",o,b));for(let e=A.ctrl.props,a=e.length,o=0;o<a;o+=1){let a=e[o];if(b=[],a.type==I._af)_=s?[s]:[s=t("li",{_:"_",class:"d-K"})],b.push(..._);else{_=[];let e=A.props[a.key];a._aW&&!a._aW(A.props)||(w=[],k=[t(0,c(L(a.tip)))],w.push(t("span",d,k)),a.type==I._ad?(S="gallery/mx-number/index?value="+u(g,e,"\x1e_.0.m."+a.key),null!=(m=a.max)&&(S+="&max="+h(m)),null!=(m=a.step)&&(S+="&step="+h(m)),null!=(m=a.fixed)&&(S+="&fixed="+h(m)),null!=(m=a.min)&&(S+="&min="+h(m)),k=[t("div",{"mx5-owner":i,$:"elements",class:"d-B d-a d-cu",disabled:null!=(m=A.props.locked)&&m,"mx5-input":i+"\x1e_cX({key:'"+x(a.key)+"',use:'value',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":S})],w.push(...k)):a.type==I._ae?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-input":i+"\x1e_cX({key:'"+x(a.key)+"',use:'color',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-color/index?clear="+h(a.clear)+"&color="+u(g,e,"\x1e_.0.m."+a.key)+"&align=right&disabled="+h(A.props.locked)+"&alpha="+h(a.alpha)})],w.push(...k)):a.type==I._ag?(z=[t("input",{class:"d-cy",type:"checkbox",checked:A.props[a.key],"mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',native:'checked',element:'"+u(g,A,"\x1e_.0")+"'})"},1,r)],l?z.push(l):z.push(l=t("i",{_:"a",class:"d-cz"})),k=[t("label",n,z)],w.push(...k)):a.type==I._ah?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-layout/column?columns="+u(g,e,"\x1e_.0.m."+a.key)+"&disabled="+u(g,A.props.locked,"\x1e_.0.l")})],w.push(...k)):a.type==I._ai?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',use:'value',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-layout/guage?guage="+u(g,e,"\x1e_.0.m."+a.key)+"&disabled="+u(g,A.props.locked,"\x1e_.0.l")})],w.push(...k)):a.type==I._ap?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-color/series?colors="+u(g,e,"\x1e_.0.m."+a.key)+"&disabled="+u(g,A.props.locked,"\x1e_.0.l")})],w.push(...k)):a.type==I._al?(k=[t("textarea",{class:"d-b d-cu d-cv d-d",disabled:A.props.locked,"mx5-input":i+"\x1e_cX({key:'"+x(a.key)+"',native:'value',element:'"+u(g,A,"\x1e_.0")+"'})",value:c(e)},0,p)],w.push(...k)):a.type==I._ao?(k=[t("input",{class:"d-a d-cu",disabled:A.props.locked,"mx5-input":i+"\x1e_cX({key:'"+x(a.key)+"',native:'value',element:'"+u(g,A,"\x1e_.0")+"'})",value:c(e)},1,p)],w.push(...k)):a.type==I._aj?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-input":i+"\x1e_cX({element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/style?disabled="+u(g,A.props.locked,"\x1e_.0.l")+"&value="+u(g,A.props,"\x1e_.0.m")})],w.push(...k)):a.type==I._ak?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-input":i+"\x1e_cX({element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/align?disabled="+u(g,A.props.locked,"\x1e_.0.l")+"&value="+u(g,A.props,"\x1e_.0.m")})],w.push(...k)):a.type==I._am?(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',use:'src',element:'"+u(g,A,"\x1e_.0")+"',write:'"+u(g,a.write,"\x1e_.0.n."+o+".o")+"'})","mx5-view":"gallery/mx-picture/index?src="+h(e)+"&disabled="+u(g,A.props.locked,"\x1e_.0.l")})],w.push(...k)):a.type==I._cY?(z=[t(0,c(L("aK")))],k=[t("button",{class:"d-e d-f",disabled:A.props.locked,"mx5-click":i+"\x1e_cZ({key:'"+x(a.key)+"',element:'"+u(g,A,"\x1e_.0")+"'})"},z)],w.push(...k)):a.type==I._an&&(k=[t("div",{"mx5-owner":i,$:"elements",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+x(a.key)+"',use:'value',element:'"+u(g,A,"\x1e_.0")+"'})","mx5-view":"gallery/mx-dropdown/index?selected="+h(e)+"&list="+u(g,a.items,"\x1e_.0.n."+o+".p")+"&textKey=text&valueKey=value"})],w.push(...k)),v="d-cs",a._aQ&&(v+=" d-cw"),y=[t("li",{class:v},w)],_.push(...y)),b.push(..._)}f.push(...b)}return j.push(t("ul",a,f)),t(i,0,j)},init(){let e=this._cu(this.render.bind(this),30);c.State.on("m",e),c.State.on("n",e),c.State.on("_",e)},render(){let e=c.State.get("_U");e.length>0&&this.digest({props:h,elements:e})},"_cX<input,change>"(e){let{key:t,use:i,element:s,native:l,write:a}=e.params;if(i||l){let{props:o}=s,d=e.eventTarget,n=l?d[l]:e[i];a&&(n=a(n,o,e)),o[t]=n}c.State.fire("n");let o=c.node(s.id),d=c.Vframe.byNode(o);d&&d.invoke("_P",[s]),g._s("_"+t,500)}})}),define("panels/props/index",["magix","./element","./page"],(e,t,i)=>{e("./element"),e("./page");const s=e("magix");s.applyStyle("d-x",'.d-cr{padding:4px;min-width:200px}.d-cs{line-height:28px;display:flex;align-items:center}.d-ct{width:80px;text-align:right}.d-cu{width:140px}.d-cv{height:90px}.d-cw{align-items:flex-start}.d-cx{display:flex;align-items:center;cursor:pointer}.d-cy{visibility:hidden;position:absolute}.d-cz{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.d-cz:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.d-cy:checked+.d-cz{background:#fa742b}.d-cy:checked+.d-cz:before{left:100%;margin-left:-14px}.d-cy:disabled+.d-cz{background:#e6e6e6;cursor:not-allowed}'),i.exports=s.View.extend({tmpl:(e,t,i)=>{let s=[],{elements:l}=e,a=1==l.length;return s.push(t("div",{"mx5-owner":i,class:!a&&"d-E","mx5-view":"panels/props/element"}),t("div",{"mx5-owner":i,class:a&&"d-E","mx5-view":"panels/props/page"})),t(i,0,s)},init(){let e=this._cu(this.render.bind(this),30);s.State.on("m",e),s.State.on("_",e)},render(){this.digest({elements:s.State.get("_U")})}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let l={class:"d-cr d-n"},a={class:"d-cs"},o={class:"d-ct"};const d=e("magix"),n=e("../../designer/history"),r=e("../../designer/props");i.exports=d.View.extend({tmpl:(e,t,i,d,n,r,p,c)=>{let h,g,u,x,m,f,b,_,y=[],{i18n:v,ctrl:w,props:k,page:S}=e;g=[],x=[t(0,d(v("aI")))],u=[t("span",o,x)],x=[t(0,d(v(w.title)))],u.push(t("span",0,x)),g.push(t("li",a,u));for(let e=w.props,l=e.length,a=0;a<l;a+=1){let l=e[a];u=[],l.type==k._af?(x=s?[s]:[s=t("li",{_:"_",class:"d-K"})],u.push(...x)):l._aW&&!l._aW(S)||(f=[],b=[t(0,d(v(l.tip)))],f.push(t("span",o,b)),l.type==k._ad?(_="gallery/mx-number/index?value="+p(r,S[l.key],"\x1eq."+l.key),null!=(h=l.max)&&(_+="&max="+n(h)),null!=(h=l.step)&&(_+="&step="+n(h)),null!=(h=l.fixed)&&(_+="&fixed="+n(h)),null!=(h=l.min)&&(_+="&min="+n(h)),b=[t("div",{"mx5-owner":i,$:"page,ctrl",class:"d-B d-a d-cu","mx5-input":i+"\x1e_cX({key:'"+c(l.key)+"',use:'value'})","mx5-view":_})],f.push(...b)):l.type==k._ae?(_="gallery/mx-color/index?color="+p(r,S[l.key],"\x1eq."+l.key)+"&align=right",null!=(h=l.alpha)&&(_+="&alpha="+n(h)),b=[t("div",{"mx5-owner":i,$:"page,ctrl",clear:d(l.clear),class:"d-cu","mx5-input":i+"\x1e_cX({key:'"+c(l.key)+"',use:'color'})","mx5-view":_})],f.push(...b)):l.type==k._am?(b=[t("div",{"mx5-owner":i,class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+c(l.key)+"',use:'src',write:'"+p(r,l.write,"\x1en."+a+".o")+"'})","mx5-view":"gallery/mx-picture/index?src="+n(S[l.key])})],f.push(...b)):l.type==k._an&&(b=[t("div",{"mx5-owner":i,$:"ctrl",class:"d-cu","mx5-change":i+"\x1e_cX({key:'"+c(l.key)+"',use:'value'})","mx5-view":"gallery/mx-dropdown/index?selected="+n(S[l.key])+"&list="+p(r,l.items,"\x1en."+a+".p")+"&textKey=text&valueKey=value"})],f.push(...b)),m="d-cs",l._aQ&&(m+=" d-cw"),x=[t("li",{class:m},f)],u.push(...x)),g.push(...u)}return y.push(t("ul",l,g)),t(i,0,y)},init(){let e=this.render.bind(this);d.State.on("_",e),d.State.on("a",e)},render(){this.digest({props:r,ctrl:d.State.get("_9"),page:d.State.get("_S")})},"_cX<input,change>"(e){let{key:t,use:i,write:s}=e.params,l=d.State.get("_S");l[t]=e[i],s&&s(l,e),d.State.fire("a"),n._s("a",500)}})}),define("panels/elements/branch",["magix","../../designer/stage-selection","../../designer/stage-elements","../../designer/history"],(e,t,i)=>{let s,l={class:"d-b9"},a={class:"d-_ d-s"};const o=e("magix"),d=e("../../designer/stage-selection"),n=e("../../designer/stage-elements"),r=e("../../designer/history");let p=o.guid("rp_"),c={_cq(){o.node(p)||document.body.insertAdjacentHTML("beforeend",`<div class="d-ce" id="${p}"></div>`)},_x(e){let t=o.node(p).style,i=e.getBoundingClientRect();t.left=i.left+"px",t.top=i.top+"px",t.width=i.width+"px",t.height=i.height+"px"},_y(){o.node(p).style.left="-10000px"},_cH(){this._cG=setTimeout(()=>{c._y()},100)},_cI(){clearTimeout(this._cG)}};i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r)=>{let p,c,h,g,u,x,m=[],{elements:f,selectedId:b,i18n:_,locked:y}=e;for(let e=f.length,v=0;v<e;v+=1){let e=f[v];if(c=[],g=[],"layout"==e.role?(x=[t(0,"\ue63b")],h="d-_ d-cb",e.closed&&(h+=" d-cc"),u=[t("i",{role:"icon",class:h},x)],g.push(...u)):(u=s?[s]:[s=t("i",{_:"_",class:"d-ca"})],g.push(...u)),u=[t(0,o(e.ctrl.icon),1)],g.push(t("i",a,u)),u=[t(0,o(_(e.ctrl.title)))],g.push(t("span",0,u)),h="d-c_",e.id==b&&(e.props.locked?h+=" d-cg":h+=" d-cf"),c.push(t("div",{"mx5-click":i+"\x1e_cJ({element:'"+r(n,e,"\x1e_."+v)+"'})","mx5-mouseover":i+"\x1e_cM({element:'"+r(n,e,"\x1e_."+v)+"'})","mx5-mouseout":i+"\x1e_cN()",class:h},g)),"layout"==e.role){g=[];for(let s=e.props.columns,l=s.length,a=0;a<l;a+=1){let l=s[a];h="d-cd",e.closed&&(h+=" d-E"),u=[t("div",{"mx5-owner":i,$:"elements,locked","mx5-view":"panels/elements/branch?elements="+r(n,l.elements,"\x1e_."+v+".c."+a+"._")+"&locked="+r(n,y||e.props.locked,"\x1ek._."+v+".l")+"&selectedId="+d(b),class:h})],g.push(...u)}c.push(...g)}p=[t("div",l,c)],m.push(...p)}return t(i,0,m)},init(){c._cq()},assign(e){this.set(e)},render(){this.digest()},"_cJ<click>"(e){let{element:t}=e.params,i=this.get("selectedId"),s=this.get("elements"),l=e.target.getAttribute("role");if("layout"==t.ctrl.role&&"icon"==l)return t.closed=!t.closed,void this.digest({elements:s});t.id!=i&&(d._8(t),r._s(),n._aA(t.id))},"_cK<click>"(e){let t=this.get("elements"),{element:i}=e.params;i.closed=!i.closed,this.digest({elements:t})},"_cL<click>"(e){let{element:t}=e.params;d._8(t),n._aA(t.id)},"_cM<mouseover>"(e){if(!o.inside(e.relatedTarget,e.eventTarget)){c._cI();let{element:t}=e.params,i=o.node(t.id);i&&c._x(i)}},"_cN<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||c._cH()}})}),define("panels/elements/index",["magix","./branch"],(e,t,i)=>{e("./branch");let s={class:"d-G d-b8"};const l=e("magix");l.applyStyle("d-v",".d-b8{padding:4px}.d-b9{padding-left:4px}.d-c_{cursor:pointer;display:inline-flex;align-items:center;height:22px;transition:opacity .25s;padding-right:12px;border-radius:2px}.d-c_:hover{opacity:.6;background:#eee}.d-ca{width:16px;height:16px;display:inline-block}.d-cb{transform:rotate(90deg);transition:transform .25s}.d-cc{transform:rotate(0deg)}.d-cd{margin-left:12px}.d-ce{position:absolute;background:#fa742b;opacity:.4}.d-cf,.d-cf:hover{background-color:#fa742b;color:#fff;opacity:.9}.d-cg,.d-cg:hover{background-color:#999;opacity:.9;color:#fff}"),i.exports=l.View.extend({tmpl:(e,t,i,l,a,o,d)=>{let n,r=[],{elements:p,selectedId:c}=e;return n=[t("div",{"mx5-owner":i,$:"elements","mx5-view":"panels/elements/branch?elements="+d(o,p,"\x1e_")+"&selectedId="+a(c)})],r.push(t("div",s,n)),t(i,0,r)},init(){let e=this._cu(this.render.bind(this),100);l.State.on("b",e),l.State.on("_",e),l.State.on("m",e),l.State.on("n",e)},render(){let e=l.State.get("_T"),t=l.State.get("_U"),i="";t&&t.length&&(i=t[0].id),this.digest({selectedId:i,elements:e})}})}),define("elements/index",["magix","./layout/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-pie/designer","./chart-meter/designer","./chart-bar/designer"],(e,t,i)=>{const s=e("magix"),l=e("./layout/designer"),a=e("./text/designer"),o=e("./image/designer"),d=e("./repeat/designer"),n=e("./page/designer");let r=[l,{spliter:1},a,o,d,{spliter:1},e("./chart-line/designer"),e("./chart-pie/designer"),e("./chart-meter/designer"),e("./chart-bar/designer")],p=[];for(let e of r)if(e.spliter||e.subs){if(e.subs)for(let t of e.subs)p.push(t)}else p.push(e);let c=s.toMap(p,"role");i.exports={_O:()=>r,_1:()=>n,_2(e){let t={},i=e=>{for(let l of e){let e=c[l.role];if(l.id||(l.id=s.guid("e_")),l.ctrl=e,t[l.id]=l,"layout"==l.role)for(let e of l.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/normal",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor"],(e,t,i)=>{const s=e("magix"),l=e("../gallery/mx-dragdrop/index"),a=e("../gallery/mx-pointer/cursor");s.applyStyle("d-h",".d-aC{pointer-events:none}.d-aD{display:flex}.d-aE{position:absolute;left:0;top:0;right:0;bottom:0;background:transparent}.d-aF,.d-aG{border:1px solid #fa742b}.d-aG{border-color:#999}.d-aH{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-aI{border-style:dashed}.d-aJ{position:absolute;left:calc(50% - 20px);width:40px;background-color:#fa742b;height:5px;margin-top:-3px;cursor:ns-resize;z-index:1}"),i.exports=s.View.extend({tmpl:(e,t,i,s,l,a,o)=>{let d,n,r=[],{element:p,view:c,selected:h}=e,g=p.props,u=p.ctrl;return d="d-aH",g.locked&&(d+=" d-aI"),"layout"==u.role?d+=" d-aD":d+=" d-aC",r.push(t("div",{"mx5-owner":i,$:"element","mx5-view":s(c)+"?element="+o(a,p,"\x1ed")+"&props="+o(a,g,"\x1ee"),id:"entity_"+i,class:d})),d="d-aE","layout"==u.role&&(d+=" d-aC"),h&&(g.locked?d+=" d-aG":d+=" d-aF"),r.push(t("div",{class:d})),!g.locked&&h&&u._aP&&u._aP.height&&(n=[t("div",{class:"d-aJ","mx5-mousedown":i+"\x1e_aV()"})],r.push(...n)),t(i,0,r)},_aU(){let e=s.State.get("_3"),t=s.State.get("_U").length,i=this.get().element.id;this.set({selected:s.has(e,i),count:t})},assign(e){return this.set(e),this._aU(),!0},render(){this.digest()},_P(e){this.digest({element:e})},"_aV<mousedown>"(e){if(!e._aH){e._aH=1;let t=0,i=e.eventTarget,l=this.get("element"),{props:o}=l,d=o.height;this._w(e,n=>{t||(t=1,a._x(i));let r=n.pageY-e.pageY+d;r<0&&(r=0),o.height=r,this._P(l),s.State.fire("n")},()=>{a._y()})}}}).merge(l)}),define("elements/chart-bar/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal");i.exports=l.extend({ctor(){this.set({view:"elements/chart-bar/index"})}}).static({role:"chart-bar",title:"o",icon:"&#xe603;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{tip:"t",key:"colors",type:s._ap,json:1,_aQ:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-bar/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),l=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a=[],{props:o,error:d}=e;return l="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(l+="background:"+s(o.background)+";"),a.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:l})),t(i,0,a)},assign(e){this.set(e)},_aS(){if(!this._aR){let e=s.node("chart_"+this.id);this._aR=echarts.init(e),this.on("destroy",()=>{this._aR.dispose()}),this._aR.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"}]},!0),e.dataset.tip=""}this._aR.resize()},async render(){let e=s.mark(this,"_aT");await this.digest();try{if(await l(),e()){let e=this.get("props");this._aS();let t={title:{text:e.title}};e.colors&&e.colors.length&&(t.color=e.colors),this._aR.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-line/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal");i.exports=l.extend({ctor(){this.set({view:"elements/chart-line/index"})}}).static({role:"chart-line",title:"v",icon:"&#xe64b;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{tip:"t",key:"colors",type:s._ap,json:1,_aQ:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-line/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),l=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a=[],{props:o,error:d}=e;return l="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(l+="background:"+s(o.background)+";"),a.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:l})),t(i,0,a)},assign(e){this.set(e)},_aS(){if(!this._aR){let e=s.node("chart_"+this.id);this._aR=echarts.init(e),this.on("destroy",()=>{this._aR.dispose()}),this._aR.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),e.dataset.tip=""}this._aR.resize()},async render(){let e=s.mark(this,"_aT");await this.digest();try{if(await l(),e()){let e=this.get("props");this._aS();let t={title:{text:e.title}};e.colors&&e.colors.length&&(t.color=e.colors),this._aR.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-meter/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal");i.exports=l.extend({ctor(){this.set({view:"elements/chart-meter/index"})}}).static({role:"chart-meter",title:"w",icon:"&#xeb94;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-meter/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),l=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a=[],{props:o,error:d}=e;return l="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(l+="background:"+s(o.background)+";"),a.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:l})),t(i,0,a)},assign(e){this.set(e)},_aS(){if(!this._aR){let e=s.node("chart_"+this.id);this._aR=echarts.init(e),this.on("destroy",()=>{this._aR.dispose()}),this._aR.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.dataset.tip=""}this._aR.resize()},async render(){let e=s.mark(this,"_aT");await this.digest();try{if(await l(),e()){this._aS();let e={title:{text:this.get("props").title}};this._aR.setOption(e)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/image/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal");i.exports=l.extend({ctor(){this.set({view:"elements/image/index"})}}).static({role:"image",title:"y",icon:"&#xe650;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:100,src:"",hpos:"flex-start",vpos:"flex-start",rotateX:!1,rotateY:!1,locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{type:s._af},{tip:"z",key:"src",type:s._am,json:1},{tip:"A",type:s._ak,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"B",type:s._ag,key:"rotateX",json:1},{tip:"C",type:s._ag,key:"rotateY",json:1},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/image/index",["magix"],(e,t,i)=>{let s;const l=e("magix");i.exports=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d,n,r=[],{props:p}=e;return o=[],p.src?(a="",(p.rotateX||p.rotateY)&&(a+="transform:",p.rotateX&&(a+="rotateX(180deg)"),p.rotateY&&(a+=" rotateY(180deg)")),d=[t("img",{src:l(p.src),class:"d-o d-w d-x",style:a},1)],o.push(...d)):(s?d=[s]:(n=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],d=[s=t("div",{_:"_",class:"d-L d-M d-N d-R d-u d-v"},n)]),o.push(...d)),a="display:flex;align-items:"+l(p.vpos)+";justify-content:"+l(p.hpos)+";height:"+l(p.height)+"px;opacity:"+l(p.alpha)+";",p.background&&(a+="background:"+l(p.background)+";"),r.push(t("div",{style:a},o)),t(i,0,r)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/chart-pie/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal");i.exports=l.extend({ctor(){this.set({view:"elements/chart-pie/index"})}}).static({role:"chart-pie",title:"x",icon:"&#xe6d4;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1,colors:[]}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{tip:"t",key:"colors",type:s._ap,json:1,_aQ:1,encode(e,t){e.colors=t.colors.slice()}},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-pie/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),l=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a=[],{props:o,error:d}=e;return l="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(l+="background:"+s(o.background)+";"),a.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:l})),t(i,0,a)},assign(e){this.set(e)},_aS(){if(!this._aR){let e=s.node("chart_"+this.id);this._aR=echarts.init(e),this.on("destroy",()=>{this._aR.dispose()}),this._aR.setOption({series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie"}]},!0),e.dataset.tip=""}this._aR.resize()},async render(){let e=s.mark(this,"_aT");await this.digest();try{if(await l(),e()){let e=this.get("props");this._aS();let t={title:{text:e.title,x:"center"}};e.colors&&e.colors.length&&(t.color=e.colors),this._aR.setOption(t)}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/layout/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),l=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/layout/index"})}}).static({role:"layout",title:"D",icon:"&#xe764;",_7:()=>({columns:[{width:100,elements:[]}],margin:"5px 5px 5px 5px",padding:"5px 5px 5px 5px",locked:!1}),props:[{tip:"E",key:"columns",_aQ:!0,type:l._ah,json:1,encode(e,t){let{columns:i}=t,s=[];for(let e of i)s.push({elements:e.elements,width:e.width});e.columns=s}},{tip:"F",key:"margin",_aQ:!0,type:l._ai,json:1},{tip:"G",key:"padding",_aQ:!0,type:l._ai,json:1},{type:l._af},{tip:"u",key:"locked",type:l._ag,free:!0}]})}),define("elements/layout/index",["magix","../../designer/stage-elements","../../gallery/mx-dragdrop/index"],(e,t,i)=>{const s=e("magix"),l=e("../../designer/stage-elements"),a=e("../../gallery/mx-dragdrop/index");s.applyStyle("d-g",".d-aA{display:flex;width:100%;min-height:40px}.d-aB{flex-shrink:1;border:1px dashed #ccc}"),i.exports=s.View.extend({tmpl:(e,t,i,s,l,a,o)=>{let d,n,r,p,c=[],{props:h,element:g}=e;d=[];for(let e=h.columns,l=e.length,c=0;c<l;c+=1){let l=e[c];r=[];for(let e=l.elements,d=e.length,n=0;n<d;n+=1){let l=e[n];p=[t("div",{"mx5-owner":i,$:"props",class:"d-B",id:s(l.id),eid:s(l.id),"mx5-view":"elements/"+s(l.role)+"/designer?element="+o(a,l,"\x1ec."+c+"._."+n),"mx5-mousedown":i+"\x1e_aI({element:'"+o(a,l,"\x1ec."+c+"._."+n)+"'})",role:s(l.role)})],r.push(...p)}n=[t("div",{style:"flex-basis:"+s(l.width)+"%",class:"d-aB",role:"column",index:s(c),pid:s(g.id)},r)],d.push(...n)}return c.push(t("div",{style:"margin:"+s(h.margin)+";padding:"+s(h.padding),class:"d-aA"},d)),t(i,0,c)},assign(e){this.set(e)},render(){this.digest()},"_aI<mousedown>"(e){e._aH||(e._aH=1,l._aD(e,this))}}).merge(a)}),define("elements/page/designer",["../../designer/props","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../../i18n/index");i.exports={title:"H",_7:()=>({width:900,height:500,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0}),props:[{tip:"I",key:"width",type:s._ad,min:0,json:1},{tip:"J",key:"height",type:s._ad,min:0,json:1},{type:s._af},{tip:"r",key:"background",type:s._ae,json:1},{tip:"K",_aQ:!0,key:"backgroundImage",type:s._am,write(e,t){e.backgroundWidth=t.width,e.backgroundHeight=t.height},json:1},{tip:"L",key:"backgroundRepeat",type:s._an,items:[{text:l("M"),value:"full"},{text:l("N"),value:"no-repeat"},{text:l("O"),value:"repeat-x"},{text:l("P"),value:"repeat-y"},{text:l("Q"),value:"repeat"}],_aW:e=>e.backgroundImage,json:1}]}}),define("elements/provider/echarts",[],(e,t,i)=>{let s=[],l=1,a="can not load echarts library";i.exports=(()=>new Promise((e,t)=>{if(2&l)window.echarts?e():t(a);else if(4&l)s.push([e,t]);else{l|=4,s.push([e,t]);let i=document.createElement("script");i.src="//cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js",i.onload=i.onerror=(()=>{document.head.removeChild(i),l|=2;for(let[e,t]of s)window.echarts?e():t(a);s.length=0}),document.head.appendChild(i)}}))}),define("elements/repeat/designer",["../../designer/props","../normal","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),l=e("../normal"),a=e("../../i18n/index");i.exports=l.extend({ctor(){this.set({view:"elements/repeat/index"})}}).static({role:"repeat",title:"R",icon:"&#xe78f;",_aP:{height:1},_7:()=>({background:"",alpha:1,height:100,src:"",imageWidth:0,imageHeight:0,positionXOffset:0,positionYOffset:0,repeat:"repeat",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{type:s._af},{tip:"z",key:"src",type:s._am,json:1,write:(e,t,i)=>(t.imageWidth=i.width,t.imageHeight=i.height,e)},{tip:"S",key:"imageWidth",type:s._ad,min:0,_aW:e=>e.src,json:1},{tip:"T",key:"imageHeight",type:s._ad,min:0,_aW:e=>e.src,json:1},{tip:"U",key:"positionXOffset",type:s._ad,_aW:e=>e.src,json:1},{tip:"V",key:"positionYOffset",type:s._ad,_aW:e=>e.src,json:1},{tip:"L",key:"repeat",type:s._an,_aW:e=>e.src,items:[{text:a("Q"),value:"repeat"},{text:a("O"),value:"repeat-x"},{text:a("P"),value:"repeat-y"}],json:1},{type:s._af},{tip:"u",key:"locked",type:s._ag,free:!0}]})}),define("elements/repeat/index",["magix"],(e,t,i)=>{let s;const l=e("magix");i.exports=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d,n,r=[],{props:p}=e;return o=[],p.src||(s?d=[s]:(n=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],d=[s=t("div",{_:"_",class:"d-L d-M d-N d-R d-v"},n)]),o.push(...d)),a="height:"+l(p.height)+"px;opacity:"+l(p.alpha)+";",p.background&&(a+="background:"+l(p.background)+";"),p.src&&(a+="background-image:url("+l(p.src)+");",p.imageWidth>0&&p.imageHeight>0&&(a+="background-size:"+l(p.imageWidth)+"px "+l(p.imageHeight)+"px;"),a+="background-repeat:"+l(p.repeat)+";background-position:"+l(p.positionXOffset)+"% "+l(p.positionYOffset)+"%"),r.push(t("div",{style:a},o)),t(i,0,r)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/text/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),l=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/text/index"})}}).static({role:"text",title:"W",icon:"&#xe6bc;",_aP:{height:1},_7:()=>({background:"",height:50,alpha:1,text:"",ls:0,forecolor:"#000000",fontsize:14,locked:!1,styleBold:!1,styleUnderline:!1,styleItalic:!1,margin:"0px 0px 0px 0px",padding:"4px 4px 4px 4px",hpos:"flex-start",vpos:"flex-start"}),props:[{tip:"p",key:"height",type:l._ad,min:0,json:1},{tip:"X",key:"fontsize",type:l._ad,min:0,json:1},{tip:"q",key:"alpha",type:l._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"Y",key:"ls",type:l._ad,min:0},{tip:"r",key:"background",clear:!0,alpha:!0,type:l._ae,json:1},{tip:"Z",key:"forecolor",type:l._ae,json:1},{tip:"a_",type:l._aj,json:1,encode(e,t){e.styleBold=t.styleBold,e.styleUnderline=t.styleUnderline,e.styleItalic=t.styleItalic,e.styleStrike=t.styleStrike}},{tip:"A",type:l._ak,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"aa",key:"text",type:l._al,_aQ:!0,json:1},{type:l._af},{tip:"F",key:"margin",_aQ:!0,type:l._ai,json:1},{tip:"G",key:"padding",_aQ:!0,type:l._ai,json:1},{type:l._af},{tip:"u",key:"locked",type:l._ag,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{const s=e("magix");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a,o,d=[],{props:n}=e;return o="",n.text?o+=" "+s(n.text)+" ":o+=" \u8bf7\u8f93\u5165\u6587\u5b57 ",a=[t(0,o)],l="display:flex;color:"+s(n.forecolor)+";",n.background&&(l+="background:"+s(n.background)+";"),l+="font-size:"+s(n.fontsize)+"px;height:"+s(n.height)+"px;letter-spacing:"+s(n.ls)+"px;opacity:"+s(n.alpha)+";margin:"+s(n.margin)+";padding:"+s(n.padding)+";",n.styleBold&&(l+="font-weight:bold;"),n.styleItalic&&(l+="font-style:italic;"),n.styleUnderline&&(l+="text-decoration:underline;"),l+=";align-items:"+s(n.vpos)+";justify-content:"+s(n.hpos)+";overflow:hidden",d.push(t("div",{style:l},a)),t(i,0,d)},assign(e){this.set(e)},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{let s,l={class:"d-6"},a={class:"d-4"};const o=e("magix"),d=e("../gallery/mx-dragdrop/index"),n=e("../gallery/mx-pointer/cursor"),r=e("./history");o.applyStyle("d-a",".d-S{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.d-T{top:0;width:1px}.d-T,.d-U{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.d-U{left:0;height:1px}.d-V{float:left;overflow:hidden;z-index:200;position:relative}.d-W,.d-V{width:20px;border-right:1px solid #ccc;background:#fff}.d-W{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.d-X{left:5px;top:22px}.d-X,.d-Y{cursor:default;position:absolute;font-size:10px}.d-Y{top:2px;left:24px}.d-Z,.d-0{position:relative;z-index:100}.d-Z{top:20px}.d-0{left:20px}.d-1{width:4px;border-left:1px solid #fa742b}.d-1,.d-2{position:absolute;pointer-events:none}.d-2{height:1px;background:#fa742b}.d-3{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.d-4{top:2px;cursor:default}.d-4,.d-5{position:absolute;left:4px;font-size:10px;color:#666}.d-5{top:-15px;cursor:pointer;pointer-events:all}.d-6{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.d-7{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.d-8,.d-7{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.d-8{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let p={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r,p)=>{let c,h,g,u,x,m,f,b,_,y,v=[],{sTop:w,yHelpers:k,yStart:S,scale:z,vWidth:j,i18n:T,sLeft:L,xHelpers:I,xStart:A,vHeight:R,width:C,step:B,space:E,hbar:X,barColor:F,bar:Y,xEnd:V,height:H,yEnd:M}=e;c=[];for(let e=k.length,s=0;s<e;s+=1){let e=k[s];y=Math.abs(S)+e.mm*z+20,u=[t(0,"\ue600")],g=[t("i",{class:"d-5 d-_",title:o(T("_")),"mx5-click":i+"\x1e\x1e_v({type:'y',id:'"+p(e.id)+"'})"},u)],u=[t(0,o(e.mm))],g.push(t("span",l,u),t("span",{class:"d-7","mx5-mousedown":i+"\x1e\x1e_z({type:'y',id:'"+p(e.id)+"',c:"+o(y)+"})",title:o(T("a"))})),h=[t("div",{class:"d-2",style:"width:"+o(j)+"px;top:"+o(y)+"px"},g)],c.push(...h)}v.push(t("div",{class:"d-0",style:"top:-"+o(w)+"px",id:i+"_y_help","mx5-contextmenu":i+"\x1e_A()"},c)),c=[];for(let e=I.length,s=0;s<e;s+=1){let e=I[s];y=Math.abs(A)+e.mm*z,u=[t(0,"\ue600")],g=[t("i",{class:"d-3 d-_",title:o(T("_")),"mx5-click":i+"\x1e\x1e_v({type:'x',id:'"+p(e.id)+"'})"},u)],u=[t(0,o(e.mm))],g.push(t("span",a,u),t("span",{class:"d-8","mx5-mousedown":i+"\x1e\x1e_z({type:'x',id:'"+p(e.id)+"',c:"+o(y)+"})",title:o(T("a"))})),h=[t("div",{class:"d-1",style:"height:"+o(R)+"px;left:"+o(y)+"px"},g)],c.push(...h)}v.push(t("div",{class:"d-Z",style:"left:-"+o(L)+"px",id:i+"_x_help","mx5-contextmenu":i+"\x1e_A()"},c)),u=[];for(let e=0;e<A;e+=B)x=[],e&&(m=[],(_=e/z)%E==0?(f=[t("rect",{width:"1",height:o(X),x:o(A-e),y:o(20-X-1),style:"fill:"+o(F)},1)],b=[t(0,o(-_))],f.push(t("text",{x:o(A-e+2),y:"14",style:"font-size:10px;fill:#999"},b)),m.push(...f)):(f=[t("rect",{width:"1",height:o(Y),x:o(A-e),y:o(20-Y-1),style:"fill:"+o(F)},1)],m.push(...f)),x.push(...m)),u.push(...x);for(let e=0;e<V;e+=B)x=[],(_=e/z)%E==0?(m=[t("rect",{width:"1",height:o(X),x:o(A+e),y:o(20-X-1),style:"fill:"+o(F)},1)],f=[t(0,o(_))],m.push(t("text",{x:o(A+e+2),y:"14",style:"font-size:10px;fill:#999"},f)),x.push(...m)):(m=[t("rect",{width:"1",height:o(Y),x:o(A+e),y:o(20-Y-1),style:"fill:"+o(F)},1)],x.push(...m)),u.push(...x);g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+o(C)+" 19",style:"cursor:default"},u)],h=[t("div",{style:"width:"+o(C)+"px;height:100%"},g)],c=[t("div",{class:"d-S",id:i+"_x"},h)],g=[t(0,"-")],h=[t("span",{class:"d-X",id:i+"_x_tip"},g)],c.push(t("div",{class:"d-T",id:i+"_x_line",style:"height:"+o(R+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":i+"\x1e_o()","mx5-mouseout":i+"\x1e_p()","mx5-click":i+"\x1e_t()"},c)),u=[];for(let e=0;e<S;e+=B)x=[],e&&(m=[],(_=e/z)%E==0?(f=[t("rect",{width:o(X),height:"1",x:o(20-X),y:o(S-e),style:"fill:"+o(F)},1)],b=[t(0,o(-_))],f.push(t("text",{x:"14",y:o(S-e+2),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(S-e)+")"},b)),m.push(...f)):(f=[t("rect",{width:o(Y),height:"1",x:o(20-Y),y:o(S-e),style:"fill:"+o(F)},1)],m.push(...f)),x.push(...m)),u.push(...x);for(let e=0;e<M;e+=B)x=[],(_=e/z)%E==0?(m=[t("rect",{width:o(X),height:"1",x:o(20-X),y:o(S+e),style:"fill:"+o(F)},1)],f=[t(0,o(_))],m.push(t("text",{x:"14",y:o(S+e),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(S+e-2)+")"},f)),x.push(...m)):(m=[t("rect",{width:o(Y),height:"1",x:o(20-Y),y:o(S+e),style:"fill:"+o(F)},1)],x.push(...m)),u.push(...x);return g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+o(H),style:"cursor:default"},u)],h=[t("div",{style:"height:"+o(H)+"px"},g)],c=[t("div",{class:"d-V",style:"height:"+o(R)+"px",id:i+"_y"},h)],g=[t(0,"-")],h=[t("span",{class:"d-Y",id:i+"_y_tip"},g)],c.push(t("div",{class:"d-U",id:i+"_y_line",style:"width:"+o(j+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":i+"\x1e_q()","mx5-mouseout":i+"\x1e_r()","mx5-click":i+"\x1e_u()"},c)),s?v.push(s):v.push(s=t("div",{_:"_",class:"d-W"})),t(i,0,v)},init(e){let t=o.node(e.scroll);t.addEventListener("scroll",()=>{this.__()},{passive:!0}),this._a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);o.State.on("_",i),o.State.on("a",i),o.State.on("b",i),o.State.on("c",i)},async _l(){if(this._b){let e=this._a,t=o.State.get("_c"),i=Math.max(e.scrollWidth,window.innerWidth)+500,s=Math.max(e.scrollHeight,window.innerHeight)+300,l=0,a=0,d=20,n=0,r=0,c=10,h=10,g=o.node("stage_canvas"),u=o.node("stage_outer"),x=g.getBoundingClientRect(),m=u.getBoundingClientRect();a=i-(l=Math.round(x.left-m.left)+d),r=s-(n=Math.round(x.top-m.top)),c=e.offsetHeight,h=e.offsetWidth;let f=p[t];await this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:i,scale:t,space:f.space,step:f.step,height:s,xStart:l,xEnd:a,yStart:n,vHeight:c,vWidth:h,yEnd:r}),this._d=o.node(this.id+"_x"),this._e=o.node(this.id+"_y"),this._f=o.node(this.id+"_x_line"),this._g=o.node(this.id+"_y_line"),this._h=o.node(this.id+"_x_tip"),this._i=o.node(this.id+"_y_tip"),this._j=o.node(this.id+"_x_help"),this._k=o.node(this.id+"_y_help")}},__(){let e=this._d,t=this._e,i=this._k,s=this._j,l=this._a,a=l.scrollTop,o=l.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=a),s&&(s.style.left=-o+"px"),i&&(i.style.top=-a+"px"),this.set({sLeft:o,sTop:a})},render(){this.set({xHelpers:o.State.get("_m"),yHelpers:o.State.get("_n")});let e=()=>{o.node("stage_canvas")?(this._b=1,this._l()):setTimeout(e,30)};setTimeout(e,30)},"_o<mousemove>"(e){let t=this._d,i=e.pageX,s=this.get("xStart"),l=this._f.style;l.display="block",l.left=i+"px";let a=i-s+t.scrollLeft,o=this.get("scale");this._h.innerHTML=(a/o).toFixed(0)},"_p<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||(this._f.style.display="none")},"_q<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,s=this.get("yStart"),l=this._e,a=this._g.style;a.display="block",a.top=i+"px";let o=i-s-20+l.scrollTop,d=this.get("scale");this._i.innerHTML=(o/d).toFixed(0)},"_r<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||(this._g.style.display="none")},"_t<click>"(e){let t=(e.pageX-this.get("xStart")+this._d.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:o.guid("x_")}),this.digest({xHelpers:i}),this._f.style.display="none",r._s()},"_u<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this._e.scrollTop)/this.get("scale")|0,s=this.get("yHelpers");s.push({mm:i,id:o.guid("x_")}),this.digest({yHelpers:s}),this._g.style.display="none",r._s()},"_v<click>"(e){let{type:t,id:i}=e.params,s=t+"Helpers",l=this.get(s);for(let e=l.length;e--;){if(l[e].id==i){l.splice(e,1);break}}this.digest({[s]:l}),r._s()},"_z<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:s,c:l}=e.params,a=i+"Helpers",o=this.get(a);for(let e of o)if(e.id==s){t=e;break}if(t){let s=this.get(i+"Start"),d=0;this._w(e,r=>{let p;d||(d=1,n._x(e.eventTarget)),p="x"==i?r.pageX-e.pageX+l:r.pageY-e.pageY+l-20,t.mm=(p-s)/this.get("scale")|0,this.digest({[a]:o})},()=>{d&&(n._y(),r._s())})}},"_A<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){this._l()}}).merge(d)}),define("designer/const",[],(e,t,i)=>{i.exports={_B:50,_c:1,_C:5,_D:30,_E:30,_F:20,_G:10,_H:4,_I:10}}),define("designer/content",["magix","./tojson"],(e,t,i)=>{let s={class:"d-g"},l={class:"d-m"},a={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"},d={value:"value"};const n=e("magix"),r=e("./tojson");n.applyStyle("d-b",".d-9{width:100%;height:500px}"),i.exports=n.View.extend({tmpl:(e,t,i,n)=>{let r,p,c=[],{i18n:h,body:g}=e;return p=[t(0,n(h("b")))],r=[t("h5",l,p)],c.push(t("div",s,r)),r=[t("textarea",{class:"d-9 d-b",id:"ta_"+i,value:n(g)},0,d)],c.push(t("div",a,r)),p=[t(0,n(h("c")))],r=[t("button",{"mx5-click":i+"\x1e_K()",class:"d-A d-e",type:"button"},p)],p=[t(0,n(h("d")))],r.push(t("button",{"mx5-click":i+"\x1e_M()",class:"d-A d-e d-f d-t",type:"button"},p)),c.push(t("div",o,r)),t(i,0,c)},init(e){this._J=e.dialog},render(){this.digest({body:r()})},"_K<click>"(){this._J.close()},"_M<click>"(){let e,t=n.node("ta_"+this.id).value.trim();try{e=JSON.parse(t)}catch(e){return void this.owner.parent(2).invoke("alert",["\u89e3\u6790JSON\u5931\u8d25\uff1a"+e.message])}n.State.fire("d",{_L:e}),this._J.close()}})}),define("designer/header",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/follower"],(e,t,i)=>{let s,l,a,o,d,n={class:"d-L d-M d-z"},r={class:"d-G d-L d-M d-a_ d-z"},p={class:"d-B d-ab d-ad"},c={class:"d-_ d-af"},h={class:"d-ae"},g={class:"d-ag"},u={class:"d-A d-G d-L d-M d-aa"};const x=e("magix"),m=e("../gallery/mx-dragdrop/index"),f=e("../gallery/mx-pointer/follower");x.applyStyle("d-c",".d-a_{margin-left:100px}.d-aa{margin-right:10px}.d-ab,.d-ac{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.d-ad{grid-template-columns:50px 10px}.d-ac{float:left;border-radius:2px}.d-ac:hover{background:#bb4504}.d-ae{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.d-ae,.d-ab:hover{background:#ec5706}.d-ab:hover .d-ae{display:block}.d-af{grid-column:1/2;grid-row:1/2;align-self:flex-end}.d-ag{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.d-ah{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.d-ai{height:30px;width:1px;background:linear-gradient(hsla(0,0%,100%,.25),#fff 30%,#fff 70%,hsla(0,0%,100%,.25));margin:2px 12px;float:left}"),i.exports=x.View.extend({tmpl:(e,t,i,x,m,f,b)=>{let _,y,v,w,k,S,z,j,T,L=[],{i18n:I,elements:A}=e;s?_=[s]:(y=[t(0,"\ue64b")],_=[s=t("i",{_:"_",class:"d-_ d-aa"},y)]),_.push(t(0,x(I("e")))),L.push(t("div",n,_)),_=[];for(let e=A.length,s=0;s<e;s+=1){let e=A[s];if(y=[],e.spliter)v=l?[l]:[l=t("div",{_:"a",class:"d-ai"})],y.push(...v);else{if(v=[],e.subs){S=[t(0,x(e.icon),1)],k=[t("i",c,S)],S=[t(0,x(I(e.title)))],k.push(t("b",{class:"d-ag",title:x(I(e.title))},S)),a?k.push(a):(S=[t(0,"\ue73a")],k.push(a=t("i",{_:"b",class:"d-_ d-ah"},S))),S=[];for(let l=e.subs,a=l.length,o=0;o<a;o+=1){let e=l[o];T=[t(0,x(e.icon),1)],j=[t("i",c,T)],T=[t(0,x(I(e.title)))],j.push(t("b",g,T)),z=[t("div",{class:"d-ac","mx5-mousedown":i+"\x1e_R({ctrl:'"+b(f,e,"\x1e_."+s+".a."+o)+"'})",title:x(I(e.title))},j)],S.push(...z)}k.push(t("div",h,S)),w=[t("div",p,k)],v.push(...w)}else S=[t(0,x(e.icon),1)],k=[t("i",c,S)],S=[t(0,x(I(e.title)))],k.push(t("b",g,S)),w=[t("div",{class:"d-B d-ab","mx5-mousedown":i+"\x1e_R({ctrl:'"+b(f,e,"\x1e_."+s)+"'})",title:x(I(e.title))},k)],v.push(...w);y.push(...v)}_.push(...y)}return L.push(t("div",r,_)),o?y=[o]:(v=[t(0,"\ue6b0")],y=[o=t("i",{_:"c",class:"d-_"},v)]),d?y.push(d):(v=[t(0,"\u4fdd\u5b58")],y.push(d=t("b",{_:"d",class:"d-ag"},v))),_=[t("div",{class:"d-ab","mx5-click":i+"\x1e_s()"},y)],L.push(t("div",u,_)),t(i,0,L)},render(){let e=x.State.get("_N");this.digest({elements:e._O()})},"_R<mousedown>"(e){let{ctrl:t}=e.params,i=0;f._P(t.icon),x.State.set({_Q:t}),this._w(e,e=>{i&&(f._x(e),x.State.fire("e",{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY})),i=1},e=>{f._y(),i?e&&x.State.fire("f"):x.State.fire("g"),x.State.set({_Q:null})})},"_s<click>"(){x.State.fire("h")}}).merge(m)}),define("designer/history",["magix","./const"],(e,t,i)=>{const s=e("magix"),l=e("./const");let a,o=[],d=[],n=null,r="",p=null,c=(e,t)=>e.startsWith("_")?void 0:t,h=()=>JSON.stringify({page:s.State.get("_S"),scale:s.State.get("_c"),layouts:s.State.get("_T"),select:s.State.get("_U"),xLines:s.State.get("_m"),yLines:s.State.get("_n")},c),g=e=>{let t=JSON.parse(e),i=s.State.get("_c"),l=t.scale||i;s.State.fire("_",{json:t,scale:i!==l})};i.exports={_V(){p||(p=h())},_W:()=>({canRedo:d.length,canUndo:o.length}),_X(){o.length=0,d.length=0},_Y(){if(o.length>0){let e=o.pop();d.push(e);let t=o[o.length-1]||p;g(t)}},_Z(){let e=d.pop();e&&(o.push(e),g(e))},_s(e="_0",t=0){let i=h();e!=r&&(n&&(clearTimeout(a),o.push(n),n=null),r=e),d.length=0;let c=e=>{o.push(e),o.length>l._B&&(p=o.shift()),n=null,s.State.fire("i")};t?(n=i,clearTimeout(a),a=setTimeout(()=>{c(n)},t)):c(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./stage-selection","./keys","../i18n/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{let s,l;e("./header"),e("./toolbar"),e("./axis"),e("./stage");let a={class:"d-G d-ap"},o={class:"d-z"};const d=e("magix"),n=e("../elements/index"),r=e("../gallery/mx-dialog/index"),p=e("./const"),c=e("./history"),h=e("../panels/index"),g=e("./stage-selection"),u=e("./keys"),x=e("../i18n/index");d.State.set({_N:n});let m=n._1();d.applyStyle("d-d",".d-aj{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.d-aj,.d-ak{position:relative}.d-ak{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.d-al{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 106px);background-color:#edeef3;transition:all .3s;margin-left:20px}.d-am{scroll-behavior:smooth}.d-an{box-shadow:inset 1px 1px 6px 2px #dadada}.d-ao{position:absolute;left:20px;top:86px;right:0;bottom:21px;pointer-events:none;box-shadow:inset 0 0 0 30px rgba(250,116,43,.1);z-index:1000}.d-ap{height:20px;background:#fafafa;position:relative;z-index:200;border-top:1px solid #ccc;font-size:12px;color:#999;padding-left:25px;line-height:20px}");let f=/^(?:input|textarea)$/i,b={Digit1:0,Digit2:1,Digit3:2,Digit4:3};i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{i18n:c}=e;return p.push(t("div",{"mx5-owner":i,"mx5-view":"designer/header",class:"d-aj"}),t("div",{"mx5-owner":i,"mx5-view":"designer/toolbar",class:"d-G d-ak"}),t("div",{"mx5-owner":i,"mx5-view":"designer/axis?scroll=stage",class:"d-B d-G"}),t("div",{"mx5-owner":i,"mx5-view":"designer/stage",id:"stage",class:"d-H d-al d-an"})),r=[t(0,d(c("g")),1)],n=[t("div",o,r)],s?n.push(s):n.push(s=t("div",{_:"_",class:"d-A d-t",id:"ss"})),p.push(t("div",a,n)),l?p.push(l):p.push(l=t("div",{_:"a",id:"sdsz",class:"d-E d-ao"})),t(i,0,p)},init(){d.State.on("_",e=>{(e=>{let t=d.State.get("_S"),i=d.State.get("_T"),s=d.State.get("_U"),l=d.State.get("_m"),a=d.State.get("_n"),{elements:o,map:r}=n._2(e.layouts);i.length=0,i.push(...o),l.length=0,e.xLines&&l.push(...e.xLines),a.length=0,e.yLines&&a.push(...e.yLines);let p={};if(s.length=0,e.select)for(let t of e.select){let e=r[t.id];e&&(p[e.id]=1,s.push(e))}Object.assign(t,e.page),d.State.set({_c:e.scale||1,_3:p})})(e.json)}),d.State.on("d",e=>{let t=d.node("stage");t&&(t.scrollLeft=0,t.scrollTop=0);let{page:i,layouts:s}=e._L,{elements:l}=n._2(s),a=m._7();Object.assign(a,i),d.State.set({_S:a,_T:[...l]}),g._8(),d.State.fire("b"),d.State.fire("a"),c._s()}),d.State.on("j",e=>{let t=d.node("ss");t&&(t.innerHTML=e.busy?x("f"):"")}),d.State.on("h",()=>{this.mxDialog("designer/content",{width:800})}),d.State.set({_9:m,_S:m._7(),_c:p._c,_T:[],_U:[],_3:{},_m:[],_n:[]}),c._V()},async render(){await this.digest(),h._a_()},"$doc<keydown>"(e){if((()=>{let e=document.activeElement;return f.test(e.tagName)||e.isContentEditable})())return;let{shiftKey:t,metaKey:i,ctrlKey:s,code:l}=e;if(l!=u._||!t||s||i)s||i||!d.has(b,l)?(i||s)&&l==u.a&&(e.preventDefault(),d.State.fire("h",{shift:e.shiftKey})):((e,t)=>{let i=h._4()[e];i&&(t?h._5(i.id):h._6(i.id))})(b[l],t);else{h._aa()?h._ab():h._ac()}}}).merge(r)}),define("designer/keys",[],(e,t,i)=>{i.exports={b:"Backspace",c:"Delete",d:"Tab",_:"KeyZ",e:"KeyY",a:"KeyS",f:"Equal",g:"Minus",h:"Digit0"}}),define("designer/props",[],(e,t,i)=>{i.exports={_ad:1,_ae:2,_af:3,_ag:4,_ah:5,_ai:6,_aj:7,_ak:8,_al:9,_am:10,_an:11,_ao:12,_ap:13}}),define("designer/service",["magix"],(e,t,i)=>{const s=e("magix");let l=s.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set({data:i.data}),t()}).catch(e=>{t({msg:e.message})})});l.add([{name:"_aq",url:s.config("getImageUrl"),cache:18e5},{name:"_ar",url:s.config("getFieldUrl"),cache:18e5},{name:"_as",cache:18e5}]),i.exports={fetch:(e,t)=>(new l).all(e,t),save:(e,t)=>(new l).save(e,t)}}),define("designer/stage-dragdrop",["magix","../gallery/mx-dragdrop/index","../gallery/mx-runner/index","./const","./history","./stage-elements"],(e,t,i)=>{const s=e("magix"),l=e("../gallery/mx-dragdrop/index"),a=e("../gallery/mx-runner/index"),o=e("./const"),d=e("./history"),n=e("./stage-elements");i.exports={_aB(e,t){let i,r=null,p=null,c=null,h=null,g=null,u=this,x=0,m=0,f=null,b=null,_=0,y=()=>{p=null,h=null,r=null,g=null,_=0},v=()=>{let t=e.getBoundingClientRect(),i=e.scrollWidth>e.clientWidth+o._F,s=e.scrollHeight>e.clientHeight+o._F;f.pageY>t.top&&f.pageY<t.top+t.height&&f.pageX>t.left&&f.pageX<t.left+t.width&&(i||s)?t.top+t.height-o._E<f.pageY?e.scrollTop+e.clientHeight+o._F<e.scrollHeight?++x>o._I&&(c.display="none",e.scrollTop+=o._H):x=0:t.top+o._E>f.pageY?e.scrollTop<o._F?x=0:++x>o._I&&(e.scrollTop-=o._H,c.display="none"):t.left+o._D>f.pageX?e.scrollLeft<o._F?x=0:++x>o._I&&(e.scrollLeft-=o._H,c.display="none"):t.left+t.width-o._D<f.pageX&&e.scrollLeft+e.clientWidth+o._F<e.scrollWidth?++x>o._I&&(c.display="none",e.scrollLeft+=o._H):x=0:x=0};s.State.on("e",d=>{if(f=d,m||(m=1,i||(i=s.node("sdsz")),i.classList.remove("d-E"),e.addEventListener("scroll",y),e.classList.remove("d-am"),b=n._at(),a._au(o._G,v)),x)return;let w=l._ax(d.clientX,d.clientY);if(d.copy!=_&&(_=d.copy,p=null),w!=p){p=w,c||(c=s.node(t+"_bar").style),h||(h=s.node("stage_outer").getBoundingClientRect());let e=u._ay(b,w,d.moved,_);r=e||null}if(r){let e=u._az(r,d);e?(g=e,c.left=e.rect.left-h.left+"px",c.top=e.rect.top-h.top+"px",c.width=e.rect.width+"px",c.display="block"):(g=null,c.display="none")}else c&&(g=null,c.display="none")}),s.State.on("f",()=>{x=0,m&&(m=0,i.classList.add("d-E"),e.removeEventListener("scroll",y),a._av(v)),g&&(c.display="none",r.moved?n._aw(g,r.moved,_):n._R(g,!0),s.State.fire("b"),d._s()),y(),b=null}),s.State.on("g",()=>{let e=s.State.get("_Q"),t=s.State.get("_T"),i=s.State.get("_U")[0],l=!0;i&&"layout"==i.role&&(t=i.props.columns[0].elements,l="layout"==e.role);let{id:a}=n._R({elements:t,ctrl:e,index:0},l);s.State.fire("b"),d._s(),n._aA(a)})},_az(e,{pageY:t,copy:i}){let l=!1,{entity:a,subIndex:d,ctrl:n,moved:r,role:p}=e;if(r&&"stage"!=p){let e=t=>{if(t.id==a.id)l=!0;else if("layout"==t.role)for(let i of t.props.columns){for(let t of i.elements)if(e(t),l)break;if(l)break}};e(r)}if(!i&&l)return;let c=(e.layout||e.node).getBoundingClientRect(),h={left:c.left,top:c.top,width:c.width,height:c.height};if("stage"==e.role){let t=e.elements.length;return t&&(h.top+=h.height),{ctrl:e.ctrl,elements:e.elements,index:t,rect:h}}if("layout"==e.role){let s=e.index,l=s;h.top+h.height/2<t?(h.top+=h.height,s++,l++):l--;let a=e.ownerList[l];return!i&&a&&r&&a.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}if("column"==e.role){let l=e.index,p=l,g=h.top+o._C>=t,u=h.top+h.height-o._C<=t;if(u?(l++,p++,h.top+=h.height):p--,g||u){let t=e.ownerList[p];return!i&&t&&r&&t.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:l,rect:h}}g=(h={left:(c=e.node.getBoundingClientRect()).left,top:c.top,width:c.width,height:c.height}).top+o._C>=t;let x,m=a.props.columns[d].elements,f=m.length;if(f){if(g?(l=0,x=m[0]):(l=f,x=m[f-1]),!i&&r&&r.id==x.id)return;h={left:(c=s.node(x.id).getBoundingClientRect()).left,top:c.top+(g?0:c.height),width:c.width,height:c.height}}else l=0;return{elements:m,ctrl:n,index:l,rect:h}}{let s=e.index,l=s;h.top+h.height/2<t?(h.top+=h.height,s++,l++):l--;let a=e.ownerList[l];return!i&&a&&r&&a.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}},_ay(e,t,i,l){let a=s.State.get("_Q"),o=s.node("stage_canvas");if((a||i)&&s.inside(t,o)){let d=s.State.get("_T");if(t==o){let e=d[d.length-1],t=o;if(!l&&i&&e.id==i.id)return;return e&&(t=s.node(e.id)),{moved:i,elements:d,ctrl:a,role:"stage",node:t}}{let d="";do{if(d=t.getAttribute("role"))break;t=t.parentNode}while(t!=o);if(d){let r=t.getAttribute("column"==d?"pid":"eid"),{entity:p,pInfo:c}=n._aC(e,r);if(i&&!l&&i.id==p.id)return;p.props.locked&&(d=(t=s.node(p.id)).getAttribute("role"));let h=-1,g=null;if("column"==d)for(h=0|t.getAttribute("index"),g=t;g!=o&&"layout"!=g.getAttribute("role");)g=g.parentNode;return{ctrl:a,role:d,moved:i,subIndex:h,layout:g,entity:p,index:c.index,ownerList:c.elements,node:t}}}}return null}}}),define("designer/stage-elements",["magix","../gallery/mx-pointer/follower","./history","./stage-selection"],(e,t,i)=>{const s=e("magix"),l=e("../gallery/mx-pointer/follower"),a=e("./history"),o=e("./stage-selection");let d=(e,t)=>{let i=s.node(e);if(t||(t=1),t>5)return;if(!i)return void setTimeout(d,20,e,t++);let l=s.node("stage_outer").parentNode,a=l.getBoundingClientRect(),o={x:a.left,y:a.top,width:a.width-20,height:a.height-20},n={x:(a=i.getBoundingClientRect()).left,y:a.top,width:a.width,height:a.height};if(!((e,t)=>{let i=e.width/2,s=e.height/2,l=t.width/2,a=t.height/2,o=e.x+i,d=e.y+s,n=t.x+l,r=t.y+a;return Math.abs(n-o)<=i+l&&Math.abs(r-d)<=s+a})(o,n)){let e=l.clientHeight/3;l.classList.add("d-am"),l.scrollTop=n.y+l.scrollTop-o.y-e}},n=(e,t)=>{if("id"!=e)return t};i.exports={_R(e,t){let i=e.ctrl,l=i._7(),a={id:s.guid("e_"),role:i.role,ctrl:i,props:l};return e.elements.splice(e.index,0,a),t&&o._8(a),a},_aw(e,t,i){let l=null,a=e=>{let s=0,o=!1;for(let d of e){if(d.id==t.id){i||e.splice(s,1,null),l=e,o=!0;break}if("layout"==d.role)for(let e of d.props.columns)if(a(e.elements),o)break;s++}},d=s.State.get("_T");if(a(d),i){let e=JSON.stringify(t,n),i=JSON.parse(e),l=s.State.get("_N"),{elements:a}=l._2([i]);t=a[0],o._8(t)}if(e.elements.splice(e.index,0,t),!i)for(let e=l.length;e--;)if(null===l[e]){l.splice(e,1);break}},_at(){let e=s.State.get("_T"),t={},i={},l=(e,s,a)=>{let o=0;for(let d of e){if(t[d.id]={pId:s,index:o,elements:e,role:a},i[d.id]=d,"layout"==d.role)for(let e of d.props.columns)l(e.elements,d.id,d.role);o++}};return l(e,0,"stage"),{idMap:t,elements:i}},_aC(e,t){let{idMap:i,elements:l}=e,a=t,o=t;do{l[a].props.locked&&(o=a),a=i[a].pId}while(s.has(i,a));let d=i[o];return{entity:l[o],pInfo:d}},_aD(e,t){let{element:i}=e.params,d=this._at(),{entity:n}=this._aC(d,i.id),r=s.State.get("_U");if(void 0!==e.button&&0!=e.button){let e=!1;for(let t of r)if(t.id===i.id){e=!0;break}return void(e||o._8(n)&&a._s())}let p=!1;for(let e of r)n.id==e.id&&(p=!0);if(p||(o._8(n)&&a._s(),r.length=0,r.push(n)),n.props.locked)return;let c,h=n.ctrl,g=1,u=()=>{s.State.fire("e",{pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,copy:g,moved:n})},x=e=>{c&&(l._x(c,g=e.shiftKey),u())},m=e=>{c&&(l._x(c,g=e.shiftKey),u())};s.State.on("k",x),s.State.on("l",m),l._P(h.icon),t._w(e,e=>{g=e.shiftKey,c=e,l._x(e,e.shiftKey),u()},e=>{if(l._y(),s.State.off("k",x),s.State.off("l",m),e){let t=s.node("stage_outer").parentNode,i=t.scrollTop;e.preventDefault(),s.State.fire("f"),i!=t.scrollTop&&(t.scrollTop=i)}})},_aE(){let e=s.State.get("_U"),t=s.State.get("_T"),i=!1;if(e.length){let l=s.toMap(e,"id"),a=e=>{for(let t,s=e.length;s--;)if(!(t=e[s]).props.locked)if(l[t.id])i=!0,e.splice(s,1);else if("layout"==t.role)for(let e of t.props.columns)a(e.elements)};a(t),i&&o._8()}return i},_aF(e){let t=s.State.get("_U"),i=s.State.get("_T");if(i.length){let s=t.length,l=t[0],n=null;if(0===s||s>1)n=i[e.shiftKey?i.length-1:0];else{let t=null,s=null,a=null,o=null,d=!1,r=l.id,p=e=>{for(let i of e)if(i.id==r?(d=!0,t=i):t&&!s?s=i:d?o=i:a=i,"layout"==i.role&&!i.props.locked)for(let e of i.props.columns)p(e.elements)};p(i),e.shiftKey?a?n=a:"layout"==(n=i[i.length-1]).role&&o&&(n=o):n=s||i[0]}l&&n.id==l.id||(o._8(n),a._s(),d(n.id))}},_aA:d}}),define("designer/stage-selection",["magix"],(e,t,i)=>{const s=e("magix");i.exports={_8(e){let t=s.State.get("_U"),i=t.length,l=!1;if(i||e){let a=i>1?null:t[0];t.length=0,e?(t.push(e),l=e!=a):i&&(l=!0),l&&(s.State.set({_3:s.toMap(t,"id")}),s.State.fire("m"))}return l}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-selection","./stage-dragdrop"],(e,t,i)=>{const s=e("magix"),l=e("../gallery/mx-dragdrop/index"),a=e("./history"),o=e("./keys"),d=e("./stage-elements"),n=e("./stage-selection"),r=e("./stage-dragdrop");s.applyStyle("d-e",".d-aq{outline:0;display:flex;position:relative}.d-ar{padding:100px 240px}.d-as{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}@-webkit-keyframes d-a{0%{background-position:10px 0}to{background-position:0 0}}@keyframes d-a{0%{background-position:10px 0}to{background-position:0 0}}.d-at{height:2px;background:linear-gradient(45deg,#fa742b 25%,#fff 0,#fff 50%,#fa742b 0,#fa742b 75%,#fff 0,#fff);background-size:10px 10px;position:absolute;display:none;pointer-events:none;margin-top:-1px;transition:all .08333333s;animation:d-a .4s linear infinite reverse}");let p=/^(?:input|textarea)$/i;i.exports=s.View.extend({tmpl:(e,t,i,s,l,a,o)=>{let d,n,r,p,c,h=[],{scale:g,page:u,layouts:x}=e;p=[];for(let e=x.length,l=0;l<e;l+=1){let e=x[l];c=[t("div",{"mx5-owner":i,$:"layouts",class:"d-B",id:s(e.id),"mx5-view":"elements/"+s(e.ctrl.role)+"/designer?element="+o(a,e,"\x1eb."+l),"mx5-mousedown":i+"\x1e\x1e_aI({element:'"+o(a,e,"\x1eb."+l)+"'})",role:s(e.ctrl.role),eid:s(e.id)})],p.push(...c)}return r="min-width:"+s(u.width)+"px;min-height:"+s(u.height)+"px;background:"+s(u.background)+";",u.backgroundImage&&(r+="background-image:url("+s(u.backgroundImage)+");background-repeat:"+s("full"==u.backgroundRepeat?"no-repeat":u.backgroundRepeat)+";background-size:","full"==u.backgroundRepeat?r+="100% 100%":r+=s(u.backgroundWidth)+"px "+s(u.backgroundHeight)+"px;"),n=[t("div",{class:"d-as",id:"stage_canvas",style:r},p)],d=[t("div",{class:"d-ar",style:"transform-origin:0 0;transform:scale("+s(g)+");padding:"+s(100/g)+"px "+s(240/g)+"px"},n),t("div",{class:"d-at",id:i+"_bar"})],h.push(t("div",{class:"d-aq",id:"stage_outer","mx5-contextmenu":i+"\x1e_A()","mx5-mousedown":i+"\x1e_aJ()",tabindex:"0","mx5-keydown":i+"\x1e_aK()","mx5-keyup":i+"\x1e_aL()"},d)),t(i,0,h)},init(){let e=e=>{let t=s.State.get("_T");e?this.digest({layouts:t}):this.set({layouts:t})},t=this.render.bind(this);s.State.on("_",t),s.State.on("c",t),s.State.on("a",t),s.State.on("b",e),s.State.on("m",e),s.State.on("e",()=>{this._aG=1}),s.State.on("f",()=>{this._aG=0}),r._aB(this.root,this.id)},render(){let e=s.State.get("_S"),t=s.State.get("_T");this.digest({layouts:t,scale:s.State.get("_c"),page:e})},"_aI<mousedown>"(e){"layout"==e.from||e._aH||d._aD(e,this)},"_aJ<mousedown>"(e){let t=e.target;s.inside(s.node("stage_canvas"),t)&&(e.shiftKey||e.metaKey||e.ctrlKey||n._8()&&a._s())},"$doc<keydown>"(e){this._aG||(()=>{let e=document.activeElement;return p.test(e.tagName)||e.isContentEditable})()||(e.metaKey||e.ctrlKey?e.code==o._?(e.preventDefault(),e.shiftKey?a._Z():a._Y()):e.code==o.e&&(e.preventDefault(),a._Z()):e.code==o.d?(e.preventDefault(),d._aF(e)):e.code!=o.b&&e.code!=o.c||(e.preventDefault(),d._aE()&&(s.State.fire("b"),a._s())))},"_aK<keydown>"(e){s.State.fire("k",e)},"_aL<keyup>"(e){s.State.fire("l",e)},"_A<contextmenu>"(e){e.preventDefault()}}).merge(l)}),define("designer/tojson",["magix"],(e,t,i)=>{const s=e("magix");let l=(e,t)=>{if(!e.startsWith("@")&&!e.startsWith("_"))return t};i.exports=(()=>{let e=s.State.get("_T"),t=s.State.get("_S"),i=s.State.get("_N")._1(),a={unit:"px"};for(let e of i.props)e.json&&(a[e.key]=t[e.key]);let o=[],d=(e,t)=>{for(let{role:i,ctrl:s,props:l,id:a}of e){let e={id:`${a}`,role:i,props:{}};for(let t of s.props)t.json&&(t.encode?t.encode(e.props,l):t.read?e.props[t.key]=t.read(l[t.key]):e.props[t.key]=l[t.key]);if("layout"==i)for(let t of e.props.columns)if(t.elements){let e=[];d(t.elements,e),t.elements=e}t.push(e)}};d(e,o);let n={page:a,layouts:o};return JSON.stringify(n,l,2)})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{let s;const l=e("magix"),a=e("./stage-elements"),o=e("./history");i.exports=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d=[],{elements:n,i18n:r}=e,p=n.length;return s?d.push(s):d.push(s=t("i",{_:"_",class:"d-ax"})),o=[t(0,"\ue600")],a="d-_ d-av",(p<1||n[0].props.locked)&&(a+=" d-ay"),d.push(t("i",{title:l(r("h"))+"(Delete)","mx5-click":i+"\x1e_aM()",class:a},o)),t(i,0,d)},init(){let e=this.render.bind(this);l.State.on("_",e),l.State.on("m",e),l.State.on("n",e)},render(){this.digest({elements:l.State.get("_U")})},"_aM<click>"(e){e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled")||a._aE()&&(l.State.fire("b"),o._s())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{const s=e("magix"),l=e("./history");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let l,a,o=[],{status:d,i18n:n}=e;return a=[t(0,"\ue682")],l="d-_ d-av",d.canUndo||(l+=" d-ay"),o.push(t("i",{title:s(n("i")),"mx5-click":i+"\x1e_aN({s:'-',b:"+s(d.canUndo)+"})",class:l},a)),a=[t(0,"\ue682")],l="d-_ d-av d-O",d.canRedo||(l+=" d-ay"),o.push(t("i",{title:s(n("j")),"mx5-click":i+"\x1e_aN({s:'+',b:"+s(d.canRedo)+"})",class:l},a)),t(i,0,o)},init(){let e=this.render.bind(this);s.State.on("_",e),s.State.on("i",e)},render(){this.digest({status:l._W()})},"_aN<click>"(e){if(e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled"))return;let{s:t,b:i}=e.params;i&&("-"==t?l._Y():l._Z())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{const s=e("magix"),l=e("../panels/index");i.exports=s.View.extend({tmpl:(e,t,i,s,l,a,o,d)=>{let n,r,p,c=[],{panels:h,i18n:g}=e;for(let e=h.length,l=0;l<e;l+=1){let e=h[l];p=[t(0,s(e.icon),1)],r="d-_ d-av",e._&&(r+=" d-aw"),n=[t("i",{"mx5-click":i+"\x1e_6({id:'"+d(e.id)+"'})",title:s(g(e._?"k":"l",e.title,l+1)),class:r},p)],c.push(...n)}return t(i,0,c)},init(){s.State.on("o",()=>{this.render()})},render(){this.digest({panels:l._4()})},"_6<click>"(e){let{id:t}=e.params;l._6(t)}})}),define("designer/toolbar-scale",["magix","./history","./keys"],(e,t,i)=>{let s={class:"d-az"};const l=e("magix"),a=e("./history"),o=e("./keys");i.exports=l.View.extend({tmpl:(e,t,i,l)=>{let a,o,d=[],{scale:n,i18n:r}=e;return o=[t(0,"\ue602")],a="d-_ d-av",n<=.5&&(a+=" d-ay"),d.push(t("i",{"mx5-click":i+"\x1escale({s:'-'})",title:l(r("zoomOut")),class:a},o)),o=[t(0,l(100*n)+"%")],d.push(t("b",s,o)),o=[t(0,"\ue699")],a="d-_ d-av",n>=2&&(a+=" d-ay"),d.push(t("i",{"mx5-click":i+"\x1escale({s:'+'})",title:l(r("zoomIn")),class:a},o)),t(i,0,d)},init(){let e=this.render.bind(this);l.State.on("c",e),l.State.on("_",e)},render(){this.digest({scale:l.State.get("_c")})},"scale<click>"(e){let{s:t}=e.params,i=this.get("scale"),s=i;"+"==t?(i+=.5)>2&&(i=2):(i-=.5)<.5&&(i=.5),s!=i&&(l.State.set({_c:i}),l.State.fire("c",{step:i/s}),a._s())},"$doc<keydown>"(e){let t=this.get("scale"),i=t,{metaKey:s,ctrlKey:d,code:n}=e;(s||d)&&(n==o.f?(e.preventDefault(),(t+=.5)>2&&(t=2)):n==o.g?(e.preventDefault(),(t-=.5)<.5&&(t=.5)):n==o.h&&(e.preventDefault(),t=1),i!=t&&(l.State.set({_c:t}),l.State.fire("c",{step:t/i}),a._s()))}})}),define("designer/toolbar",["magix","../panels/index","./toolbar-do","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{let s,l;e("./toolbar-do"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels");let a={class:"d-A d-L d-M d-v"};const o=e("magix"),d=e("../panels/index");o.applyStyle("d-f",".d-au{height:22px}.d-av{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.d-av:hover{background:#e6e6e6;color:#333}.d-aw,.d-aw:hover{background:#c4c4c4}.d-ax{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.d-ay{color:#aaa;cursor:not-allowed}.d-ay:hover{color:#aaa;background:transparent}.d-az{font-weight:400;width:40px;display:inline-block;text-align:center}"),i.exports=o.View.extend({tmpl:(e,t,i,o)=>{let d,n,r,p=[],{allOpen:c,i18n:h}=e;return s?p.push(s):(d=[t("div",{"mx5-owner":i,class:"d-au","mx5-view":"designer/toolbar-do"}),t("div",{"mx5-owner":i,class:"d-au","mx5-view":"designer/toolbar-del"})],p.push(s=t("div",{_:"_",class:"d-L d-M d-v d-z"},d))),d=[t("div",{"mx5-owner":i,class:"d-au","mx5-view":"designer/toolbar-scale"})],l?d.push(l):d.push(l=t("i",{_:"a",class:"d-ax"})),d.push(t("div",{"mx5-owner":i,class:"d-au","mx5-view":"designer/toolbar-panels"})),l?d.push(l):d.push(l=t("i",{_:"a",class:"d-ax"})),r=[t(0,"\ue676")],n="d-_ d-av",c&&(n+=" d-aw"),d.push(t("i",{"mx5-click":i+"\x1e_aO()",title:o(h(c?"m":"n")),class:n},r)),p.push(t("div",a,d)),t(i,0,p)},init(){let e=this.render.bind(this);o.State.on("o",e),this.on("destroy",()=>{o.State.off("o",e)})},render(){this.digest({allOpen:d._aa()})},"_aO<click>"(){this.get("allOpen")?d._ab():d._ac()}})});