/*!Sea.js 2.2.3|https://github.com/seajs/seajs/blob/master/LICENSE.md*/
(e=>{if(e.seajs)return;let t,i,s,a=e.seajs={},l=a.data={},o=e=>t=>({}).toString.call(t)=="[object "+e+"]",d=o("Object"),n=o("String"),r=Array.isArray||o("Array"),p=o("Function"),c=o("Undefined"),h=0,g=()=>h++,u=/[^?#]*\//,x=/\/\.\//g,f=/\/[^/]+\/\.\.\//,m=/([^:/])\/\//g,b=e=>e.match(u)[0],_=/^([^/:]+)(\/.+)$/,y=/^\/\/.|:\//,v=/^.*?\/\/.*?\//,w=(e,t)=>{let i,s=e.charAt(0);if(y.test(e))i=e;else if("."===s)i=(e=>{for(e=e.replace(x,"/");e.match(f);)e=e.replace(f,"/");return e=e.replace(m,"$1/")})((t?b(t):l.cwd)+e);else if("/"===s){let t=l.cwd.match(v);i=t?t[0]+e.substring(1):e}else i=l.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i},k=(e,t)=>{if(!e)return"";return e=(e=>{let t=e.length-1,i=e.charAt(t);return"#"===i?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===i?e:e+".js"})(e=(e=>{let t,i=l.paths;return i&&(t=e.match(_))&&n(i[t[1]])&&(e=i[t[1]]+t[2]),e})(e=(e=>{let t=l.alias;return t&&n(t[e])?t[e]:e})(e))),w(e,t)},S=document,z=b(S.URL),T=S.scripts,j=T[T.length-1],L=b((e=>e.hasAttribute?e.src:e.getAttribute("src",4))(j)||z),A=S.head,I=A.getElementsByTagName("base")[0],C=/\.css(?:\?|$)/i,B=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,M=(e,t,i)=>{let s="onload"in e;if(i&&(B||!s))return void setTimeout(()=>{E(e,t)},1);let a=()=>{e.onload=e.onerror=e.onreadystatechange=null,i||l.debug||A.removeChild(e),e=null,t()};s?(e.onload=a,e.onerror=a):e.onreadystatechange=(()=>{/loaded|complete/.test(e.readyState)&&a()})},E=(e,t)=>{let i,s=e.sheet;if(B)s&&(i=!0);else if(s)try{s.cssRules&&(i=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(i=!0)}setTimeout(()=>{i?t():E(e,t)},20)},F=a.cache={},H={},N={},V={},Y=1,O=2,R=3,X=4,K=5,P=6;function U(e,t){this.uri=e,this._cw=t||[],this.exports=null,this.status=0,this._cx={},this._cy=0}U.prototype.resolve=function(){let e=this,t=e._cw,i=[];for(let s=0,a=t.length;s<a;s++)i[s]=k(t[s],e.uri);return i},U.prototype.load=function(){let e=this;if(e.status>=R)return;e.status=R;let t,i=e.resolve(),s=e._cy=i.length;for(let a=0;a<s;a++)(t=U.get(i[a])).status<X?t._cx[e.uri]=(t._cx[e.uri]||0)+1:e._cy--;if(0===e._cy)return void e.onload();let a={};for(let e=0;e<s;e++)(t=F[i[e]]).status<Y?t.fetch(a):t.status===O&&t.load();for(let e in a)a.hasOwnProperty(e)&&a[e]()},U.prototype.onload=function(){let e=this;e.status=X,e._cz&&e._cz();let t,i,s=e._cx;for(t in s)s.hasOwnProperty(t)&&((i=F[t])._cy-=s[t],0===i._cy&&i.onload());delete e._cx,delete e._cy},U.prototype.fetch=function(e){let i=this,a=i.uri;if(i.status=Y,!a||N[a])return void i.load();if(H[a])return void V[a].push(i);H[a]=!0,V[a]=[i];let o=()=>{delete H[a],N[a]=!0,s&&(U.save(uri,s),s=null);let e,t=V[a];for(delete V[a];e=t.shift();)e.load()},d=()=>{((e,i,s,a)=>{let l=C.test(e),o=S.createElement(l?"link":"script");s&&(o.charset=s),c(a)||o.setAttribute("crossorigin",a),M(o,i,l,e),l?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),t=o,I?A.insertBefore(o,I):A.appendChild(o),t=null})(a,o,l.charset,l.crossorigin)};e?e[a]=d:d()},U.prototype.exec=function(){let e=this;if(e.status>=K)return e.exports;e.status=K;let t=e.uri,i=e=>U.get(i.resolve(e)).exec();i.resolve=(e=>k(e,t)),i.async=((e,s)=>(U.use(e,s,t+"__cA_"+g()),i));let s=e.factory,a=p(s)?s(i,e.exports={},e):s;return void 0===a&&(a=e.exports),delete e.factory,e.exports=a,e.status=P,a},U.define=function(e,a,l){let o=arguments.length;1===o?(l=e,e=void 0):2===o&&(l=a,r(e)?(a=e,e=void 0):a=void 0),!r(a)&&p(l)&&(a=[]);let d={id:e,uri:k(e),deps:a,factory:l};if(!d.uri&&S.attachEvent){let e=(()=>{if(t)return t;if(i&&"interactive"===i.readyState)return i;let e=A.getElementsByTagName("script");for(let t=e.length;t--;){let s=e[t];if("interactive"===s.readyState)return i=s}})();e&&(d.uri=e.src)}d.uri?U.save(d.uri,d):s=d},U.save=((e,t)=>{let i=U.get(e);i.status<O&&(i.id=t.id||e,i._cw=t.deps||[],i.factory=t.factory,i.status=O)}),U.get=((e,t)=>F[e]||(F[e]=new U(e,t))),U.use=((t,i,s)=>{let a=U.get(s,r(t)?t:[t]);a._cz=(()=>{let t=[],s=a.resolve();for(let e=0,i=s.length;e<i;e++)t[e]=F[s[e]].exec();i&&i.apply(e,t),delete a._cz}),a.load()}),a.use=((e,t)=>{U.use(e,t,l.cwd+"__ci_"+g())}),e.define=U.define,a.require=(e=>{let t=U.get(k(e));return t.status<K&&(t.onload(),t.exec()),t.exports}),l.base=L,l.cwd=z,l.charset="utf-8",a.config=(e=>{for(let t in e){let i=e[t],s=l[t];if(s&&d(s))for(let e in i)s[e]=i[e];else r(s)&&(i=s.concat(i)),l[t]=i}return a})})(this),(e=>{window.define?define("magix5",e):window.Magix=e()})(()=>{let e=0,t=[],i=window,s=document,a=i.setTimeout,l=encodeURIComponent;function o(){}let d,n=JSON.stringify,r=s.head,p=i.performance,c=p.now.bind(p),h="prototype",g=Object[h].toString,u=e=>g.call(e).slice(8,-1),x=e=>"Object"==u(e),f=Array.isArray,m=t=>(t||"_")+e++,b=e=>s.getElementById(e),_=(e,t)=>e.innerHTML=t,y={rootId:m(),wait:o,error(e){throw e}},v=e=>!e||"object"!=typeof e,w=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},k=e=>{e["\x1ea"]=null},{assign:S,keys:z,hasOwnProperty:T}=Object,j=r.getAttribute,L=(e,t)=>j.call(e,t),A=(e,t,i)=>{t&&!A[e]&&(A[e]=1,i=s.createElement("style"),_(i,t),r.appendChild(i))},I=(e,t,i,s)=>{try{s=f(t)?e.apply(i,t):e.call(i,t)}catch(e){y.error(e)}return s},C=(e,t)=>e&&T.call(e,t),B=(e,t)=>{let i,s;if(v(t))"\x1e"==(i=t+"")[0]&&(t=e[i]);else for(i in t)s=t[i],s=B(e,s),t[i]=s;return t},M=(e,t)=>t.a-e.a;function E(e,t,i){(i=this).a=[],i.b=t||5,i.c=i.b+(e||20)}S(E[h],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let i=this,s=i.a,a="\x1e"+e,l=s[a],o=i.b;if(!l){if(s.length>=i.c)for(s.sort(M);o--;)(l=s.pop()).a>0&&i.del(l.o);l={d:e},s.push(l),s[a]=l}l.c=t,l.a=1},del(e){e="\x1e"+e;let t=this.a,i=t[e];i&&(i.a=-1,i.c="",t[e]=null)},has(e){return C(this.a,"\x1e"+e)}});let F={bubbles:!0,cancelable:!0},H=[],N=(e,t,i,s,a,l)=>{let o={a:a,b:i,c:t,d:e,e(e){a?I(i,e,l):i(e)}};H.push(o),e.addEventListener(t,o.e,s)},V=(e,t,i,s,a)=>{for(let l,o=H.length;o--;)if((l=H[o]).c==t&&l.a==a&&l.d==e&&l.b===i){H.splice(o,1),e.removeEventListener(t,l.e,s);break}},Y=new E,O=(e,t=1,i)=>(t&&Y.has(e)?i=Y.get(e):(i=I(Function(`return ${e}`)),t&&Y.set(e,i)),i),R=decodeURIComponent,X=new E,K=e=>{let t,i,s,a,l,o,d=X.get(e);if(!d){if(a={},-1==(l=e.indexOf("?"))?(t=e,o=""):(t=e.substring(0,l),o=e.substring(l+1)),o)for(l of o.split("&"))[i,s]=l.split("="),a[R(i)]=R(s||"");X.set(e,d={a:t,b:a})}return{path:d.a,params:S({},d.b)}},P=new E,U=(e,t,i)=>(P.has(e)?i=P.get(e):(i=O(e,0),e.includes("\x1e")?B(t,i):P.set(e,i)),i),q=0,W=[],$=()=>{let e,t,i,s=c(),l=y.wait;try{for(;;){if(e=W[q],i=W[q-1],t=W[q+1],W[q]=null,W[q-1]=null,W[q+1]=null,W[q+2]=null,q+=4,!e){l(0),W.length=q=0;break}if(e!=o&&(f(t)?e.apply(i,t):e.call(i,t)),c()-s>8&&W.length>q){l(1),a($);break}}}catch(e){y.error(e),a($)}},D=(e,t,i,s)=>{if(q||(q=1,a($)),s)for(let e=W.length-1;e>=q;e-=4)W[e]==s&&(W[e-3]=null,W[e-2]=o,W[e-1]=null,W[e]=null);W.push(i,e,t,s)},J=e=>e.__esModule||window.Symbol&&"Module"===e[Symbol.toStringTag],G=(e,t)=>{if(e){let i=[];seajs.use(e,(...e)=>{for(let t of e)i.push(J(t)?t.default:t);D(t,i)})}else D(t)},Z=(e,t,i,s)=>(o[h]=t[h],s=new o,S(s,i),s.constructor=e,e[h]=s,e),Q=e=>e;let ee,te,ie={fire(e,t){let i,s,a=this,l=a["\x1e"+e],o=0;if(t||(t={}),t.type=e,l)for(i=l.length;o<i;o++)(s=l[o]).a?(s.b=1,I(s.a,t,a),s.b=""):s.b||(l.splice(o--,1),i--);(l=a[`on${e}`])&&I(l,t,a)},on(e,t){let i="\x1e"+e;(this[i]||(this[i]=[])).push({a:t})},off(e,t){let i,s="\x1e"+e,a=this,l=a[s];if(t){if(l)for(i of l)if(i.a==t){i.a="";break}}else a[s]=null,a[`on${e}`]=null}},se={},ae=(e,t,i,s)=>{t.includes("\x1e")&&(s=se[e])&&B(s.a,i)},le=(e,t)=>{C(se,e)||(se[e]=t)},oe=(e,t,i,s,a,l,o)=>{for(t=e.c,a=e.d;t.length;)[i,o,s]=t.shift(),D(s,(l=a[i])&&I(l,o,a))},de=(e,t)=>{let i,s,a;for(i in e.b)(a=t?(s=se[i])&&w(s.root,t):1)&&e.unmount(i,1)},ne=e=>{let{d:t,root:i}=e;e.c=[],t&&(e.d=0,t.a&&(t.a=0,k(t),de(e),t.fire("destroy"),at(t,1),i&&e.f&&_(i,e.g))),e.h++},re=(e,t,i)=>{let s,a,l,o,{id:d,root:n,pId:r}=e;!e.f&&n&&(e.f=1,e.g=n.innerHTML),ne(e),n&&t&&(s=K(t),l=s.path,e.path=t,o=s.params,ae(r,t,o),e.i=l,(r=o["\x1e"])&&x(r)?o=r:S(o,i),a=e.h,G(l,t=>{a==e.h&&(t?(ct(t),l=new t(d,n,e,o),e.d=l,at(l),I(l.init,o,l),D(l.f,o,l),D(()=>{l.g(),l.tmpl||l.h||st(l)})):y.error(Error(`${d} cannot load:${l}`)))}))},pe=e=>e.b||(e.b=m(te));function ce(e,t){let i=this,s=pe(e);i.id=s,i.root=e,i.h=1,i.b={},i.pId=t,i.c=[],i.a={},le(s,i)}S(ce,{root:()=>ee,all:()=>se,byId:e=>se[e],byNode:e=>se[e.b]}),S(ce[h],{mount(e,t,i){let s,a=this,l=a.id,o=a.b,d=pe(e);return(s=se[d])||(C(o,d)||(a.j=0),o[d]=d,s=new ce(e,l)),re(s,t,i),s},unmount(e,t){let i,s;var a,l,o;e=e?this.b[t?e:e.b]:this.id,(i=se[e])&&(ne(i),s=i.pId,(l=se[a=e])&&(delete se[a],(o=l.root).a=0,o.b=0,l.id=l.root=l.pId=l.b=null),(i=se[s])&&C(i.b,e)&&(delete i.b[e],i.j=0))},children(e){return(e=this).j||(e.j=z(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=se[t.pId];return t},invoke(e,t){let i,s,a=this,l=a.c;return new Promise(o=>{(i=a.d)&&i.h?o((s=i[e])&&I(s,t,i)):l.push([e,t,o])})}});let he=new E(30,10),ge=/([\w\-]+)\x1e(\x1e)?([^(]+)\(([\s\S]*?)\)/,ue={},xe={},fe={},me={},be={},_e={},ye={capture:!0},ve={passive:!1},we={passive:!1,capture:!0};let ke=(e,i)=>{let s,a,l,o,n,r,p,c,h=[],g=e,u=L(e,"mx5-"+i),x=0;if(u&&((n=he.get(u))||(n={v:(n=u.match(ge)||t)[1],t:n[2],n:n[3],i:n[4]},he.set(u,n)),n=S({},n)),n&&!n.v||be[i]){if(""!==(c=g.c)){for(p=[g];g!=d&&(g=g.parentNode);){if(se[a=g.b]||(a=g.c)){c=a;break}p.push(g)}for(u of p)u.c=c||""}if(g=e.b,se[g]&&(x=c=g),c)do{if((s=se[c])&&(r=s.d)){if(o=(l=r.i)[i])for(g=o.length;g--;)l={r:a=o[g],v:c,n:a},a?!x&&e.matches(a)&&h.push(l):x&&h.push(l);if(r.tmpl&&!x)break;x=0}}while(s&&(c=s.pId))}return n&&h.push(n),h},Se=e=>{let t,i,s,a,l,o,n,{target:r,type:p}=e,c=[];for(;r&&1==r.nodeType&&r!=d&&!(e.cancelBubble||(i=r.d)&&i[p]);){if(i=1,c.push(r),(t=ke(r,p)).length)for(o of(c.length=0,t)){let{v:t,n:d,i:c,t:h}=o;if(!(a=(s=se[t])&&s.d)){0;break}a.h&&a.a&&((o=a[l=d+"\x1e"+p])&&(e.eventTarget=r,n=c?U(c,s.a):_e,e.params=n,I(o,e,a)),h||r==a.root||be[p]||(r=a.root,i=0))}i&&((s=r.b)&&(a=(s=se[s])&&s.d)&&a.j[p]&&(c.length=0),r=r.parentNode)}for(r of c)(i=r.d||(r.d={}))[p]=1},ze=(e,t,i,s)=>{let a=0|ue[e],l=0|fe[e],o=0|me[e],n=i?-1:1,r=i?V:N;4&s&&(l+=n,fe[e]=l),8&s&&(o+=n,me[e]=o);let p,c=xe[e];l&&o?p=we:l?p=ve:o&&(p=ye),a&&i!==a?p!=c&&(V(d,e,Se,c),N(d,e,Se,p)):r(d,e,Se,i?c:p),xe[e]=p,ue[e]=a+n,t&&(be[e]=(0|be[e])+n)};let Te={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},je=/[&<>"'\`]/g,Le=e=>null==e?"":""+e,Ae=e=>Te[e],Ie=e=>Le(e).replace(je,Ae),Ce={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Be=e=>Ce[e],Me=/[!')(*]/g,Ee=e=>l(Le(e)).replace(Me,Be),Fe=/[\\'"]/g,He=e=>Le(e).replace(Fe,"\\$&"),Ne=(e,t,i)=>(e[i]=t,i),Ve=(e,i,s)=>{if(e.a&&(s=e.tmpl)){let i,a=e.k,l=e.id,o=se[l],d={a:[],b:0},n=e.d,r=o.a;e.l=0,e.k={},i=s(n,Oe,l,Le,Ee,r,Ne,He,f);let p=()=>{if(e.a)for(i of((s=d.c||!e.h)&&st(e),d.a))D(i.g,t,i,"\x1e"+i.id)},c=()=>{if(e.m=i,e.n>1)e.n=1,p(),Ve(e);else{for(i of(e.n=0,p(),a=e.o))i();a.length=0}};D(Ge,[e.root,e.m,i,d,o,a,e,c])}},Ye={},Oe=(e,t,i,s)=>{let a;if(e){t=t||Ye;let l,o,d,n,r,p="",c=1==i,h={},g=0,u="<"+e,x="",f="",m=[],b=0;if(i&&1!=i)for(n of i){if(d=n.a,n.b==Xe){if(!d)continue;d=Ie(d)}f+=d,r&&n.b==Xe&&r.b==Xe?r.a+=n.a:(n.d&&(h[n.d]=(h[n.d]||0)+1,g++),l=l||n.e,r=n,m.push(n))}for(o in s=s||Ye,t)!1!==(d=t[o])&&null!=d?(!0===d&&(t[o]=d=s[o]?d:""),"id"==o||"mx5-key"==o?p=d:"_"!=o||p?"mx5-view"==o&&d&&(b=1,p||(p=e+"\x1e"+K(d).path)):p=d,"value"==o&&"textarea"==e?(f=d,x+=d):C(Re,o)||(u+=` ${o}="${d&&Ie(d)}"`)):s[o]||delete t[o];x+=u,a={a:u+=c?"/>":`>${f}</${e}>`,c:f,d:p,b:e,f:b,e:l||t.$,g:s,h:x,i:t,j:m,k:h,l:g,m:c}}else a={b:i?"\x1e":Xe,a:t+""};return a},Re={_:1,$:1,"mx5-key":1};let Xe=e;let Ke="http://www.w3.org/",Pe={svg:`${Ke}2000/svg`,math:`${Ke}1998/Math/MathML`},Ue=(e,t,i)=>{let a,l,o,d=0,n=i.g,r=t.g,p=i.i,c=t.i;if(t)for(a in c)C(p,a)||(d=1,(o=r[a])?e[o]="":e.removeAttribute(a));for(a in p)C(Re,a)||(l=p[a],(o=n[a])&&s.activeElement!=e?t&&e[o]==l||(d=1,e[o]=l):t&&c[a]==l||(d=1,e.setAttribute(a,l)));return d},qe=(e,t)=>{let i,a=e.b;return a==Xe?i=s.createTextNode(e.a):(i=s.createElementNS(Pe[a]||t.namespaceURI,a),Ue(i,0,e),_(i,e.c)),i},We=(e,t,i,s,a)=>{let l,o,d,n={};for(l=s;l>=i;l--,a--)(d=(o=e[l]).d)&&(o=n[d]||(n[d]=[])).push(t[a]);return n},$e=(e,t)=>e.d&&t.d==e.d||!e.d&&!t.d&&e.b==t.b||"\x1e"==t.b,De=(e,t,i,s)=>{i&&((s=se.b)?s.unmount():de(t,e))},Je=(e,t,i,s,a)=>{De(e,i,1==e.nodeType),t.removeChild(e),--s.b||D(a)},Ge=(e,t,i,s,a,l,o,d)=>{if(o.a)if(t){if(t.e||t.c!=i.c){let n,r,p,c,h,g=t.j,u=i.j,x=i.k,f=i.l,m=t.l,b=e.childNodes,y=0,v=g.length-1,w=0,k=u.length-1;0;let S,z=g[y],T=g[v],j=u[w],L=u[k],A=y,I=v;for(;y<=v&&w<=k;)if("\x1e"!=j.b&&"\x1e"!=L.b||(I=-1),z)if(T)if($e(z,j))s.b++,D(Ze,[b[A],e,z,j,s,a,l,o,d]),x[z.d]&&(x[z.d]--,f--,(c=h&&h[z.d])&&--h[z.d]),A++,z=g[++y],j=u[++w];else if($e(T,L))s.b++,D(Ze,[b[I],e,T,L,s,a,l,o,d]),x[T.d]&&(x[T.d]--,f--),I--,T=g[--v],L=u[--k];else if($e(z,L))r=b[A],e.insertBefore(r,b[I+1]),s.b++,D(Ze,[r,e,z,L,s,a,l,o,d]),x[z.d]&&(x[z.d]--,f--),I--,z=g[++y],L=u[--k];else if($e(j,T))r=b[I],e.insertBefore(r,b[A++]),s.b++,D(Ze,[r,e,T,j,s,a,l,o,d]),x[T.d]&&(x[T.d]--,f--),T=g[--v],j=u[++w];else{if(!h&&f>0&&m>0&&(h=We(g,b,y,v,I)),S=b[A],(c=h&&h[j.d])&&(c=c.pop())){if(p=z,c!=S){for(r=y+1,n=A+1;r<=v;r++)if((p=g[r])&&b[n++]==c){g[r]=null;break}y--,e.insertBefore(c,S)}x[p.d]&&x[p.d]--,s.b++,D(Ze,[c,e,p,j,s,a,l,o,d])}else h&&h[z.d]&&x[z.d]||se[S.b]&&!j.f?(s.c=1,e.insertBefore(qe(j,e),S),y--,I++):(s.b++,D(Ze,[S,e,z,j,s,a,l,o,d]));++A,z=g[++y],j=u[++w]}else T=g[--v];else z=g[++y];for(n=w,r=1;n<=k;n++,r++){if(p=u[n],s.c=1,"\x1e"==p.b){s.c=1,_(e,p.a);break}e.insertBefore(qe(p,e),b[I+r])}for(n=A;n<=I;n++)s.c=1,s.b++,D(Je,[b[n],e,a,s,d])}}else s.c=1,_(e,i.c);s.b||D(d)},Ze=(e,t,i,s,a,l,o,d,n)=>{if(d.a){0;let r=i.i,p=s.i;if(i.e||i.a!=s.a)if("\x1e"==s.b)a.c=1,_(t,s.a);else if(i.b==s.b){if(i.b==Xe)a.c=1,e.nodeValue=s.a;else if(!r._||r._!=p._){let t,c,h,g,u,x,f,m=p["mx5-view"],b=s.c,_=i.h!=s.h,y=se[e.b],v=m&&K(m);if(_&&(_=Ue(e,i,s))&&(a.c=1),m&&y&&y.i==v.path&&(g=y.d)){if(x=b!=i.c,f=m!=y.path,h=r.$,!x&&!f&&h)for(h of u=h.split(","))if("#"==h||C(o,h)){f=1;break}(f||x)&&(h=g.f,u=v.params,ae(y.pId,m,u),y.path=m,y.g=b,!1!==I(h,u,g)&&a.a.push(g),t=!g.tmpl)}else t=1,c=y;c&&(a.c=1,y.unmount()),t&&!s.m&&Ge(e,i,s,a,l,o,d,n)}}else a.c=1,De(e,l,1),t.replaceChild(qe(s,t),e)}--a.b||D(n)},Qe={},et=S({get:e=>e?Qe[e]:Qe,set(e){S(Qe,e)}},ie),tt=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,it=(e,t,i)=>(e.a?i=e:((i=function(e,t){for(t of i.a)I(t,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),st=e=>{let t,i;e.a&&(i=e.h,e.h=1,((e,t,i)=>{for(i of(t=t||e.root).querySelectorAll(`[mx5-view][mx5-owner="${e.id}"]`))i.a||(i.a=1,e.mount(i,L(i,"mx5-view")))})(t=e.owner),i||D(oe,t))},at=(e,t)=>{let i,{j:s,i:a,p:l,id:o}=e;for(i in s)ze(i,a[i],t,s[i]);for(i of(s=t?V:N,l))s(i.a,i.b,i.c,i.d,o,e)},lt={win:i,doc:s,root:""};function ot(...e){return S(this,...e),this}let dt=(e,t,i)=>{let s,a,l,o,d={};for(a of e)for(s in a)l=a[s],o=d[s],"ctor"!=s?(tt.test(s)&&(o?l=it(o,l):l.b=1),d[s]=l):i.push(l);for(s in d)C(t,s)||(t[s]=d[s])};function nt(...e){let t=this.a||(this.a=[]);return dt(e,this[h],t),this}let rt=e=>(function(...t){return I(e,t,this)}),pt=(e,t,i,s)=>{if(e)for(s of e)I(s,t,i)};let ct=e=>{if(!e["\x1e"]){e["\x1e"]=1;let t,i,s,a,l,o,d,n,r,p,c,g=e[h],u={},x=[],f={};for(d in g)if(t=g[d],i=d.match(tt))for(n of([,o,s,a,c]=i,p=c?O(c):_e,a=a.split(","))){if(l=lt[s],r=1,!1===p.passive&&(r|=4),p.capture&&(r|=8),o){if(l){x.push({c:t,a:l,b:n,d:p});continue}""===l&&(s=""),r=2,(l=f[n])||(l=f[n]=[]),l[s]||(l[s]=1,l.push(s))}u[n]|=r,(l=g[n=s+"\x1e"+n])?l.b&&(t.b?g[n]=it(t,l):C(g,d)&&(g[n]=t)):g[n]=t}g.g=g.render=rt(g.render),g.j=u,g.p=x,g.i=f,g.f=g.assign}};function ht(e,t,i,s,a){(a=this).root=t,a.owner=i,a.id=e,a.a=1,a.l=1,a.d={},a.k={},a.n=0,a.o=[],pt(ht.a,s,a)}function gt(){this.id=m("b"),this.a={}}S(ht,{merge:nt,extend:function e(t){let i=this,s=(t=t||{}).ctor;function a(e,t,l,o,d){i.call(d=this,e,t,l,o),s&&I(s,o,d),pt(a.a,o,d)}return a.merge=nt,a.extend=e,a.static=ot,Z(a,i,t)}}),S(ht[h],ie,{init:o,render:o,assign:o,get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let i,s,a,l=this,o=l.d,d=l.k,n=l.l;for(a in e)i=e[a],s=o[a],v(i)&&s==i||C(t,a)||(d[a]=1,n=1),o[a]=i;return l.l=n,l},digest(e,t){return e=this.set(e,t),new Promise(t=>{e.l?(e.n++,e.o.push(t),1==e.n&&Ve(e,1)):e.n?e.o.push(t):t()})},finale(){let e=this;return new Promise(t=>{e.n?e.o.push(t):t()})}}),S(gt[h],{get(e,t){let i,s=this.a;if(e){let t,i=f(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&s;)s=s[t];t&&(s=void 0)}return void 0!==t&&(i=u(t))!=u(s)&&(s=t),s},set(e){S(this.a,e)}});let ut=(e,t,i)=>s=>{if(i=e[t]){delete e[t];for(let e of i)I(e,s,i.a)}},xt=(e,t,i,s,a)=>{if(e.a)return e;if(e.b)return e.enqueue(xt.bind(e,e,t,i,s,a));e.b=1,f(t)||(t=[t]);let l=e.constructor,o=0,d=l.d,n=((e,t,i,s,a,l)=>{let o=[],d=null,n=0;return(t,r,p)=>{let h;n++;let g,u=t.b,x=u.a;if(o[r+1]=t,p?(d=p,h=1):l.has(x)||(x&&l.set(x,t),u.b=c(),(g=u.c)&&I(g,t,t),h=1),!i.a){let l=n==s;l&&(i.b=0,2==a&&(o[0]=d,I(e,o,i))),1==a&&I(e,[p||null,t,l,r],i)}}})(i,0,e,t.length,s,l.c);for(let e of t)if(e){let t,[i,s]=l.get(e,a),r=i.b.a,p=n.bind(i,i,o++);r&&d[r]?d[r].push(p):s?(r&&((t=[p]).a=i,d[r]=t,p=ut(d,r)),l.e(i,p)):p()}return e};function ft(){this.id=m("s"),this.f=[]}S(ft[h],{all(e,t){return xt(this,e,t,2)},save(e,t){return xt(this,e,t,2,1)},one(e,t){return xt(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,a(()=>{i.b=0,i.a||(t=i.f.shift())&&I(t,i.g=e)}))},destroy(e){(e=this).a=1,e.f=0}});let mt=(e,t)=>[n(t),n(e)].join("\x1e"),bt=S({add(e){let t,i=this.h;for(t of(f(e)||(e=[e]),e))if(t){let{name:e,cache:s}=t;t.cache=0|s,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,s=new gt;s.set(t),s.b={c:t.after,a:i&&mt(t,e)},x(e)&&s.set(e);let a=t.before;return a&&I(a,s,s),s},meta(e){return this.h[e.name||e]||e},get(e,t){let i,s,a=this;return t||(i=a.cached(e)),i||(i=a.create(e),s=1),[i,s]},cached(e){let t,i,s=this,a=s.c,l=s.meta(e),o=0|e.cache||l.cache;if(o&&(i=mt(l,e)),i){let e=s.d[i];e?t=e.a:(t=a.get(i))&&c()-t.b.b>o&&(a.del(i),t=0)}return t}},ie);ft.extend=((e,t,i)=>{function s(){ft.call(this)}return s.e=e,s.c=new E(t,i),s.d={},s.h={},S(s,bt),Z(s,ft)});let _t=0,yt={config:(e,t)=>(t=y,e&&(t=x(e)?S(t,e):t[e]),t),boot(e){_t||(_t=1,S(y,e),re(((e,t)=>(ee||(d=s.body,e=te=y.rootId,(t=b(e))||(t=d),ee=new ce(t)),ee))(),y.defaultView))},unboot(){_t&&ee&&(ee.unmount(),ee=null)},toMap:(e,t)=>{let i,s={};if(e)for(i of e)s[t&&i?i[t]:i]=t?i:1+(0|s[i]);return s},toTry:I,toUrl:(e,t,i)=>{let s,a,o,d=[];for(a in t)((s=t[a]+"")||C(i,a))&&(s=l(s),d.push(o=a+"="+s));return o&&(e+=(e&&(e.includes("?")?"&":"?"))+d.join("&")),e},parseUrl:K,guid:m,use:G,dispatch:(e,t,i)=>{let s=new Event(t,F);S(s,i),e.dispatchEvent(s)},guard:Q,type:u,has:C,inside:w,applyStyle:A,Cache:E,View:ht,Vframe:ce,State:et,Service:ft,Event:ie,mark:(e,t,i,s,a)=>(null!==e[a="\x1ea"]&&(i=e[a]||(e[a]={}),C(i,t)||(i[t]=0),s=++i[t]),i=>(i=e[a],i&&s===i[t])),unmark:k,node:b,task:D,taskFinale:()=>new Promise(e=>{D(e)}),taskComplete(e){let t=0,i=0,s=(...s)=>{++i==t&&e(...s)};return(...e)=>{t++,D(s,[...e])}}};return yt.default=yt,yt}),window.designer=(e=>{let t=document.getElementById("boot").src.replace(/\/[^/]+$/,"/");seajs.config({paths:{designer:t+"designer",elements:t+"elements",gallery:t+"gallery",i18n:t+"i18n",panels:t+"panels"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("d-_",'@font-face{font-family:d-_;src:url(//at.alicdn.com/t/font_890516_6qhte3162qj.eot);src:url(//at.alicdn.com/t/font_890516_6qhte3162qj.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.woff2) format("woff2"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.woff) format("woff"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_6qhte3162qj.svg#iconfont) format("svg")}*,:after,:before{box-sizing:inherit}.d-_{font-family:d-_;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(250,116,43,.2)}::selection{background-color:rgba(250,116,43,.2)}.d-a,.d-b{font-size:100%;margin:0;caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;max-width:100%;outline:none;transition:border-color .25s}.d-a:hover,.d-b:hover{border-color:#ccc}.d-a:focus,.d-b:focus,.d-c{outline:none;resize:none;border-color:#fa742b!important}.d-d{resize:none}.d-c:hover{border-color:#fa742b!important}.d-b{height:auto;overflow:auto}.d-a[disabled],.d-b[disabled]{background-color:#f5f5f5;cursor:not-allowed}.d-a::-moz-placeholder,.d-b::-moz-placeholder{color:#a9a9a9;opacity:1}.d-a::-moz-focus-inner{border-style:none;padding:0}.d-a[disabled]:hover,.d-b[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}.d-e{margin:0;outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;white-space:nowrap;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-e:focus,.d-e:hover{background-color:#bbb;color:#333}.d-f{background-color:#fa742b;color:#fff}.d-f:focus,.d-f:hover{background-color:#e25305;color:#fff}.d-e[disabled]{background-color:#f5f5f5;color:#999;cursor:not-allowed}.d-e[disabled]:hover{border-color:#e6e6e6;color:#999}.d-e::-moz-focus-inner{border-style:none;padding:0}.d-g{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.5}.d-g,.d-h{background-color:#fff}.d-h{padding:18px 25px}.d-i{background-color:#fff;padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6}.d-j{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.d-j:after,.d-j:before{content:""}.d-j:after,.d-j:before,.d-k{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:d-_ 1s ease-in-out infinite both;animation:d-_ 1s ease-in-out infinite both}.d-j:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.d-k{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes d-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes d-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.d-l{cursor:default;display:inline-block;max-width:100%;font-weight:400;cursor:pointer}.d-m{font-size:14px}.d-m,.d-n{margin:0;padding:0}.d-n{list-style-type:none;list-style-image:none}.d-o{border-style:none;height:auto;max-width:100%;vertical-align:top}.d-p{box-sizing:border-box;font-size:14px;line-height:1.5;font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif}.d-q{margin-right:2px}.d-r{transform:rotate(180deg)}.d-s{margin-right:5px}.d-t{margin-right:10px}.d-u{width:100%}.d-v{height:100%}.d-w{max-width:100%}.d-x{max-height:100%}.d-y{text-align:center}.d-z{float:left}.d-A{float:right}.d-B{position:relative}.d-C{margin:30px 0}.d-D{font-size:16px}html .d-E{display:none}.d-F:after,.d-F:before{content:" ";display:table}.d-F:after{clear:both}.d-G{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-H::-webkit-scrollbar,.d-H::-webkit-scrollbar-corner{height:4px;width:4px;background:#edeef3}.d-H::-webkit-scrollbar-thumb{background:#fa742b;border-radius:2px}.d-H::-webkit-scrollbar-thumb:hover{background:#ec5706}.d-I{scroll-behavior:smooth}.d-I::-webkit-scrollbar,.d-I::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}.d-J{white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.d-K{height:1px;line-height:1px;margin:5px 0;background:linear-gradient(90deg,transparent,rgba(125,118,132,.32941176470588235) 50%,transparent)}.d-L{display:flex}.d-M{align-items:center}.d-N{justify-content:center}.d-O{transform:scaleX(-1)}.d-P{position:-webkit-sticky;position:sticky;top:0}.d-Q:before{width:100%;height:100%;content:attr(data-tip);position:absolute;display:flex;justify-content:center;align-items:center}.d-R{overflow:hidden}');let s=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(s=e.getItem("l.lang")||s)}catch(e){}t.config(e),t.config({lang:s});let{State:a,View:l}=t;l.merge({ctor(){this.set({i18n:i})},_cp(e,t){let i;return t=t||150,(...s)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}}),document.title=i("e");let o=t.node("app"),d=0;o.classList.add("d-p"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",wait(e){e!=d&&a.fire("j",{busy:d=e})},error(e){setTimeout(()=>{throw e},0)}})})}),define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,i)=>{let s,a,l,o,d,n,r,p,c,h,g,u,x={class:"d-aY"},f={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},m={class:"d-B d-aQ"},b={class:"d-a3"},_={value:"value"};const y=e("magix"),v=e("../mx-dragdrop/index"),w=e("../mx-monitor/index");let{abs:k,min:S,max:z,round:T}=Math;y.applyStyle("d-i",'.d-aP{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.d-aP:hover{border-color:#ccc}.d-aQ,.d-aR{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.d-aR{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.d-aS{padding:3px 4px}.d-aR:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.d-aT{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.d-aU-bottom{top:100%;margin-top:4px}.d-aU-top{bottom:100%;margin-bottom:4px}.d-aV{width:176px}.d-aW{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.d-aX:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.d-aY{margin:5px 0;height:150px}.d-aZ{position:relative;float:left;width:148px;height:148px}.d-a0{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.d-a1{width:18px;height:148px;position:relative;float:left;margin-left:10px}.d-a2{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.d-a3{height:25px}.d-a4{width:80px}.d-a5,.d-a4{margin-right:5px;vertical-align:middle}.d-a5{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.d-a6{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.d-a6:hover{opacity:.5}.d-aQ{width:174px;height:12px;margin-bottom:5px}.d-a7{height:100%}.d-a8{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.d-a9{cursor:not-allowed;background-color:#f5f5f5}.d-a9:hover{border-color:#e6e6e6}.d-a9:hover .d-a6{opacity:.1}.d-a9 .d-aR{opacity:.4}.d-a9 .d-a6{opacity:.1}');let j=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],L=(e,t,i)=>{let s,a,l,o,d;s=a=l=i-(d=i*t);let n=255*(s+=[d,o=d*(1-k((e=e%360/60)%2-1)),0,0,o,d][e=~~e]),r=255*(a+=[o,d,d,o,0,0][e]),p=255*(l+=[0,0,o,d,d,o][e]);return{r:n,g:r,b:p,hex:"#"+(16777216|p|r<<8|n<<16).toString(16).slice(1)}};i.exports=y.View.extend({tmpl:(e,t,i,y,v,w,k,S)=>{let z,T,j,L,A,I,C,B,M,E,F=[],{disabled:H,text:N,textWidth:V,color:Y,clear:O,i18n:R,placement:X,align:K,renderUI:P,shortcuts:U,alpha:q,current:W}=e;if(T=[],N&&(A=[t(0,y(N))],L="",V&&(L+="width:"+y(V)+"px"),j=[t("div",{class:"d-G d-aS","mx5-click":i+"\x1e\x1e_bd()",style:L},A)],T.push(...j)),j=[t(0,"picker")],z="d-aR d-G",N||(z+=" d-u"),L="",Y&&(L+="background:"+y(Y)+";"),T.push(t("div",{"mx5-click":i+"\x1e\x1e_bd()",class:z,style:L},j)),O&&Y&&(A=[t(0,"\ue624")],j=[t("i",{class:"d-_ d-a6","mx5-click":i+"\x1e\x1e_be()",title:y(R("aa"))},A)],T.push(...j)),j=[],P){A=[],I=[];for(let e=U.length,s=0;s<e;s+=1){let e=U[s];C=[t("li",{class:"d-aW",id:"sc_"+y(e)+"_"+i,style:"background:#"+y(e),"mx5-click":i+"\x1e\x1e_b_({color:'#"+S(e)+"'})"})],I.push(...C)}A.push(t("ul",{class:"d-F d-aV d-n",id:"scs_"+i},I)),E=s?[s]:[s=t("stop",{_:"_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})],a?E.push(a):E.push(a=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),M=[t("lineargradient",{id:"gb_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},E)],E=l?[l]:[l=t("stop",{_:"b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],a?E.push(a):E.push(a=t("stop",{_:"a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),M.push(t("lineargradient",{id:"gw_"+i,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},E)),B=[t("defs",0,M),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+i+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+i+")"})],C=[t("svg",f,B),t("div",{class:"d-a0",id:"ci_"+i})],I=[t("div",{class:"d-aZ",id:"cz_"+i,"mx5-mousedown":i+"\x1e\x1e_a6()"},C)],E=o?[o]:[o=t("stop",{_:"c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})],d?E.push(d):E.push(d=t("stop",{_:"d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"})),n?E.push(n):E.push(n=t("stop",{_:"e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"})),r?E.push(r):E.push(r=t("stop",{_:"f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"})),p?E.push(p):E.push(p=t("stop",{_:"g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"})),c?E.push(c):E.push(c=t("stop",{_:"h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"})),h?E.push(h):E.push(h=t("stop",{_:"i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"})),g?E.push(g):E.push(g=t("stop",{_:"j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"})),u?E.push(u):E.push(u=t("stop",{_:"k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),M=[t("lineargradient",{id:"ghsv_"+i,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},E)],B=[t("defs",0,M),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+i+")"})],C=[t("svg",f,B),t("div",{class:"d-a2",id:"si_"+i})],I.push(t("div",{class:"d-a1","mx5-mousedown":i+"\x1e\x1e_a7()"},C)),A.push(t("div",x,I)),q&&(B=[t("div",{class:"d-a8",id:"ai_"+i})],C=[t("div",{class:"d-B d-a7",id:"at_"+i,"mx5-mousedown":i+"\x1e\x1e_a8()"},B)],I=[t("div",m,C)],A.push(...I)),I=[t("span",{class:"d-a5",id:"bc_"+i}),t("input",{class:"d-a d-a4",readonly:!0,id:"v_"+i,value:y(W)},1,_)],C=[t(0,y(R("ab")))],I.push(t("button",{class:"d-e d-f",type:"button","mx5-click":i+"\x1e\x1e_a9()"},C)),A.push(t("div",b,I)),j.push(...A)}return T.push(t("div",{id:"bd_"+i,class:"d-aT d-aU-"+y(X),style:y(K)+":-1px"},j)),z="d-aP",H&&(z+=" d-a9"),F.push(t("div",{"mx5-contextmenu":i+"\x1e_A()",id:"root_"+i,class:z},T)),t(i,0,F)},init(e){this.set({shortcuts:j}),w._aV(),this.on("destroy",()=>{w._aW(this),w._aX()})},assign(e){this._ae=e.color||"",this._aY=e.alpha+""=="true",this._aZ={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"})},render(){this.digest({alpha:this._aY,color:this._ae,current:this._ae})},_a2(e,t,i){let s=this,a=s._aZ;a.h=e.h,a.s=e.s,a.v=e.v;let l=L(e.h,e.s,e.v);t=t||l.hex;let o=y.node("cz_"+s.id),d=o.clientWidth,n=L(e.h,1,1);if(o.style.background=n.hex,s._a0=t,s._a1(),!i){let e=y.node("scs_"+s.id).querySelector('li[class$="d-aX"]');e&&e.classList.remove("d-aX");let t=y.node("si_"+s.id),i=t.clientHeight/2,l=T(a.h*d/360-i),o=y.node("ci_"+s.id),n=o.clientWidth/2;t.style.top=l+"px",l=T((1-a.v)*d-n);let r=T(a.s*d-n);o.style.left=r+"px",o.style.top=l+"px"}let r=y.node("sc_"+t.substr(1,6)+"_"+s.id);r&&r.classList.add("d-aX")},_a5(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let s=parseInt(e.substr(3,2),16);isNaN(s)&&(s=255);let a=parseInt(e.substr(5,2),16);isNaN(a)&&(a=255);let l=((e,t,i)=>{let s,a,l,o;return{h:s=(s=0==(o=(l=z(e/=255,t/=255,i/=255))-S(e,t,i))?null:l==e?(t-i)/o+(t<i?6:0):l==t?(i-e)/o+2:(e-t)/o+4)%6*60,s:a=0===o?0:o/l,v:l}})(i,s,a),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t._a3=("0"+o.toString(16)).slice(-2),t._a2(l,e),t._aY&&t._a4(o)},_a4(e){let t=y.node("ai_"+this.id);e/=255,e*=y.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},_a1(){let e=this,t=y.node("bc_"+e.id),i=e._a0;e._aY&&(y.node("at_"+e.id).style.background="linear-gradient(to right, "+i+"00 0%,"+i+" 100%)",i+=e._a3),t.style.background=i,y.node("v_"+e.id).value=i},"_A<contextmenu>"(e){e.preventDefault()},"_a6<mousedown>"(e){let t=this,i=y.node("cz_"+t.id).clientWidth,s=y.node("ci_"+t.id).clientWidth/2,a=e.eventTarget.getBoundingClientRect(),l=e.pageX-a.left-window.pageXOffset,o=e.pageY-a.top-window.pageYOffset,d=l/i,n=(i-o)/i;t._a2({h:t._aZ.h,s:d,v:n});let r=y.node("ci_"+t.id),p=getComputedStyle(r),c=p.left,h=p.top,g=parseInt(c,10),u=parseInt(h,10),x=e;t._w(e,e=>{let a=e.pageY-x.pageY,l=e.pageX-x.pageX;(a+=u)<=-s?a=-s:a>=i-s&&(a=i-s),(l+=g)<=-s?l=-s:l>=i-s&&(l=i-s),r.style.left=l+"px",r.style.top=a+"px";let o=(l+s)/i,d=(i-(a+s))/i;t._a2({h:t._aZ.h,s:o,v:d})})},"_a7<mousedown>"(e){let t=this,i=e.eventTarget,s=y.node("si_"+t.id),a=y.node("cz_"+t.id).clientWidth,l=s.clientHeight/2,o=i.getBoundingClientRect(),d=(e.pageY-o.top-window.scrollY)/a*360;t._a2({h:d,s:t._aZ.s,v:t._aZ.v});let n=parseInt(getComputedStyle(s).top,10);t._w(e,i=>{let o=i.pageY-e.pageY;(o+=n)<=-l?o=-l:o>=a-l&&(o=a-l),s.style.top=o+"px";let d=(o+l)/a*360;t._a2({h:d,s:t._aZ.s,v:t._aZ.v},null,!0)})},"_a8<mousedown>"(e){let t=e.eventTarget,i=this,s=y.node("ai_"+i.id),a=y.node("at_"+i.id).clientWidth,l=s.clientWidth/2,o=t.getBoundingClientRect(),d=(e.pageX-o.left)/a*255|0;i._a3=("0"+d.toString(16)).slice(-2),i._a4(d),i._a1();let n=getComputedStyle(s),r=parseInt(n.left,10);i._w(e,t=>{let o=t.pageX-e.pageX;(o+=r)<=-l?o=-l:o>=a-l&&(o=a-l),s.style.left=o+"px";let d=T((o+l)/a*255);i._a3=("0"+d.toString(16)).slice(-2),i._a1()})},"_a9<click>"(){let e=this;e._y();let t=y.node("v_"+e.id).value;t!=e._ae&&(e.digest({color:t,current:t}),y.dispatch(e.root,"input",{color:e._ae=t}))},"_b_<click>"(e){this._a5(e.params.color),e.eventTarget.classList.add("d-aX")},_ba(e){return y.inside(e,this.root)},async _x(){let e=y.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",w._bb(this),y.node("root_"+this.id).classList.add("d-c"),this._bc||(await this.digest({renderUI:!0}),this._bc=1),this._a5(this._ae))},_y(){let e=y.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(y.node("root_"+this.id).classList.remove("d-c"),e.style.display="none",w._aW(this))},"_bd<click>"(){if(this.get("disabled"))return;let e=y.node("bd_"+this.id);"none"==getComputedStyle(e).display?this._x():this._y()},"_be<click>"(){if(this.get("disabled"))return;let e=this;if(e._bc){let t=y.node("v_"+e.id).value;e._y(),e.digest({color:"",current:t})}else e.digest({color:""});y.dispatch(e.root,"input",{color:e._ae=""})}}).merge(v)}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,i)=>{let s={class:"d-g"},a={class:"d-m"},l={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"};const d=e("magix"),n=e("../../i18n/index");i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{title:c,body:h,i18n:g}=e;return r=[t(0,d(c))],n=[t("h5",a,r)],p.push(t("div",s,n)),n=[t(0,d(h))],p.push(t("div",l,n)),r=[t(0,d(g("ad")))],n=[t("button",{"mx5-click":i+"\x1e_a9()",class:"d-A d-e d-f",type:"button"},r)],p.push(t("div",o,n)),t(i,0,p)},init(e){this._J=e.dialog,this._bf=e.body,this._bg=e.title||n("ac"),this._bh=e.enter},render(){this.digest({body:this._bf,title:this._bg})},"_a9<click>"(){let e=this;e._J.close(),e._bh&&d.toTry(e._bh)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,i)=>{let s={class:"d-g"},a={class:"d-m"},l={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"};const d=e("magix"),n=e("../../i18n/index");i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{title:c,body:h,i18n:g}=e;return r=[t(0,d(c))],n=[t("h5",a,r)],p.push(t("div",s,n)),n=[t(0,d(h))],p.push(t("div",l,n)),r=[t(0,d(g("c")))],n=[t("button",{type:"button","mx5-click":i+"\x1e_K()",class:"d-A d-e"},r)],r=[t(0,d(g("ad")))],n.push(t("button",{type:"button","mx5-click":i+"\x1e_a9()",class:"d-A d-e d-f d-t"},r)),p.push(t("div",o,n)),t(i,0,p)},init(e){let t=this;t._J=e.dialog,t._bf=e.body,t._bg=e.title||n("ac"),t._bh=e.enter,t._bi=e.cancel},render(){this.digest({body:this._bf,title:this._bg})},"_a9<click>"(){let e=this;e._J.close(),e._bh&&d.toTry(e._bh)},"_K<click>"(){let e=this;e._J.close(),e._bi&&d.toTry(e._bi)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,i)=>{let s;const a=e("magix");e("./alert"),e("./confirm"),a.applyStyle("d-j",".d-b_{position:absolute}.d-ba{position:relative;border-radius:2px;border:1px solid #e6e6e6;background-color:#fff}.d-bb{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.d-bb:focus,.d-bb:hover{opacity:.5}.d-bc{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.d-bd{filter:blur(3px)}.d-be{-webkit-animation:d-b .3s;animation:d-b .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.d-bf{position:absolute;right:10px;top:0;width:1px;height:0}.d-bf:focus{outline:none}.d-bg{padding:80px 0}@-webkit-keyframes d-b{0%{opacity:0}to{opacity:.2}}@keyframes d-b{0%{opacity:0}to{opacity:.2}}.d-bh{-webkit-animation:d-c .2s;animation:d-c .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-c{0%{opacity:.2}to{opacity:0}}@keyframes d-c{0%{opacity:.2}to{opacity:0}}.d-bi{margin-bottom:50px;min-height:60px}.d-bj{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.d-bk{-webkit-animation:d-d .3s;animation:d-d .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes d-d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.d-bl{-webkit-animation:d-e .2s;animation:d-e .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes d-e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes d-e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let l=500,o=[],d=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d,n,r,p=[],{removeClass:c,zIndex:h,left:g,top:u,width:x,closable:f}=e;return l="d-bc",c||(l+=" d-be"),p.push(t("div",{style:"z-index:"+a(h-1),id:"mask_"+i,class:l})),(d=[]).push(t("input",{id:"focus_"+i,class:"d-bf"},1)),f&&(r=[t(0,"\ue624")],n=[t("span",{class:"d-_ d-bb","mx5-click":i+"\x1e_bm()"},r)],d.push(...n)),s?n=[s]:(r=[t("span",{class:"d-k"})],n=[s=t("div",{_:"_",class:"d-bg d-j"},r)]),d.push(t("div",{class:"d-ba d-bi",id:"cnt_"+i},n)),l="d-b_",c||(l+=" d-bk"),o=[t("div",{id:"body_"+i,style:"left:"+a(g)+";top:"+a(u)+";width:"+a(x)+"px",class:l},d)],p.push(t("div",{class:"d-bj",style:"z-index:"+a(h)},o)),t(i,0,p)},init(e){let t=this,i=a.node("app"),s=t.root;t.on("destroy",()=>{(e=>{for(let t,i=o.length-1;i>=0;i--)if((t=o[i]).id==e.id){o.splice(i,1);break}})(t),500==(l-=2)&&i.classList.remove("d-bd"),a.dispatch(s,"close"),s.parentNode.removeChild(s)}),a.has(e,"closable")||(e.closable=!0),t.set(e),500!=l||navigator.userAgent.includes("Firefox")||i.classList.add("d-bd"),l+=2,o.push(t)},async render(){let e=this;await e.digest({zIndex:l});let t=e.get(),i=a.mark(e,"_aR");setTimeout(()=>{i()&&(e.root.style.display="block",a.node("focus_"+e.id).focus())},30),e.owner.mount(a.node("cnt_"+e.id),t.view,t),setTimeout(()=>{i()&&e.digest({removeClass:!0})},300)},_bj(e){let t=a.node("cnt_"+this.id);a.Vframe.byNode(t).invoke("fire",["unload",e])},_bk(){let e,t=this.id;(e=a.node("body_"+t)).classList.add("d-bl"),(e=a.node("mask_"+t)).classList.add("d-bh")},"_bm<click>"(){a.dispatch(this.root,"_bl")},"$doc<keyup>"(e){if("Escape"==e.code){let e=o[o.length-1];e==this&&e.get("closable")&&a.dispatch(this.root,"_bl")}}});Object.assign(d,{_bo(e,t){let i=a.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+i+'" style="display:none" class="d-p" />');let s,l=a.node(i),o=e.owner.mount(l,"gallery/mx-dialog/index",t);return l.addEventListener("_bl",async()=>{if(!l._bn&&!s){let e=()=>{l._bn=1,o.invoke("_bk"),setTimeout(()=>{o.unmount()},200)},t={p:0,prevent(){s=1},resolve(){t.p=1,s=0,e()},reject(){t.p=1,s=0}};await o.invoke("_bj",[t]),s||t.p||e()}}),l},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,s,a){this.mxDialog("gallery/mx-dialog/"+(a||"confirm"),{body:e,cancel:i,enter:t,title:s,modal:!0,width:300,top:"calc(50vh - 120px)",closable:!1})},mxDialog(e,t){let i,s,l=this,o={view:e},d=a.mark(this,"_J");return a.use(e,()=>{let n="$dlg_"+e;!l[n]&&d()&&(l[n]=1,Object.assign(o,t),o.width||(o.width=500),null==o.left&&(o.left=`calc(50vw - ${o.width/2}px)`),null==o.top&&(o.top="100px"),o.dialog={close(){i&&a.dispatch(i,"_bl")}},(i=l._bo(l,o)).addEventListener("close",()=>{delete l[n],s&&s()}))}),{close(){i&&a.dispatch(i,"_bl")},whenClose(e){s=e}}}}),i.exports=d}),define("gallery/mx-dragdrop/index",[],(e,t,i)=>{let s=window.getComputedStyle,a=e=>{(e=window.getSelection)&&e().removeAllRanges()},l=e=>{e.preventDefault()},o=["mousemove"],d=["mouseup"],n=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];i.exports={ctor(){let e=this;e.on("destroy",()=>{e._bp()})},_bp(e){let t=this;if(t._bq){let i;for(i of o)document.removeEventListener(i,t._bq);for(i of d)document.removeEventListener(i,t._br);for(i of n)document.removeEventListener(i,l);window.removeEventListener("blur",t._br),delete t._bq;let s=t._bs;s&&s(e)}},_w(e,t,i){let s=this;if(s._bp(),e){let e;for(e of(a(),s._bs=i,s._br=s._bp.bind(s),s._bq=(e=>{t&&t(e)}),o))document.addEventListener(e,s._bq);for(e of d)document.addEventListener(e,s._br);for(e of n)document.addEventListener(e,l,{passive:!1});window.addEventListener("blur",s._br)}},_aw(e,t){let i=null;if(document.elementFromPoint)for(!l._bt&&s&&(l._bt=!0,l._bu=null!==document.elementFromPoint(-1,-1)),l._bu&&(e+=window.pageXOffset,t+=window.pageYOffset),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},_bv:a}}),define("gallery/mx-font/align",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-l",".d-bz{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.d-bA{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.d-bA:hover{background:#ccc}.d-bB,.d-bB:hover{background:#fa742b;color:#fff}.d-bC,.d-bC .d-bA{cursor:not-allowed;opacity:.7}.d-bC .d-bA,.d-bC .d-bA:hover{background:#e9e9e9}.d-bC .d-bB,.d-bC .d-bB:hover{background:#fb955d}"),i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l,o,d=[],{disabled:n,i18n:r,value:p}=e;return o=[t(0,"\ue687")],a="d-z d-bA d-_","flex-start"==p.hpos&&(a+=" d-bB"),l=[t("li",{title:s(r("ae")),"mx5-click":i+"\x1e_8({type:'h',v:'flex-start'})",class:a},o)],o=[t(0,"\ue68a")],a="d-z d-bA d-_","center"==p.hpos&&(a+=" d-bB"),l.push(t("li",{title:s(r("af")),"mx5-click":i+"\x1e_8({type:'h',v:'center'})",class:a},o)),o=[t(0,"\ue686")],a="d-z d-bA d-_","flex-end"==p.hpos&&(a+=" d-bB"),l.push(t("li",{title:s(r("ag")),"mx5-click":i+"\x1e_8({type:'h',v:'flex-end'})",class:a},o)),o=[t(0,"\ue614")],a="d-z d-bA d-_","flex-start"==p.vpos&&(a+=" d-bB"),l.push(t("li",{title:s(r("ah")),"mx5-click":i+"\x1e_8({type:'v',v:'flex-start'})",class:a},o)),o=[t(0,"\ue613")],a="d-z d-bA d-_","center"==p.vpos&&(a+=" d-bB"),l.push(t("li",{title:s(r("ai")),"mx5-click":i+"\x1e_8({type:'v',v:'center'})",class:a},o)),o=[t(0,"\ue612")],a="d-z d-bA d-_","flex-end"==p.vpos&&(a+=" d-bB"),l.push(t("li",{title:s(r("aj")),"mx5-click":i+"\x1e_8({type:'v',v:'flex-end'})",class:a},o)),a="d-n d-G d-bz",n&&(a+=" d-bC"),d.push(t("ul",{class:a},l)),t(i,0,d)},assign(e){return this._bx=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_8<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bx,{type:a,v:l}=e.params;i[a+"pos"]=l,t._bx=i,t.digest({value:i}),s.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-font/style",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-l",".d-bz{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.d-bA{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.d-bA:hover{background:#ccc}.d-bB,.d-bB:hover{background:#fa742b;color:#fff}.d-bC,.d-bC .d-bA{cursor:not-allowed;opacity:.7}.d-bC .d-bA,.d-bC .d-bA:hover{background:#e9e9e9}.d-bC .d-bB,.d-bC .d-bB:hover{background:#fb955d}"),i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l,o,d=[],{disabled:n,i18n:r,value:p}=e;return o=[t(0,"\ue749")],a="d-z d-bA d-_",p.styleBold&&(a+=" d-bB"),l=[t("li",{title:s(r("ak")),"mx5-click":i+"\x1e_8({key:'styleBold'})",class:a},o)],o=[t(0,"\ue65f")],a="d-z d-bA d-_",p.styleItalic&&(a+=" d-bB"),l.push(t("li",{title:s(r("al")),"mx5-click":i+"\x1e_8({key:'styleItalic'})",class:a},o)),o=[t(0,"\ue62e")],a="d-z d-bA d-_",p.styleUnderline&&(a+=" d-bB"),l.push(t("li",{title:s(r("am")),"mx5-click":i+"\x1e_8({key:'styleUnderline'})",class:a},o)),a="d-n d-G d-bz",n&&(a+=" d-bC"),d.push(t("ul",{class:a},l)),t(i,0,d)},assign(e){return this._bx=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"_8<click>"(e){let t=this;if(t.get("disabled"))return;let i=t._bx,{key:a}=e.params;i[a]=!i[a],t._bx=i,t.digest({value:i}),s.dispatch(t.root,"input",{value:i})}})}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,a={class:"d-_ d-by"},l={class:"d-bt"};const o=e("magix"),d=e("../mx-monitor/index");o.applyStyle("d-k",".d-bm{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.d-bm:hover{border-color:#ccc}.d-bn{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.d-bo{cursor:not-allowed;background-color:#f5f5f5}.d-bo:hover{border-color:#e6e6e6}.d-bo .d-bn{cursor:not-allowed}.d-bp{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.d-bq .d-bp{transform:rotate(180deg);top:0}.d-bq,.d-bq:hover{border-color:#fa742b}.d-br{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.d-bs{color:#999}.d-bt{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-bq .d-bt{display:block}.d-bu{overflow:auto;max-height:196px;padding:2px 0}.d-bv{padding:0 2px;margin:2px 0}.d-bw{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.d-bw:hover{color:#333;background-color:#f0f0f0}.d-bx,.d-bx:active,.d-bx:focus,.d-bx:hover{color:#fff;background-color:#fa742b}.d-by{padding:0 4px;font-size:12px}"),i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r)=>{let p,c,h,g,u,x,f,m,b,_,y,v=[],{disabled:w,selectedText:k,selected:S,emptyText:z,selectedIcon:T,rList:j,list:L,textKey:A,valueKey:I,iconKey:C}=e;if(c=[],g=[],T&&(x=[t(0,o(T),1)],u=[t("i",a,x)],g.push(...u)),g.push(t(0,o(k))),p="d-br",""!==S&&S!=z||(p+=" d-bs"),h=[t("span",{class:p},g)],s?h.push(s):(g=[t(0,"\ue692")],h.push(s=t("span",{_:"_",class:"d-_ d-bp"},g))),c.push(t("div",{class:"d-bn","mx5-click":i+"\x1e_bd()",title:o(k)},h)),j){u=[];for(let e=L.length,s=0;s<e;s+=1){let e=L[s];x=[];let l,d=e,c=e;A&&I&&(f="",d=e[A],f+=" ",c=e[I],f+=" ",l=e[C]);let h=c+""==S+"";b=[],l&&(y=[t(0,o(l),1)],_=[t("i",a,y)],b.push(..._)),b.push(t(0,o(d))),p="d-bw d-J",h&&(p+=" d-bx"),m=[t("span",{"mx5-click":i+"\x1e_bw({item:'"+r(n,e,"\x1ef."+s)+"'})",class:p},b)],x.push(t("li",{title:o(d),active:h,class:"d-bv"},m)),u.push(...x)}g=[t("ul",{class:"d-bu d-n",id:"list_"+i},u)],h=[t("div",l,g)],c.push(...h)}return p="d-bm",w&&(p+=" d-bo"),v.push(t("div",{id:"dd_"+i,class:p},c)),t(i,0,v)},init(){d._aV(),this.on("destroy",()=>{d._aW(this),d._aX()})},assign(e){let t=e.selected,i=e.textKey||"",s=e.valueKey||"",a=e.iconKey||"",l=e.emptyText||"",d=e.disabled+""=="true",n=e.list||[];n=n.slice();let r=o.toMap(n,s);if(l)if(i&&s){if(!r[""]){let e={};e[i]=l,e[s]="",n.unshift(e),r[""]=e}}else r[l]||(n.unshift(l),r[l]=l);t||!l||i||s||(t=l),t&&r[t]||(t=r[t]||n[0],i&&s&&(t=t[s]));let p=i&&s?r[t][i]:t,c=a?r[t][a]:"";this.set({selected:t,selectedText:p,selectedIcon:c,list:n,iconKey:a,textKey:i,valueKey:s,emptyText:l,disabled:d})},render(){this.digest()},_ba(e){return o.inside(e,this.root)},async _x(){let e=this,t=o.node("dd_"+e.id);if(!t.classList.contains("d-bq")){t.classList.add("d-bq"),e.get("rList")||await e.digest({rList:!0});let i=(t=o.node("list_"+e.id)).querySelector("li[active]");i&&i.scrollIntoViewIfNeeded&&i.scrollIntoViewIfNeeded(),d._bb(e)}},_y(){let e=this,t=o.node("dd_"+e.id);t.classList.contains("d-bq")&&(t.classList.remove("d-bq"),d._aW(e))},"_bd<click>"(){let e=this,t=o.node("dd_"+e.id);t.classList.contains("d-bq")?e._y():t.classList.contains("d-bo")||e._x()},"_bw<click>"(e){let t=this;t._y();let i=t.get("valueKey"),s=t.get("textKey"),a=t.get("iconKey"),l=t.get("selected"),d=e.params.item,n=d,r=d,p="";s&&i&&(r=d[s],n=d[i],p=d[a]),l!==n&&(t.digest({selected:n,selectedIcon:p,selectedText:r}),o.dispatch(t.root,"change",{item:d,value:i?d[i]:d,text:s?d[s]:d}))}})}),define("gallery/mx-layout/column",["magix","../mx-number/index"],(e,t,i)=>{e("../mx-number/index");let s={class:"d-bD"};const a=e("magix");a.applyStyle("d-m",".d-bD{display:flex;margin:5px 0;align-items:center}.d-bE{flex-basis:24px;text-align:right;color:#333;font-size:12px}.d-bF,.d-bE{cursor:pointer}.d-bG{cursor:not-allowed;color:#bbb}"),i.exports=a.View.extend({tmpl:(e,t,i,a,l,o,d)=>{let n,r,p,c,h,g=[],{columns:u,disabled:x,i18n:f}=e;for(let e=u.length,l=0;l<e;l+=1){let e=u[l];(r=[]).push(t("div",{"mx5-owner":i,$:"columns",disabled:x,"mx5-input":i+"\x1e_bz({index:"+a(l)+"})","mx5-change":i+"\x1e_by()",class:"d-B d-a","mx5-view":"gallery/mx-number/index?value="+d(o,e.width,"\x1eg."+l+".h")+"&max=100&min=0&step=1"})),u.length>1&&(h=[t(0,"\ue600")],c="d-_ d-bE",x&&(c+=" d-bG"),p=[t("i",{title:a(f("an")),"mx5-click":i+"\x1e_bB({index:"+a(l)+"})",class:c},h)],r.push(...p)),n=[t("div",s,r)],g.push(...n)}return n=[t(0,"\ue606")],c="d-_ d-bF",(x||u.length>9)&&(c+=" d-bG"),g.push(t("i",{title:a(f("ao")),"mx5-click":i+"\x1e_bA()",class:c},n)),t(i,0,g)},assign(e){this.set(e)},render(){this.digest()},"_by<change>"(e){e.stopPropagation()},"_bz<input>"(e){let t=this.get("columns"),{index:i}=e.params;t[i].width=e.value,a.dispatch(this.root,"change")},"_bA<click>"(){if(this.get("disabled"))return;let e=this.get("columns");if(e.length>9)return;let t=0;for(let i of e)t+=i.width;if(t>=100)for(let t of e)if(t.width>10){t.width-=10;break}e.push({width:10,elements:[]}),this.digest({columns:e}),a.dispatch(this.root,"change")},"_bB<click>"(e){if(this.get("disabled"))return;let t=this.get("columns"),{index:i}=e.params;t.splice(i,1),this.digest({columns:t}),a.dispatch(this.root,"change")}})}),define("gallery/mx-layout/guage",["magix","../mx-number/index"],(e,t,i)=>{e("../mx-number/index");let s={class:"d-bH"},a={class:"d-bI"};const l=e("magix");l.applyStyle("d-n",".d-bH{display:flex;align-items:center}.d-bI{width:30px}");let o=["ap","aq","ar","as"];i.exports=l.View.extend({tmpl:(e,t,i,l,o,d,n)=>{let r,p,c,h=[],{i18n:g,titles:u,disabled:x,guage:f}=e;for(let e=0;e<4;e++)c=[t(0,l(g(u[e])))],p=[t("div",a,c),t("div",{"mx5-owner":i,$:"guage",disabled:x,"mx5-input":i+"\x1e_bz({index:"+l(e)+"})","mx5-change":i+"\x1e_by()",class:"d-B d-a","mx5-view":"gallery/mx-number/index?max=500&min=0&value="+n(d,f[e],"\x1ei."+e)})],r=[t("div",s,p)],h.push(...r);return t(i,0,h)},init(){this.set({titles:o})},assign(e){let{guage:t,disabled:i}=e,s=t.split(" "),a=[];for(let e of s)a.push(parseInt(e,10));return this.set({disabled:i,guage:a}),!0},render(){this.digest()},"_by<change>"(e){e.stopPropagation()},"_bz<input>"(e){e.stopPropagation();let t=this.get("guage"),{index:i}=e.params;t[i]=e.value,l.dispatch(this.root,"change",{value:t.join("px ")+"px"})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,i)=>{let s,a={class:"d-G d-bK"};const l=e("magix"),o=e("../mx-monitor/index");l.applyStyle("d-o",".d-bJ{z-index:400}.d-bK{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.d-bL{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 8px;margin:2px}.d-bM{color:#fff;background-color:#fa742b}.d-bN{height:1px;background:#eee;margin:4px 0}.d-bO{color:#ccc;cursor:not-allowed}"),i.exports=l.View.extend({tmpl:(e,t,i,l,o,d,n)=>{let r,p,c,h,g,u,x=[],{width:f,list:m,disabled:b,textKey:_}=e;p=[];for(let e=m.length,a=0;a<e;a+=1){let e=m[a];c=[],e.spliter?(h=s?[s]:[s=t("li",{_:"_",class:"d-bN"})],c.push(...h)):(u=[t(0,l(e[_]))],g="d-J d-bL ",b[e.id]&&(g+=" d-bO"),h=[t("li",{"mx5-mouseover":i+"\x1e\x1e_bJ({d:"+l(b[e.id]||0)+"})","mx5-mouseout":i+"\x1e\x1e_bJ({d:"+l(b[e.id]||0)+"})","mx5-click":i+"\x1e\x1e_bw({item:'"+n(d,e,"\x1ef."+a)+"',d:"+l(b[e.id]||0)+"})",title:l(e[_]),class:g},u)],c.push(...h)),p.push(...c)}return r=[t("ul",a,p)],x.push(t("div",{style:"width:"+l(f)+"px;position:absolute;left:-10000px;top:-10000px",class:"d-bJ",id:"cnt_"+i,"mx5-contextmenu":i+"\x1e_A()"},r)),t(i,0,x)},init(e){let t=this;o._aV(),t.on("destroy",()=>{o._aW(t),o._aX()})},assign(e){let t=this,i=e.width||140,s=e.valueKey||"id",a=e.textKey||"text";t._bC=e.list,t._bD=i,t._bE=s,t._bF=a,t._bG=e.disabled||{},t._bH=e.picked},async render(e){let t=this;await t.digest({disabled:t._bG,list:t._bC,width:t._bD,valueKey:t._bE,textKey:t._bF}),e&&this._x(e)},_ba(e){return l.inside(e,this.root)},_x(e){let t=this;if(!t._bI){t._bI=1;let i=l.node("cnt_"+t.id),s=i.clientWidth,a=i.clientHeight,d=e.pageX,n=e.pageY;d+s>window.innerWidth&&(d-=s)<0&&(d=0),n+a>window.innerHeight&&(n-=a)<0&&(n=0),i.style.left=d+"px",i.style.top=n+"px",o._bb(t)}},_y(){let e=this;if(e._bI){e._bI=!1,l.node("cnt_"+e.id).style.left="-10000px",o._aW(e)}},"_bJ<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!l.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("d-bM")},"_bw<click>"(e){if(e.params.d)return;this._y();let t=this._bH;t&&t(e.params.item)},"_A<contextmenu>"(e){e.preventDefault()}}).static({show(e,t,i){let s="ctx_"+e.id,a=l.node(s),o=a&&l.Vframe.byNode(a);o?(o.invoke("assign",[i]),o.invoke("render",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${s}"></div>`),(o=e.owner.mount(l.node(s),"gallery/mx-menu/index",i)).invoke("_x",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,i)=>{let s=0,a=[],l=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=a.length;t--;){let i=a[t];if(i._bK)a.splice(t,1);else{let t=i._bL;"resize"!=e.type&&t._ba(e.target)||t._y()}}},d=e=>{let t=a[e.id];t&&(t._bK=!0),delete a[e.id]};i.exports={_bb(e){d(e);let t={_bL:e};a.push(t),a[e.id]=t},_aW:d,_aV(){if(!s){for(let e of l)document.addEventListener(e,o);window.addEventListener("resize",o)}s++},_aX(){if(s>0&&!--s){for(let e of l)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-p",'.d-bP{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block;padding:0 20px 0 0;font-size:100%}.d-bP:focus{outline:none}.d-bQ,.d-bR{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.d-bQ:hover,.d-bR:hover{background-color:#f0f0f0}.d-bR{top:1px}.d-bQ{bottom:1px}.d-bS:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.d-bQ:after{border-top:4px solid #ccc}.d-bR:after{border-bottom:4px solid #ccc}.d-bQ.d-bT,.d-bR.d-bT{cursor:not-allowed;border-color:transparent}.d-bQ.d-bT:hover,.d-bR.d-bT:hover{background-color:transparent}'),i.exports=s.View.extend({tmpl:(e,t,i)=>{let s,a=[],{disabled:l}=e;return a.push(t("input",{class:"d-bP",id:"ipt_"+i,"mx5-focusin":i+"\x1e_b4()","mx5-focusout":i+"\x1e_b6()","mx5-change":i+"\x1e_b3()","mx5-keydown":i+"\x1e_cb()",disabled:l,autocomplete:"off","mx5-input":i+"\x1e_cd()","mx5-mousewheel":i+"\x1e_cc()"},1)),s="d-bR d-bS d-G",l&&(s+=" d-bT"),a.push(t("span",{"mx5-click":i+"\x1e_bZ({i:1})","mx5-mousedown":i+"\x1e_ca({i:1})","mx5-contextmenu":i+"\x1e_A()",class:s})),s="d-bQ d-bS d-G",l&&(s+=" d-bT"),a.push(t("span",{"mx5-click":i+"\x1e_bZ()","mx5-mousedown":i+"\x1e_ca()","mx5-contextmenu":i+"\x1e_A()",class:s})),t(i,0,a)},assign(e){let t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);let a=t._bM!==i,l=t._bN;return t._bM=i,t._bO=+e.step||1,t._bP=e.empty+""=="true",t._bQ=e.format+""=="true",t._bN=t.root.hasAttribute("disabled"),t._bR=s.has(e,"max")?+e.max:Number.MAX_VALUE,t._bS=s.has(e,"min")?+e.min:-Number.MAX_VALUE,t._bT=+e.ratio||10,t._bU=+e.fixed||0,a||l!=t._bN},async render(){let e=this,t=s.mark(this,"_aR");await e.digest({disabled:e._bN}),t()&&!e.root.classList.contains("d-c")&&e._bV()},_bV(){let e=this,t=e._bM;""!==t&&(t=e._bW(t),e._bQ&&(t=t.toFixed(e._bU))),e._bX=s.node("ipt_"+e.id),e._bX.value=t},_bW(e){let t=this;if((e=+e)||0===e){let i=t._bR,s=t._bS;e>i?e=i:e<s&&(e=s),e=+e.toFixed(t._bU)}return isNaN(e)?t._bP?"":0:e},_bY(e,t){let i=this;if(""!==e||!i._bP)return(e=i._bW(e))!==i._bM&&(t||(i._bX.value=e),s.dispatch(i.root,"input",{value:i._bM=e})),i._bM;s.dispatch(i.root,"input",{value:i._bM=e})},_bZ(e,t){let i=this._bM;""===i&&(i=0);let s=this._bO,a=i;t&&(s*=this._bT),e?a+=s:a-=s,this._bY(a)},_b0(){let e=this._bX;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},_b2(){let e=this;e.root.classList.add("d-c"),s.has(e,"_b1")||(e._b1=e._bM)},"_b3<change>"(e){e.stopPropagation()},"_b4<focusin>"(){this._b2()},"_b6<focusout>"(e){let t=this;t._b5||(t.root.classList.remove("d-c"),t._bV(),t._b1!=t._bM&&s.dispatch(t.root,"change",{value:t._bM}),delete t._b1)},"_bZ<click>"(e){let t=this;t._bN||t._b7||(t._bZ(e.params.i,e.shiftKey),t._b0())},"_ca<mousedown>"(e){let t=this;if(!t._bN){t._b5=!0,t._b2();let i=e.params.i,a=s.mark(this,"_b8");t._b9=setTimeout(()=>{a()&&(t._c_=setInterval(()=>{a()&&(t._b7=!0,t._bZ(i),t._b0())},50))},300)}},"_cb<keydown>"(e){if("ArrowUp"==e.code||"ArrowDown"==e.code){e.preventDefault();let t=this;if(!t._bN){let i=e.eventTarget.value;if(""===i)t._bM="";else{let e=Number(i);(e||0===e)&&e!=t._bM&&(t._bM=e)}t._bZ("ArrowUp"==e.code,e.shiftKey)}}},"_cc<mousewheel>&{passive:false}"(e){if(this.root.classList.contains("d-c")){e.preventDefault();let t=e.deltaY;this._bZ(t>0)}},"_A<contextmenu>"(e){e.preventDefault()},"_cd<input>"(e){e.stopPropagation();let t=e.eventTarget;this._bY(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e._b9),clearInterval(e._c_),delete e._b5;let t=s.mark(this,"@:mouseup");setTimeout(()=>{t()&&delete e._b7},0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,i)=>{let s={class:"d-bV"};const a=e("magix"),l=e("../mx-dialog/index");a.applyStyle("d-q",".d-bU{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0;border-radius:2px}.d-bU:hover{border-color:#ccc}.d-bV{line-height:92px;text-align:center;color:#999}.d-bW{min-height:500px}.d-bX{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.d-bX:hover{border-color:#999}.d-bY{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.d-bZ{width:100px;margin:0 5px;height:25px}.d-b0{position:absolute;right:3px;top:2px;opacity:.2}.d-b0:hover{opacity:.5}.d-b1{background:#f5f5f5;cursor:not-allowed}.d-b1 .d-b0,.d-b1 .d-b0:hover{opacity:.1}.d-b1:hover{border-color:#e6e6e6}.d-b2{margin-bottom:10px;border-bottom:1px solid #fca576}.d-b3{float:left;height:25px;line-height:25px;padding:0 4px;cursor:pointer;margin:0 5px -1px;transition:all .25s}.d-b4{background:#fca576;border-radius:2px 2px 0 0}"),i.exports=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d,n,r,p=[],{disabled:c,src:h,i18n:g}=e;return o=[],h?(r=[t(0,"\ue624")],n=[t("i",{class:"d-_ d-b0","mx5-click":!c&&i+"\x1e_cg()",title:a(g("at"))},r)],d=[t("div",{class:"d-bY",style:"background-image:url('"+a(h)+"')"},n)],o.push(...d)):(n=[t(0,a(g("au")))],d=[t("div",s,n)],o.push(...d)),l="d-bU d-B",c&&(l+=" d-b1"),p.push(t("div",{"mx5-click":!c&&i+"\x1e_cf()",class:l},o)),t(i,0,p)},assign(e){this.set(e)},render(){this.digest()},"_cf<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,closable:!1,done(t){e._ce(t)}})},_ce(e){a.dispatch(this.root,"change",e)},"_cg<click>"(e){this._ce({src:"",width:0,height:0})}}).merge(l)}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,i)=>{let s={class:"d-P d-g"},a={class:"d-m"},l={class:"d-F d-bW d-h"},o={class:"d-C d-D d-y"},d={class:"d-F d-b2"},n={class:"d-J d-bZ d-y"};const r=e("magix"),p=e("../../designer/service"),c=e("../../i18n/index");i.exports=r.View.extend({tmpl:(e,t,i,r,p,c,h,g)=>{let u,x,f,m,b,_,y=[],{i18n:v,error:w,list:k,cIndex:S}=e;if(x=[t(0,r(v("aw")))],u=[t("h5",a,x)],x=[t(0,"\ue624")],u.push(t("span",{class:"d-_ d-bb","mx5-click":i+"\x1e_bm()"},x)),y.push(t("div",s,u)),u=[],w)f=[t(0,r(w.msg))],x=[t("div",o,f)],u.push(...x);else{x=[],f=[];for(let e=k.length,s=0;s<e;s+=1){_=[t(0,r(k[s].title))],b="d-b3",s==S&&(b+=" d-b4"),m=[t("div",{"mx5-click":s!=S&&i+"\x1e_cj({to:"+r(s)+"})",class:b},_)],f.push(...m)}x.push(t("div",d,f));for(let e=k[S].list,s=e.length,a=0;a<s;a+=1){let s=e[a];_=[t("div",{class:"d-bY",style:"background-image:url('"+r(s.src)+"')"})],m=[t("div",{class:"d-bX","mx5-click":i+"\x1e_ci({src:'"+g(s.src)+"'})"},_)],_=[t(0,r(s.title))],m.push(t("div",n,_)),f=[t("div",{class:"d-z",title:r(s.title)},m)],x.push(...f)}u.push(...x)}return y.push(t("div",l,u)),t(i,0,y)},init(e){this._J=e.dialog,this._ch=e.done,this.set({cIndex:0})},render(){let e=r.mark(this,"_aR");this.fetch("_ap",(t,i)=>{e()&&this.digest({error:t,list:i.get("data",[])})})},"_ci<click>"(e){let t=this,i=new Image,s=t._ch,a=e.params.src,l=r.mark(this,"_ci");i.onerror=(()=>{l()&&t.alert(c("av"))}),i.onload=(()=>{if(l()){let e=i.width,l=i.height;t._J.close(),s({src:a,width:e,height:l})}}),i.src=a},"_cj<click>"(e){let{to:t}=e.params;this.digest({cIndex:t})},"_bm<click>"(){this._J.close()}}).merge(p)}),define("gallery/mx-pointer/cursor",["magix"],(e,t,i)=>{const s=e("magix"),a=s.guid("cursor_");s.applyStyle("d-r",".d-b5{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),i.exports={_x(e){let t=getComputedStyle(e);this._ck(t.cursor)},_ck(e){let t=s.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="d-b5" id="${a}"/>`),t=s.node(a)),t.style.cursor=e,t.style.display="block"},_y(){s.node(a).style.display="none"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-s",".d-b6{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}.d-b7{box-shadow:3px 3px #bb4504}");let a=s.guid("de_");i.exports={_P(e){let t=s.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="d-b6 d-_" id="${a}"/>`),t=s.node(a)),t.innerHTML=e},_x(e,t){let i=s.node(a),l=i.style,o=i.classList;l.left=e.pageX+10+"px",l.top=e.pageY+18+"px",t?o.contains("d-b7")||i.classList.add("d-b7"):o.contains("d-b7")&&i.classList.remove("d-b7")},_y(){let e=s.node(a).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,i)=>{const s=e("magix");s.applyStyle("d-t",".d-b8{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let a=s.guid("set_");i.exports={_cl(){s.node(a)||document.body.insertAdjacentHTML("beforeend",`<div id="${a}" class="d-b8"></div>`)},_P(e,t,i,l){let o=s.node(a).style;o.left=e+"px",o.top=t+"px",o.width=i+"px",o.height=l+"px",o.display="block"},_y(){s.node(a).style.display="none"}}}),define("gallery/mx-runner/index",["magix"],(e,t,i)=>{const s=e("magix");let a=window.requestAnimationFrame||(e=>setTimeout(e,16)),l=window.cancelAnimationFrame||clearTimeout,o=Date.now;i.exports={_cm:[],_at(e,t){this._cm.push({i:e||15,f:t,n:o()}),this._cn()},_au(e){let t=this._cm;for(let i,s=0;s<t.length;s++)if(!(i=t[s]).r&&i.f==e){i.r=1;break}},_cn(){let e=this;if(!e._co){let t=()=>{let i=e._cm;for(let e,t,a=0;a<i.length;a++)(e=i[a]).r?i.splice(a--,1):(t=o())-e.n>=e.i&&(e.n=t,s.toTry(e.f));i.length?e._co=a(t):(l(e._co),delete e._co)};e._co=a(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,i)=>{const s=e("magix"),a=e("./zh-cn"),l={"zh-cn":a,zh:a},o=s.has,d=/\{(\d+)\}/g;i.exports=((e,...t)=>{let i=(s.config("lang")||navigator.language).toLowerCase();o(l,i)||(i="zh-cn");let a=l[i],n=o(a,e)?a[e]:e;return t.length&&(n=n.replace(d,(e,i,s)=>(i|=0,t.length>i?(s=t[i],o(a,s)?a[s]:s):e))),n})}),define("i18n/zh-cn",[],(e,t,i)=>{i.exports={e:"\u901a\u7528\u8bbe\u8ba1\u5668",g:"\u5b8c\u6574\u4ee3\u7801\u6216\u529f\u80fd\u5b9a\u5236\u8bf7\u8054\u7cfb\u5fae\u4fe1:qq84685009\u3002&copy;2018-"+(new Date).getFullYear(),ac:"\u63d0\u793a",ad:"\u786e\u5b9a",c:"\u53d6\u6d88",d:"\u8fd8\u539f",_:"\u5220\u9664\u8f85\u52a9\u7ebf",a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",i:"\u64a4\u9500(Ctrl+Z)",j:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",ax:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",ay:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",az:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",aA:"\u5c5e\u6027",aB:"\u6570\u636e\u6e90",aC:"\u7ec4\u4ef6\u6811",l:"\u6253\u5f00{0}\u9762\u677f(\u6570\u5b57\u952e{1})",k:"\u5173\u95ed{0}\u9762\u677f(\u6570\u5b57\u952e{1})",aD:"\u5c55\u5f00{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",aE:"\u6298\u53e0{0}\u9762\u677f(Shift+\u6570\u5b57\u952e{1})",n:"\u6253\u5f00\u6240\u6709\u9762\u677f(Shift+Z)",m:"\u5173\u95ed\u6240\u6709\u9762\u677f(Shift+Z)",aF:"\u7c7b\u578b\uff1a",r:"\u80cc\u666f\u989c\u8272\uff1a",Y:"\u6587\u5b57\u989c\u8272\uff1a",h:"\u5220\u9664",av:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",at:"\u6e05\u9664\u56fe\u7247",au:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",aw:"\u56fe\u7247\u5e93",aa:"\u6e05\u9664\u989c\u8272",W:"\u5b57\u53f7\uff1a",J:"\u80cc\u666f\u56fe\u7247\uff1a",K:"\u80cc\u666f\u5e73\u94fa\uff1a",L:"\u62c9\u4f38\u94fa\u6ee1",M:"\u539f\u59cb\u5c3a\u5bf8",N:"\u6a2a\u5411\u5e73\u94fa",O:"\u5782\u76f4\u5e73\u94fa",P:"\u53cc\u5411\u5e73\u94fa",t:"\u9501\u5b9a\u7f16\u8f91\uff1a",H:"\u6700\u5c0f\u5bbd\u5ea6\uff1a",I:"\u6700\u5c0f\u9ad8\u5ea6\uff1a",D:"\u5217\u5206\u914d\uff1a",E:"\u5916\u8fb9\u8ddd\uff1a",F:"\u5185\u8fb9\u8ddd\uff1a",p:"\u9ad8\uff1a",y:"\u56fe\u7247\uff1a",R:"\u56fe\u7247\u5bbd\uff1a",S:"\u56fe\u7247\u9ad8\uff1a",aG:"\u8fd8\u539f\u5c3a\u5bf8\uff1a",B:"\u6c34\u5e73\u955c\u50cf\uff1a",A:"\u5782\u76f4\u955c\u50cf\uff1a",T:"\u6c34\u5e73(%)\uff1a",U:"\u5782\u76f4(%)\uff1a",C:"\u5e03\u5c40",V:"\u6587\u672c",G:"\u9875\u9762",w:"\u997c\u56fe",u:"\u6298\u7ebf\u56fe",v:"\u4eea\u8868\u76d8",o:"\u67f1\u72b6\u56fe",x:"\u56fe\u7247",Q:"\u5e73\u94fa\u56fe",s:"\u56fe\u8868\u6807\u9898\uff1a",ao:"\u70b9\u51fb\u6dfb\u52a0\u5217",an:"\u70b9\u51fb\u5220\u9664\u5217",q:"\u900f\u660e\u5ea6\uff1a",X:"\u5b57\u95f4\u8ddd\uff1a",a_:"\u5185\u5bb9\uff1a",Z:"\u6837\u5f0f\uff1a",z:"\u6392\u5217\uff1a",ak:"\u52a0\u7c97",al:"\u659c\u4f53",am:"\u4e0b\u5212\u7ebf",ae:"\u6c34\u5e73\u5c45\u5de6",af:"\u6c34\u5e73\u5c45\u4e2d",ag:"\u6c34\u5e73\u5c45\u53f3",ah:"\u5782\u76f4\u5c45\u4e0a",ai:"\u5782\u76f4\u5c45\u4e2d",aj:"\u5782\u76f4\u5c45\u4e0b",ap:"\u4e0a",aq:"\u53f3",ar:"\u4e0b",as:"\u5de6",ab:"\u786e\u5b9a",b:"\u7f16\u8f91\u533a\u6570\u636e",f:"\u7cfb\u7edf\u6b63\u5fd9..."}}),define("panels/index",["magix"],(e,t,i)=>{const s=e("magix");let a=[{title:"aC",icon:"&#xe629;",show:!0,left:30,top:90,width:200,height:145,resizeY:!0,key:1,id:"p-elements",view:"panels/elements/index"},{title:"aA",icon:"&#xe7a1;",width:240,height:145,right:10,top:90,key:2,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"}],l=s.toMap(a,"id");i.exports={_aa(){let e=!0;for(let t of a){if(!l[t.id]._){e=!1;break}}return e},_ab(){for(let e of a)this._cJ(e.id,!0);s.State.fire("o")},_ac(){for(let e of a)this._cK(e.id,!0);s.State.fire("o")},_a_(){for(let e of a)e.show&&this._cK(e.id,!0);s.State.fire("o")},_cK(e,t){let i=l[e];if(!i._){if(i._=1,i.eId)s.node(i.eId).style.display="block";else{i.eId=s.guid("panel_");let e=s.node(s.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${i.eId}"></div>`);let t=s.Vframe.byNode(e);i.close=(()=>{this._cJ(i.id)}),t.mount(s.node(i.eId),"panels/panel",i)}if(!t){s.State.fire("o"),s.Vframe.byNode(s.node(i.eId)).invoke("_x")}}},_cJ(e){let t=l[e];if(t._){t._=0;let e=s.node(t.eId);e.style.display="none",s.State.fire("o"),s.Vframe.byNode(e).invoke("_y")}},_6(e){l[e]._?this._cJ(e):this._cK(e)},_5(e){let t=l[e];if(t._){let e=s.node(t.eId);s.Vframe.byNode(e).invoke("_cL")}},_4:()=>a}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,i)=>{let s={class:"d-F d-G d-ck"},a={class:"d-_ d-ci d-q"},l={class:"d-A d-L d-M d-v"};const o=e("magix"),d=e("../gallery/mx-pointer/cursor"),n=e("../gallery/mx-dragdrop/index");o.applyStyle("d-v",".d-ci{font-size:12px}.d-cj{background:hsla(0,0%,100%,.9333333333333333);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.d-ck{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.d-cl{padding:0 5px;cursor:move;width:calc(100% - 36px)}.d-cm{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.d-cm:hover{background:#bb4504}.d-cn{overflow:hidden;transition:height .25s}.d-co{transition:none}.d-cp{width:calc(100% - 2px);overflow:auto;float:left}.d-cq{width:2px;float:right;cursor:ew-resize}.d-cr,.d-cq{background:#fafafa}.d-cr{height:2px;cursor:ns-resize}");let r=[],p={_bb(e){r.push(e)},_aW(e){for(let t=r.length;t--;)if(r[t]==e){r.splice(t,1);break}this._cM()},_cM(){for(let e=r.length;e--;)r[e]._cN(300+e)},_cO(e){if(r[r.length-1]!=e){for(let t=r.length;t--;)if(r[t]==e){r.splice(t,1);break}r.push(e),this._cM()}}};i.exports=o.View.extend({tmpl:(e,t,i,o)=>{let d,n,r,p,c,h,g=[],{width:u,left:x,right:f,top:m,zIndex:b,i18n:_,icon:y,title:v,shrink:w,key:k,height:S,resizeX:z,view:T,resizeY:j}=e;return c=[t(0,o(y),1)],p=[t("i",a,c),t(0,o(_(v)))],r=[t("div",{class:"d-cl d-z",title:o(_("ax")),"mx5-mousedown":i+"\x1e\x1e_cQ()"},p)],c=[t(0,"\ue73a")],h="d-_ d-cm",w&&(h+=" d-r"),p=[t("i",{"mx5-click":i+"\x1e\x1e_cL()",title:o(_(w?"aD":"aE",v,k)),class:h},c)],c=[t(0,"\ue635")],p.push(t("i",{class:"d-_ d-cm","mx5-click":i+"\x1e\x1e_bm()",title:o(_("k",v,k))},c)),r.push(t("div",l,p)),n=[t("div",s,r)],(r=[]).push(t("div",{"mx5-owner":i,style:"width:"+o(z?"calc(100% - 2px)":"100%"),class:"d-G d-H d-I d-cp d-v","mx5-view":o(T)})),z||(p=[t("div",{class:"d-G d-cq d-v",title:o(_("ay")),"mx5-mousedown":i+"\x1e\x1e_aT({w:1})"})],r.push(...p)),n.push(t("div",{class:"d-cn",id:"c_"+i,style:"height:"+o(w?0:`calc(100vh - ${S}px)`)},r)),h="d-cr d-G",!w&&j||(h+=" d-E"),n.push(t("div",{title:o(_("az")),"mx5-mousedown":i+"\x1e\x1e_aT({h:1})",class:h})),d="width:"+o(u)+"px;",d+=0===x||x?"left:"+o(x):"right:"+o(f),d+="px;top:"+o(m)+"px;z-index:"+o(b),g.push(t("div",{class:"d-cj",id:"p_"+i,"mx5-mousedown":i+"\x1e_cR()",style:d},n)),t(i,0,g)},init(e){p._bb(this),this.on("destroy",()=>{p._aW(this)}),this._cP=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,key:e.key,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+r.length})},"_cQ<mousedown>"(e){let t=o.node("p_"+this.id).style,i=this.get("left"),s=this.get("width"),a=0;void 0===i&&(a=1,i=this.get("right"));let l=this.get("top"),n=a?"right":"left",r=0,p=e.eventTarget;this._w(e,o=>{r||(r=1,d._x(p));let c=(a?e.pageX-o.pageX:o.pageX-e.pageX)+i;c<0?c=0:c+s>window.innerWidth&&(c=window.innerWidth-s);let h=o.pageY-e.pageY+l;h<0?h=0:h+18>window.innerHeight&&(h=window.innerHeight-18),t[n]=c+"px",t.top=h+"px",this.set({[n]:c,top:h})},()=>{d._y()})},"_aT<mousedown>"(e){let{w:t}=e.params,i=this.get("width"),s=this.get("height"),a=this.get("right"),l=o.node("c_"+this.id);l.classList.add("d-co");let n=l.style,r=o.node("p_"+this.id).style,p=0,c=e.eventTarget;this._w(e,l=>{if(p||(p=1,d._x(c)),t){let t=l.pageX-e.pageX;t+i<100&&(t=100-i);let o=t+i;r.width=o+"px",(a||0===s)&&(r.right=a-t+"px",this.set({right:a-t})),this.set({width:o})}else{let t=e.pageY-l.pageY+s;n.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{d._y(),l.classList.remove("d-co")})},_cN(e){o.node("p_"+this.id).style.zIndex=e},"_cR<mousedown>"(){p._cO(this)},_x(){p._cO(this)},_y(){},_cL(){this.digest({shrink:!this.get("shrink")})},"_cL<click>"(){this.digest({shrink:!this.get("shrink")})},"_bm<click>"(){let e=this._cP;e&&o.toTry(e)}}).merge(n)}),define("panels/elements/branch",["magix","../../designer/stage-selection","../../designer/stage-elements","../../designer/history"],(e,t,i)=>{let s,a={class:"d-c_"},l={class:"d-_ d-s"};const o=e("magix"),d=e("../../designer/stage-selection"),n=e("../../designer/stage-elements"),r=e("../../designer/history");let p=o.guid("rp_"),c={_cl(){o.node(p)||document.body.insertAdjacentHTML("beforeend",`<div class="d-cf" id="${p}"></div>`)},_x(e){let t=o.node(p).style,i=e.getBoundingClientRect();t.left=i.left+"px",t.top=i.top+"px",t.width=i.width+"px",t.height=i.height+"px"},_y(){o.node(p).style.left="-10000px"},_cC(){this._cB=setTimeout(()=>{c._y()},100)},_cD(){clearTimeout(this._cB)}};i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r)=>{let p,c,h,g,u,x,f=[],{elements:m,selectedId:b,i18n:_,locked:y}=e;for(let e=m.length,v=0;v<e;v+=1){let e=m[v];if(c=[],g=[],"layout"==e.role?(x=[t(0,"\ue63b")],h="d-_ d-cc",e.closed&&(h+=" d-cd"),u=[t("i",{role:"icon",class:h},x)],g.push(...u)):(u=s?[s]:[s=t("i",{_:"_",class:"d-cb"})],g.push(...u)),u=[t(0,o(e.ctrl.icon),1)],g.push(t("i",l,u)),u=[t(0,o(_(e.ctrl.title)))],g.push(t("span",0,u)),h="d-ca",e.id==b&&(e.props.locked?h+=" d-ch":h+=" d-cg"),c.push(t("div",{"mx5-click":i+"\x1e_cE({element:'"+r(n,e,"\x1e_."+v)+"'})","mx5-mouseover":i+"\x1e_cH({element:'"+r(n,e,"\x1e_."+v)+"'})","mx5-mouseout":i+"\x1e_cI()",class:h},g)),"layout"==e.role){g=[];for(let s=e.props.columns,a=s.length,l=0;l<a;l+=1){let a=s[l];h="d-ce",e.closed&&(h+=" d-E"),u=[t("div",{"mx5-owner":i,$:"elements,locked","mx5-view":"panels/elements/branch?elements="+r(n,a.elements,"\x1e_."+v+".c."+l+"._")+"&locked="+r(n,y||e.props.locked,"\x1ej._."+v+".k")+"&selectedId="+d(b),class:h})],g.push(...u)}c.push(...g)}p=[t("div",a,c)],f.push(...p)}return t(i,0,f)},init(){c._cl()},assign(e){this.set(e)},render(){this.digest()},"_cE<click>"(e){let{element:t}=e.params,i=this.get("selectedId"),s=this.get("elements"),a=e.target.getAttribute("role");if("layout"==t.ctrl.role&&"icon"==a)return t.closed=!t.closed,void this.digest({elements:s});t.id!=i&&(d._8(t),r._s(),n._az(t.id))},"_cF<click>"(e){let t=this.get("elements"),{element:i}=e.params;i.closed=!i.closed,this.digest({elements:t})},"_cG<click>"(e){let{element:t}=e.params;d._8(t),n._az(t.id)},"_cH<mouseover>"(e){if(!o.inside(e.relatedTarget,e.eventTarget)){c._cD();let{element:t}=e.params,i=o.node(t.id);i&&c._x(i)}},"_cI<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||c._cC()}})}),define("panels/elements/index",["magix","./branch"],(e,t,i)=>{e("./branch");let s={class:"d-G d-b9"};const a=e("magix");a.applyStyle("d-u",".d-b9{padding:4px}.d-c_{padding-left:4px}.d-ca{cursor:pointer;display:inline-flex;align-items:center;height:22px;transition:opacity .25s;padding-right:12px;border-radius:2px}.d-ca:hover{opacity:.6;background:#eee}.d-cb{width:16px;height:16px;display:inline-block}.d-cc{transform:rotate(90deg);transition:transform .25s}.d-cd{transform:rotate(0deg)}.d-ce{margin-left:12px}.d-cf{position:absolute;background:#fa742b;opacity:.4}.d-cg,.d-cg:hover{background-color:#fa742b;color:#fff;opacity:.9}.d-ch,.d-ch:hover{background-color:#999;opacity:.9;color:#fff}"),i.exports=a.View.extend({tmpl:(e,t,i,a,l,o,d)=>{let n,r=[],{elements:p,selectedId:c}=e;return n=[t("div",{"mx5-owner":i,$:"elements","mx5-view":"panels/elements/branch?elements="+d(o,p,"\x1e_")+"&selectedId="+l(c)})],r.push(t("div",s,n)),t(i,0,r)},init(){let e=this._cp(this.render.bind(this),100);a.State.on("b",e),a.State.on("_",e),a.State.on("m",e),a.State.on("n",e)},render(){let e=a.State.get("_T"),t=a.State.get("_U"),i="";t&&t.length&&(i=t[0].id),this.digest({selectedId:i,elements:e})}})}),define("panels/props/element",["magix","../../designer/props","../../designer/history","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-layout/column","gallery/mx-layout/guage","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s,a;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-layout/column"),e("gallery/mx-layout/guage"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let l={class:"d-cs d-n"},o={class:"d-ct"},d={class:"d-cu"},n={class:"d-cy d-l"},r={checked:"checked"},p={value:"value"};const c=e("magix"),h=e("../../designer/props"),g=e("../../designer/history");i.exports=c.View.extend({tmpl:(e,t,i,c,h,g,u,x)=>{let f,m,b,_,y,v,w,k,S,z,T,j=[],{elements:L,i18n:A,props:I}=e;if(1==L.length){let e=L[0];b=[],y=[t(0,c(A("aF")))],_=[t("span",d,y)],y=[t(0,c(A(e.ctrl.title)))],_.push(t("span",0,y)),b.push(t("li",o,_));for(let l=e.ctrl.props,o=l.length,m=0;m<o;m+=1){let o=l[m];if(_=[],o.type==I._af)y=s?[s]:[s=t("li",{_:"_",class:"d-K"})],_.push(...y);else{y=[];let s=e.props[o.key];o._aU&&!o._aU(e.props)||(k=[],S=[t(0,c(A(o.tip)))],k.push(t("span",d,S)),o.type==I._ad?(z="gallery/mx-number/index?value="+u(g,s,"\x1e_.0.l."+o.key),null!=(f=o.max)&&(z+="&max="+h(f)),null!=(f=o.step)&&(z+="&step="+h(f)),null!=(f=o.fixed)&&(z+="&fixed="+h(f)),null!=(f=o.min)&&(z+="&min="+h(f)),S=[t("div",{"mx5-owner":i,$:"elements",class:"d-B d-a d-cv",disabled:null!=(f=e.props.locked)&&f,"mx5-input":i+"\x1e_cS({key:'"+x(o.key)+"',use:'value',element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":z})],k.push(...S)):o.type==I._ae?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-input":i+"\x1e_cS({key:'"+x(o.key)+"',use:'color',element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-color/index?clear="+h(o.clear)+"&color="+u(g,s,"\x1e_.0.l."+o.key)+"&align=right&disabled="+h(e.props.locked)+"&alpha="+h(o.alpha)})],k.push(...S)):o.type==I._ag?(T=[t("input",{class:"d-cz",type:"checkbox",checked:e.props[o.key],"mx5-change":i+"\x1e_cS({key:'"+x(o.key)+"',bool:1,element:'"+u(g,e,"\x1e_.0")+"'})"},1,r)],a?T.push(a):T.push(a=t("i",{_:"a",class:"d-cA"})),S=[t("label",n,T)],k.push(...S)):o.type==I._ah?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+x(o.key)+"',element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-layout/column?columns="+u(g,s,"\x1e_.0.l."+o.key)+"&disabled="+u(g,e.props.locked,"\x1e_.0.k")})],k.push(...S)):o.type==I._ai?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+x(o.key)+"',use:'value',element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-layout/guage?guage="+u(g,s,"\x1e_.0.l."+o.key)+"&disabled="+u(g,e.props.locked,"\x1e_.0.k")})],k.push(...S)):o.type==I._al?(S=[t("textarea",{class:"d-b d-cv d-cw d-d",disabled:e.props.locked,"mx5-input":i+"\x1e_cS({key:'"+x(o.key)+"',ta:1,element:'"+u(g,e,"\x1e_.0")+"'})",value:c(s)},0,p)],k.push(...S)):o.type==I._ao?(S=[t("input",{class:"d-a d-cv",disabled:e.props.locked,"mx5-input":i+"\x1e_cS({key:'"+x(o.key)+"',ta:1,element:'"+u(g,e,"\x1e_.0")+"'})",value:c(s)},1,p)],k.push(...S)):o.type==I._aj?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-input":i+"\x1e_cS({element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/style?disabled="+u(g,e.props.locked,"\x1e_.0.k")+"&value="+u(g,e.props,"\x1e_.0.l")})],k.push(...S)):o.type==I._ak?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-input":i+"\x1e_cS({element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/align?disabled="+u(g,e.props.locked,"\x1e_.0.k")+"&value="+u(g,e.props,"\x1e_.0.l")})],k.push(...S)):o.type==I._am?(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+x(o.key)+"',use:'src',element:'"+u(g,e,"\x1e_.0")+"',write:'"+u(g,o.write,"\x1e_.0.m."+m+".n")+"'})","mx5-view":"gallery/mx-picture/index?src="+h(s)+"&disabled="+u(g,e.props.locked,"\x1e_.0.k")})],k.push(...S)):o.type==I._cT?(T=[t(0,c(A("aH")))],S=[t("button",{class:"d-e d-f",disabled:e.props.locked,"mx5-click":i+"\x1e_cU({key:'"+x(o.key)+"',element:'"+u(g,e,"\x1e_.0")+"'})"},T)],k.push(...S)):o.type==I._an&&(S=[t("div",{"mx5-owner":i,$:"elements",class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+x(o.key)+"',use:'value',element:'"+u(g,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-dropdown/index?selected="+h(s)+"&list="+u(g,o.items,"\x1e_.0.m."+m+".o")+"&textKey=text&valueKey=value"})],k.push(...S)),w="d-ct",o.dockTop&&(w+=" d-cx"),v=[t("li",{class:w},k)],y.push(...v)),_.push(...y)}b.push(..._)}m=[t("ul",l,b)],j.push(...m)}return t(i,0,j)},init(){let e=this._cp(this.render.bind(this),100);c.State.on("m",e),c.State.on("n",e),c.State.on("_",e)},render(){this.digest({props:h,elements:c.State.get("_U")})},"_cS<input,change>"(e){let{key:t,use:i,element:s,ta:a,bool:l,write:o}=e.params;if(i||l||a){let d=s.props,n=e.eventTarget,r=a?n.value:l?n.checked:e[i];o&&(r=o(r,d,e)),d[t]=r}c.State.fire("n");let d=c.node(s.id),n=c.Vframe.byNode(d);n&&n.invoke("_P",[s]),g._s("_"+t,500)}})}),define("panels/props/index",["magix","./element","./page"],(e,t,i)=>{e("./element"),e("./page");const s=e("magix");s.applyStyle("d-w",'.d-cs{padding:4px;min-width:200px}.d-ct{line-height:28px;display:flex;align-items:center}.d-cu{width:80px;text-align:right}.d-cv{width:140px}.d-cw{height:90px}.d-cx{align-items:flex-start}.d-cy{display:flex;align-items:center;cursor:pointer}.d-cz{visibility:hidden;position:absolute}.d-cA{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.d-cA:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.d-cz:checked+.d-cA{background:#fa742b}.d-cz:checked+.d-cA:before{left:100%;margin-left:-14px}.d-cz:disabled+.d-cA{background:#e6e6e6;cursor:not-allowed}'),i.exports=s.View.extend({tmpl:(e,t,i)=>{let s=[],{elements:a}=e,l=1==a.length;return s.push(t("div",{"mx5-owner":i,class:!l&&"d-E","mx5-view":"panels/props/element"}),t("div",{"mx5-owner":i,class:l&&"d-E","mx5-view":"panels/props/page"})),t(i,0,s)},init(){let e=this._cp(this.render.bind(this),100);s.State.on("m",e),s.State.on("_",e)},render(){this.digest({elements:s.State.get("_U")})}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,i)=>{let s;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let a={class:"d-cs d-n"},l={class:"d-ct"},o={class:"d-cu"};const d=e("magix"),n=e("../../designer/history"),r=e("../../designer/props");i.exports=d.View.extend({tmpl:(e,t,i,d,n,r,p,c)=>{let h,g,u,x,f,m,b,_,y=[],{i18n:v,ctrl:w,props:k,page:S}=e;g=[],x=[t(0,d(v("aF")))],u=[t("span",o,x)],x=[t(0,d(v(w.title)))],u.push(t("span",0,x)),g.push(t("li",l,u));for(let e=w.props,a=e.length,l=0;l<a;l+=1){let a=e[l];u=[],a.type==k._af?(x=s?[s]:[s=t("li",{_:"_",class:"d-K"})],u.push(...x)):a._aU&&!a._aU(S)||(m=[],b=[t(0,d(v(a.tip)))],m.push(t("span",o,b)),a.type==k._ad?(_="gallery/mx-number/index?value="+p(r,S[a.key],"\x1ep."+a.key),null!=(h=a.max)&&(_+="&max="+n(h)),null!=(h=a.step)&&(_+="&step="+n(h)),null!=(h=a.fixed)&&(_+="&fixed="+n(h)),null!=(h=a.min)&&(_+="&min="+n(h)),b=[t("div",{"mx5-owner":i,$:"page,ctrl",class:"d-B d-a d-cv","mx5-input":i+"\x1e_cS({key:'"+c(a.key)+"',use:'value'})","mx5-view":_})],m.push(...b)):a.type==k._ae?(_="gallery/mx-color/index?color="+p(r,S[a.key],"\x1ep."+a.key)+"&align=right",null!=(h=a.alpha)&&(_+="&alpha="+n(h)),b=[t("div",{"mx5-owner":i,$:"page,ctrl",clear:d(a.clear),class:"d-cv","mx5-input":i+"\x1e_cS({key:'"+c(a.key)+"',use:'color'})","mx5-view":_})],m.push(...b)):a.type==k._am?(b=[t("div",{"mx5-owner":i,class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+c(a.key)+"',use:'src',write:'"+p(r,a.write,"\x1em."+l+".n")+"'})","mx5-view":"gallery/mx-picture/index?src="+n(S[a.key])})],m.push(...b)):a.type==k._an&&(b=[t("div",{"mx5-owner":i,$:"ctrl",class:"d-cv","mx5-change":i+"\x1e_cS({key:'"+c(a.key)+"',use:'value'})","mx5-view":"gallery/mx-dropdown/index?selected="+n(S[a.key])+"&list="+p(r,a.items,"\x1em."+l+".o")+"&textKey=text&valueKey=value"})],m.push(...b)),f="d-ct",a.dockTop&&(f+=" d-cx"),x=[t("li",{class:f},m)],u.push(...x)),g.push(...u)}return y.push(t("ul",a,g)),t(i,0,y)},init(){let e=this.render.bind(this);d.State.on("_",e),d.State.on("a",e)},render(){this.digest({props:r,ctrl:d.State.get("_9"),page:d.State.get("_S")})},"_cS<input,change>"(e){let{key:t,use:i,write:s}=e.params,a=d.State.get("_S");a[t]=e[i],s&&s(a,e),n._s("a",500),d.State.fire("a")}})}),define("elements/index",["magix","./layout/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-pie/designer","./chart-meter/designer","./chart-bar/designer"],(e,t,i)=>{const s=e("magix"),a=e("./layout/designer"),l=e("./text/designer"),o=e("./image/designer"),d=e("./repeat/designer"),n=e("./page/designer");let r=[a,{spliter:1},l,o,d,{spliter:1},e("./chart-line/designer"),e("./chart-pie/designer"),e("./chart-meter/designer"),e("./chart-bar/designer")],p=[];for(let e of r)if(e.spliter||e.subs){if(e.subs)for(let t of e.subs)p.push(t)}else p.push(e);let c=s.toMap(p,"role");i.exports={_O:()=>r,_1:()=>n,_2(e){let t={},i=e=>{for(let a of e){let e=c[a.role];if(a.id||(a.id=s.guid("e_")),a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/normal",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-pointer/cursor");s.applyStyle("d-h",".d-aH{pointer-events:none}.d-aI{display:flex}.d-aJ{position:absolute;left:0;top:0;right:0;bottom:0;background:transparent}.d-aK,.d-aL{border:1px solid #fa742b}.d-aL{border-color:#999}.d-aM{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.d-aN{border-style:dashed}.d-aO{position:absolute;left:calc(50% - 40px);width:40px;background-color:#fa742b;height:5px;margin-top:-3px;cursor:ns-resize;z-index:1}"),i.exports=s.View.extend({tmpl:(e,t,i,s,a,l,o)=>{let d,n,r=[],{element:p,view:c,selected:h}=e,g=p.props,u=p.ctrl;return d="d-aM",g.locked&&(d+=" d-aN"),"layout"==u.role?d+=" d-aI":d+=" d-aH",r.push(t("div",{"mx5-owner":i,$:"element","mx5-view":s(c)+"?element="+o(l,p,"\x1ed")+"&props="+o(l,g,"\x1ee"),id:"entity_"+i,class:d})),d="d-aJ","layout"==u.role&&(d+=" d-aH"),h&&(g.locked?d+=" d-aL":d+=" d-aK"),r.push(t("div",{class:d})),!g.locked&&h&&u._aO&&u._aO.height&&(n=[t("div",{class:"d-aO","mx5-mousedown":i+"\x1e_aT()"})],r.push(...n)),t(i,0,r)},_aS(){let e=s.State.get("_3"),t=s.State.get("_U").length,i=this.get().element.id;this.set({selected:s.has(e,i),count:t})},assign(e){return this.set(e),this._aS(),!0},render(){this.digest()},_P(e){this.digest({element:e})},"_aT<mousedown>"(e){if(!e._aG){e._aG=1;let t=0,i=e.eventTarget,a=this.get("element"),{props:o}=a,d=o.height;this._w(e,n=>{t||(t=1,l._x(i));let r=n.pageY-e.pageY+d;r<0&&(r=0),o.height=r,this._P(a),s.State.fire("n")},()=>{l._y()})}}}).merge(a)}),define("elements/chart-bar/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-bar/index"})}}).static({role:"chart-bar",title:"o",icon:"&#xe603;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-bar/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l=[],{props:o,error:d}=e;return a="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(a+="background:"+s(o.background)+";"),l.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:a})),t(i,0,l)},assign(e){this.set(e)},_aQ(){if(!this._aP){let e=s.node("chart_"+this.id);this._aP=echarts.init(e),this.on("destroy",()=>{this._aP.dispose()}),this._aP.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"}]},!0),e.dataset.tip=""}this._aP.resize()},async render(){let e=s.mark(this,"_aR");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aQ(),this._aP.setOption({title:{text:e.title}})}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-line/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-line/index"})}}).static({role:"chart-line",title:"u",icon:"&#xe64b;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-line/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l=[],{props:o,error:d}=e;return a="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(a+="background:"+s(o.background)+";"),l.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:a})),t(i,0,l)},assign(e){this.set(e)},_aQ(){if(!this._aP){let e=s.node("chart_"+this.id);this._aP=echarts.init(e),this.on("destroy",()=>{this._aP.dispose()}),this._aP.setOption({tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),e.dataset.tip=""}this._aP.resize()},async render(){let e=s.mark(this,"_aR");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aQ(),this._aP.setOption({title:{text:e.title}})}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-meter/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-meter/index"})}}).static({role:"chart-meter",title:"v",icon:"&#xeb94;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-meter/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l=[],{props:o,error:d}=e;return a="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(a+="background:"+s(o.background)+";"),l.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:a})),t(i,0,l)},assign(e){this.set(e)},_aQ(){if(!this._aP){let e=s.node("chart_"+this.id);this._aP=echarts.init(e),this.on("destroy",()=>{this._aP.dispose()}),this._aP.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.dataset.tip=""}this._aP.resize()},async render(){let e=s.mark(this,"_aR");await this.digest();try{await a(),e()&&this._aQ()}catch(t){e()&&this.digest({error:t})}}})}),define("elements/chart-pie/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/chart-pie/index"})}}).static({role:"chart-pie",title:"w",icon:"&#xe6d4;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:300,title:"",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{tip:"s",key:"title",type:s._ao,json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/chart-pie/index",["magix","../provider/echarts"],(e,t,i)=>{const s=e("magix"),a=e("../provider/echarts");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l=[],{props:o,error:d}=e;return a="height:"+s(o.height)+"px;opacity:"+s(o.alpha)+";",o.background&&(a+="background:"+s(o.background)+";"),l.push(t("div",{class:"d-Q","data-tip":s(d||"\u6b63\u5728\u52a0\u8f7d\u56fe\u8868\u7ec4\u4ef6..."),id:"chart_"+i,style:a})),t(i,0,l)},assign(e){this.set(e)},_aQ(){if(!this._aP){let e=s.node("chart_"+this.id);this._aP=echarts.init(e),this.on("destroy",()=>{this._aP.dispose()}),this._aP.setOption({series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie"}]},!0),e.dataset.tip=""}this._aP.resize()},async render(){let e=s.mark(this,"_aR");await this.digest();try{if(await a(),e()){let e=this.get("props");this._aQ(),this._aP.setOption({title:{text:e.title,x:"center"}})}}catch(t){e()&&this.digest({error:t})}}})}),define("elements/image/designer",["../../designer/props","../normal"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal");i.exports=a.extend({ctor(){this.set({view:"elements/image/index"})}}).static({role:"image",title:"x",icon:"&#xe650;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:100,src:"",hpos:"flex-start",vpos:"flex-start",rotateX:!1,rotateY:!1,locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{type:s._af},{tip:"y",key:"src",type:s._am,json:1},{tip:"z",type:s._ak,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"A",type:s._ag,key:"rotateX",json:1},{tip:"B",type:s._ag,key:"rotateY",json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/image/index",["magix"],(e,t,i)=>{let s;const a=e("magix");i.exports=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d,n,r=[],{props:p}=e;return o=[],p.src?(l="",(p.rotateX||p.rotateY)&&(l+="transform:",p.rotateX&&(l+="rotateX(180deg)"),p.rotateY&&(l+=" rotateY(180deg)")),d=[t("img",{src:a(p.src),class:"d-o d-w d-x",style:l},1)],o.push(...d)):(s?d=[s]:(n=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],d=[s=t("div",{_:"_",class:"d-L d-M d-N d-R d-u d-v"},n)]),o.push(...d)),l="display:flex;align-items:"+a(p.vpos)+";justify-content:"+a(p.hpos)+";height:"+a(p.height)+"px;opacity:"+a(p.alpha)+";",p.background&&(l+="background:"+a(p.background)+";"),r.push(t("div",{style:l},o)),t(i,0,r)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/layout/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),a=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/layout/index"})}}).static({role:"layout",title:"C",icon:"&#xe764;",_7:()=>({columns:[{width:100,elements:[]}],margin:"5px 5px 5px 5px",padding:"5px 5px 5px 5px",locked:!1}),props:[{tip:"D",key:"columns",dockTop:!0,type:a._ah,json:1,encode(e,t){let{columns:i}=t,s=[];for(let e of i)s.push({elements:e.elements,width:e.width});e.columns=s}},{tip:"E",key:"margin",dockTop:!0,type:a._ai,json:1},{tip:"F",key:"padding",dockTop:!0,type:a._ai,json:1},{type:a._af},{tip:"t",key:"locked",type:a._ag,free:!0}]})}),define("elements/layout/index",["magix","../../designer/stage-elements","../../gallery/mx-dragdrop/index"],(e,t,i)=>{const s=e("magix"),a=e("../../designer/stage-elements"),l=e("../../gallery/mx-dragdrop/index");s.applyStyle("d-g",".d-aF{display:flex;width:100%;min-height:40px}.d-aG{flex-shrink:1;border:1px dashed #ccc}"),i.exports=s.View.extend({tmpl:(e,t,i,s,a,l,o)=>{let d,n,r,p,c=[],{props:h,element:g}=e;d=[];for(let e=h.columns,a=e.length,c=0;c<a;c+=1){let a=e[c];r=[];for(let e=a.elements,d=e.length,n=0;n<d;n+=1){let a=e[n];p=[t("div",{"mx5-owner":i,$:"props",class:"d-B",id:s(a.id),eid:s(a.id),"mx5-view":"elements/"+s(a.role)+"/designer?element="+o(l,a,"\x1ec."+c+"._."+n),"mx5-mousedown":i+"\x1e_aH({element:'"+o(l,a,"\x1ec."+c+"._."+n)+"'})",role:s(a.role)})],r.push(...p)}n=[t("div",{style:"flex-basis:"+s(a.width)+"%",class:"d-aG",role:"column",index:s(c),pid:s(g.id)},r)],d.push(...n)}return c.push(t("div",{style:"margin:"+s(h.margin)+";padding:"+s(h.padding),class:"d-aF"},d)),t(i,0,c)},assign(e){this.set(e)},render(){this.digest()},"_aH<mousedown>"(e){e._aG||(e._aG=1,a._aC(e,this))}}).merge(l)}),define("elements/page/designer",["../../designer/props","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../../i18n/index");i.exports={title:"G",_7:()=>({width:900,height:500,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0}),props:[{tip:"H",key:"width",type:s._ad,min:0,json:1},{tip:"I",key:"height",type:s._ad,min:0,json:1},{type:s._af},{tip:"r",key:"background",type:s._ae,json:1},{tip:"J",dockTop:!0,key:"backgroundImage",type:s._am,write(e,t){e.backgroundWidth=t.width,e.backgroundHeight=t.height},json:1},{tip:"K",key:"backgroundRepeat",type:s._an,items:[{text:a("L"),value:"full"},{text:a("M"),value:"no-repeat"},{text:a("N"),value:"repeat-x"},{text:a("O"),value:"repeat-y"},{text:a("P"),value:"repeat"}],_aU:e=>e.backgroundImage,json:1}]}}),define("elements/provider/echarts",[],(e,t,i)=>{let s=[],a=1,l="can not load echarts library";i.exports=(()=>new Promise((e,t)=>{if(2&a)window.echarts?e():t(l);else if(4&a)s.push([e,t]);else{a|=4,s.push([e,t]);let i=document.createElement("script");i.src="//cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js",i.onload=i.onerror=(()=>{document.head.removeChild(i),a|=2;for(let[e,t]of s)window.echarts?e():t(l);s.length=0}),document.head.appendChild(i)}}))}),define("elements/repeat/designer",["../../designer/props","../normal","../../i18n/index"],(e,t,i)=>{const s=e("../../designer/props"),a=e("../normal"),l=e("../../i18n/index");i.exports=a.extend({ctor(){this.set({view:"elements/repeat/index"})}}).static({role:"repeat",title:"Q",icon:"&#xe78f;",_aO:{height:1},_7:()=>({background:"",alpha:1,height:100,src:"",imageWidth:0,imageHeight:0,positionXOffset:0,positionYOffset:0,repeat:"repeat",locked:!1}),props:[{tip:"p",key:"height",type:s._ad,min:0,json:1},{tip:"q",key:"alpha",type:s._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"r",type:s._ae,key:"background",alpha:!0,clear:!0,json:1},{type:s._af},{tip:"y",key:"src",type:s._am,json:1,write:(e,t,i)=>(t.imageWidth=i.width,t.imageHeight=i.height,e)},{tip:"R",key:"imageWidth",type:s._ad,min:0,_aU:e=>e.src,json:1},{tip:"S",key:"imageHeight",type:s._ad,min:0,_aU:e=>e.src,json:1},{tip:"T",key:"positionXOffset",type:s._ad,_aU:e=>e.src,json:1},{tip:"U",key:"positionYOffset",type:s._ad,_aU:e=>e.src,json:1},{tip:"K",key:"repeat",type:s._an,_aU:e=>e.src,items:[{text:l("P"),value:"repeat"},{text:l("N"),value:"repeat-x"},{text:l("O"),value:"repeat-y"}],json:1},{type:s._af},{tip:"t",key:"locked",type:s._ag,free:!0}]})}),define("elements/repeat/index",["magix"],(e,t,i)=>{let s;const a=e("magix");i.exports=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d,n,r=[],{props:p}=e;return o=[],p.src||(s?d=[s]:(n=[t(0,"\u8bf7\u9009\u62e9\u56fe\u7247")],d=[s=t("div",{_:"_",class:"d-L d-M d-N d-R d-v"},n)]),o.push(...d)),l="height:"+a(p.height)+"px;opacity:"+a(p.alpha)+";",p.src&&(l+="background-image:url("+a(p.src)+");",p.imageWidth>0&&p.imageHeight>0&&(l+="background-size:"+a(p.imageWidth)+"px "+a(p.imageHeight)+"px;"),l+="background-repeat:"+a(p.repeat)+";background-position:"+a(p.positionXOffset)+"% "+a(p.positionYOffset)+"%"),r.push(t("div",{style:l},o)),t(i,0,r)},assign(e){this.set(e)},render(){this.digest()}})}),define("elements/text/designer",["../normal","../../designer/props"],(e,t,i)=>{const s=e("../normal"),a=e("../../designer/props");i.exports=s.extend({ctor(){this.set({view:"elements/text/index"})}}).static({role:"text",title:"V",icon:"&#xe6bc;",_aO:{height:1},_7:()=>({background:"",height:50,alpha:1,text:"",ls:0,forecolor:"#000000",fontsize:14,locked:!1,styleBold:!1,styleUnderline:!1,styleItalic:!1,margin:"0px 0px 0px 0px",padding:"4px 4px 4px 4px",hpos:"flex-start",vpos:"flex-start"}),props:[{tip:"p",key:"height",type:a._ad,min:0,json:1},{tip:"W",key:"fontsize",type:a._ad,min:0,json:1},{tip:"q",key:"alpha",type:a._ad,step:.1,fixed:1,min:0,max:1,json:1},{tip:"X",key:"ls",type:a._ad,min:0},{tip:"r",key:"background",clear:!0,alpha:!0,type:a._ae,json:1},{tip:"Y",key:"forecolor",type:a._ae,json:1},{tip:"Z",type:a._aj,json:1,encode(e,t){e.styleBold=t.styleBold,e.styleUnderline=t.styleUnderline,e.styleItalic=t.styleItalic,e.styleStrike=t.styleStrike}},{tip:"z",type:a._ak,json:1,encode(e,t){e.hpos=t.hpos,e.vpos=t.vpos}},{tip:"a_",key:"text",type:a._al,dockTop:!0,json:1},{type:a._af},{tip:"E",key:"margin",dockTop:!0,type:a._ai,json:1},{tip:"F",key:"padding",dockTop:!0,type:a._ai,json:1},{type:a._af},{tip:"t",key:"locked",type:a._ag,free:!0}]})}),define("elements/text/index",["magix"],(e,t,i)=>{const s=e("magix");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l,o,d=[],{props:n}=e;return o="",n.text?o+=" "+s(n.text)+" ":o+=" \u8bf7\u8f93\u5165\u6587\u5b57 ",l=[t(0,o)],a="display:flex;color:"+s(n.forecolor)+";",n.background&&(a+="background:"+s(n.background)+";"),a+="font-size:"+s(n.fontsize)+"px;height:"+s(n.height)+"px;letter-spacing:"+s(n.ls)+"px;opacity:"+s(n.alpha)+";margin:"+s(n.margin)+";padding:"+s(n.padding)+";",n.styleBold&&(a+="font-weight:bold;"),n.styleItalic&&(a+="font-style:italic;"),n.styleUnderline&&(a+="text-decoration:underline;"),a+=";align-items:"+s(n.vpos)+";justify-content:"+s(n.hpos)+";overflow:hidden",d.push(t("div",{style:a},l)),t(i,0,d)},assign(e){this.set(e)},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,i)=>{let s,a={class:"d-6"},l={class:"d-4"};const o=e("magix"),d=e("../gallery/mx-dragdrop/index"),n=e("../gallery/mx-pointer/cursor"),r=e("./history");o.applyStyle("d-a",".d-S{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.d-T{top:0;width:1px}.d-T,.d-U{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.d-U{left:0;height:1px}.d-V{float:left;overflow:hidden;z-index:200;position:relative}.d-W,.d-V{width:20px;border-right:1px solid #ccc;background:#fff}.d-W{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.d-X{left:5px;top:22px}.d-X,.d-Y{cursor:default;position:absolute;font-size:10px}.d-Y{top:2px;left:24px}.d-Z,.d-0{position:relative;z-index:100}.d-Z{top:20px}.d-0{left:20px}.d-1{width:4px;border-left:1px solid #fa742b}.d-1,.d-2{position:absolute;pointer-events:none}.d-2{height:1px;background:#fa742b}.d-3{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.d-4{top:2px;cursor:default}.d-4,.d-5{position:absolute;left:4px;font-size:10px;color:#666}.d-5{top:-15px;cursor:pointer;pointer-events:all}.d-6{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.d-7{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.d-8,.d-7{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.d-8{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let p={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};i.exports=o.View.extend({tmpl:(e,t,i,o,d,n,r,p)=>{let c,h,g,u,x,f,m,b,_,y,v=[],{sTop:w,yHelpers:k,yStart:S,scale:z,vWidth:T,i18n:j,sLeft:L,xHelpers:A,xStart:I,vHeight:C,width:B,step:M,space:E,hbar:F,barColor:H,bar:N,xEnd:V,height:Y,yEnd:O}=e;c=[];for(let e=k.length,s=0;s<e;s+=1){let e=k[s];y=Math.abs(S)+e.mm*z+20,u=[t(0,"\ue600")],g=[t("i",{class:"d-5 d-_",title:o(j("_")),"mx5-click":i+"\x1e\x1e_v({type:'y',id:'"+p(e.id)+"'})"},u)],u=[t(0,o(e.mm))],g.push(t("span",a,u),t("span",{class:"d-7","mx5-mousedown":i+"\x1e\x1e_z({type:'y',id:'"+p(e.id)+"',c:"+o(y)+"})",title:o(j("a"))})),h=[t("div",{class:"d-2",style:"width:"+o(T)+"px;top:"+o(y)+"px"},g)],c.push(...h)}v.push(t("div",{class:"d-0",style:"top:-"+o(w)+"px",id:i+"_y_help","mx5-contextmenu":i+"\x1e_A()"},c)),c=[];for(let e=A.length,s=0;s<e;s+=1){let e=A[s];y=Math.abs(I)+e.mm*z,u=[t(0,"\ue600")],g=[t("i",{class:"d-3 d-_",title:o(j("_")),"mx5-click":i+"\x1e\x1e_v({type:'x',id:'"+p(e.id)+"'})"},u)],u=[t(0,o(e.mm))],g.push(t("span",l,u),t("span",{class:"d-8","mx5-mousedown":i+"\x1e\x1e_z({type:'x',id:'"+p(e.id)+"',c:"+o(y)+"})",title:o(j("a"))})),h=[t("div",{class:"d-1",style:"height:"+o(C)+"px;left:"+o(y)+"px"},g)],c.push(...h)}v.push(t("div",{class:"d-Z",style:"left:-"+o(L)+"px",id:i+"_x_help","mx5-contextmenu":i+"\x1e_A()"},c)),u=[];for(let e=0;e<I;e+=M)x=[],e&&(f=[],(_=e/z)%E==0?(m=[t("rect",{width:"1",height:o(F),x:o(I-e),y:o(20-F-1),style:"fill:"+o(H)},1)],b=[t(0,o(-_))],m.push(t("text",{x:o(I-e+2),y:"14",style:"font-size:10px;fill:#999"},b)),f.push(...m)):(m=[t("rect",{width:"1",height:o(N),x:o(I-e),y:o(20-N-1),style:"fill:"+o(H)},1)],f.push(...m)),x.push(...f)),u.push(...x);for(let e=0;e<V;e+=M)x=[],(_=e/z)%E==0?(f=[t("rect",{width:"1",height:o(F),x:o(I+e),y:o(20-F-1),style:"fill:"+o(H)},1)],m=[t(0,o(_))],f.push(t("text",{x:o(I+e+2),y:"14",style:"font-size:10px;fill:#999"},m)),x.push(...f)):(f=[t("rect",{width:"1",height:o(N),x:o(I+e),y:o(20-N-1),style:"fill:"+o(H)},1)],x.push(...f)),u.push(...x);g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+o(B)+" 19",style:"cursor:default"},u)],h=[t("div",{style:"width:"+o(B)+"px;height:100%"},g)],c=[t("div",{class:"d-S",id:i+"_x"},h)],g=[t(0,"-")],h=[t("span",{class:"d-X",id:i+"_x_tip"},g)],c.push(t("div",{class:"d-T",id:i+"_x_line",style:"height:"+o(C+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":i+"\x1e_o()","mx5-mouseout":i+"\x1e_p()","mx5-click":i+"\x1e_t()"},c)),u=[];for(let e=0;e<S;e+=M)x=[],e&&(f=[],(_=e/z)%E==0?(m=[t("rect",{width:o(F),height:"1",x:o(20-F),y:o(S-e),style:"fill:"+o(H)},1)],b=[t(0,o(-_))],m.push(t("text",{x:"14",y:o(S-e+2),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(S-e)+")"},b)),f.push(...m)):(m=[t("rect",{width:o(N),height:"1",x:o(20-N),y:o(S-e),style:"fill:"+o(H)},1)],f.push(...m)),x.push(...f)),u.push(...x);for(let e=0;e<O;e+=M)x=[],(_=e/z)%E==0?(f=[t("rect",{width:o(F),height:"1",x:o(20-F),y:o(S+e),style:"fill:"+o(H)},1)],m=[t(0,o(_))],f.push(t("text",{x:"14",y:o(S+e),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(S+e-2)+")"},m)),x.push(...f)):(f=[t("rect",{width:o(N),height:"1",x:o(20-N),y:o(S+e),style:"fill:"+o(H)},1)],x.push(...f)),u.push(...x);return g=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+o(Y),style:"cursor:default"},u)],h=[t("div",{style:"height:"+o(Y)+"px"},g)],c=[t("div",{class:"d-V",style:"height:"+o(C)+"px",id:i+"_y"},h)],g=[t(0,"-")],h=[t("span",{class:"d-Y",id:i+"_y_tip"},g)],c.push(t("div",{class:"d-U",id:i+"_y_line",style:"width:"+o(T+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":i+"\x1e_q()","mx5-mouseout":i+"\x1e_r()","mx5-click":i+"\x1e_u()"},c)),s?v.push(s):v.push(s=t("div",{_:"_",class:"d-W"})),t(i,0,v)},init(e){let t=o.node(e.scroll);t.addEventListener("scroll",()=>{this.__()},{passive:!0}),this._a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let i=this.render.bind(this);o.State.on("_",i),o.State.on("a",i),o.State.on("b",i),o.State.on("c",i)},async _l(){if(this._b){let e=this._a,t=o.State.get("_c"),i=Math.max(e.scrollWidth,window.innerWidth)+500,s=Math.max(e.scrollHeight,window.innerHeight)+300,a=0,l=0,d=20,n=0,r=0,c=10,h=10,g=o.node("stage_canvas"),u=o.node("stage_outer"),x=g.getBoundingClientRect(),f=u.getBoundingClientRect();l=i-(a=Math.round(x.left-f.left)+d),r=s-(n=Math.round(x.top-f.top)),c=e.offsetHeight,h=e.offsetWidth;let m=p[t];await this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:i,scale:t,space:m.space,step:m.step,height:s,xStart:a,xEnd:l,yStart:n,vHeight:c,vWidth:h,yEnd:r}),this._d=o.node(this.id+"_x"),this._e=o.node(this.id+"_y"),this._f=o.node(this.id+"_x_line"),this._g=o.node(this.id+"_y_line"),this._h=o.node(this.id+"_x_tip"),this._i=o.node(this.id+"_y_tip"),this._j=o.node(this.id+"_x_help"),this._k=o.node(this.id+"_y_help")}},__(){let e=this._d,t=this._e,i=this._k,s=this._j,a=this._a,l=a.scrollTop,o=a.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=l),s&&(s.style.left=-o+"px"),i&&(i.style.top=-l+"px"),this.set({sLeft:o,sTop:l})},render(){this.set({xHelpers:o.State.get("_m"),yHelpers:o.State.get("_n")});let e=()=>{o.node("stage_canvas")?(this._b=1,this._l()):setTimeout(e,30)};setTimeout(e,30)},"_o<mousemove>"(e){let t=this._d,i=e.pageX,s=this.get("xStart"),a=this._f.style;a.display="block",a.left=i+"px";let l=i-s+t.scrollLeft,o=this.get("scale");this._h.innerHTML=(l/o).toFixed(0)},"_p<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||(this._f.style.display="none")},"_q<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,s=this.get("yStart"),a=this._e,l=this._g.style;l.display="block",l.top=i+"px";let o=i-s-20+a.scrollTop,d=this.get("scale");this._i.innerHTML=(o/d).toFixed(0)},"_r<mouseout>"(e){o.inside(e.relatedTarget,e.eventTarget)||(this._g.style.display="none")},"_t<click>"(e){let t=(e.pageX-this.get("xStart")+this._d.scrollLeft)/this.get("scale")|0,i=this.get("xHelpers");i.push({mm:t,id:o.guid("x_")}),this.digest({xHelpers:i}),this._f.style.display="none",r._s()},"_u<click>"(e){let t=this.root.getBoundingClientRect(),i=(e.pageY-t.top-this.get("yStart")-20+this._e.scrollTop)/this.get("scale")|0,s=this.get("yHelpers");s.push({mm:i,id:o.guid("x_")}),this.digest({yHelpers:s}),this._g.style.display="none",r._s()},"_v<click>"(e){let{type:t,id:i}=e.params,s=t+"Helpers",a=this.get(s);for(let e=a.length;e--;){if(a[e].id==i){a.splice(e,1);break}}this.digest({[s]:a}),r._s()},"_z<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:s,c:a}=e.params,l=i+"Helpers",o=this.get(l);for(let e of o)if(e.id==s){t=e;break}if(t){let s=this.get(i+"Start"),d=0;this._w(e,r=>{let p;d||(d=1,n._x(e.eventTarget)),p="x"==i?r.pageX-e.pageX+a:r.pageY-e.pageY+a-20,t.mm=(p-s)/this.get("scale")|0,this.digest({[l]:o})},()=>{d&&(n._y(),r._s())})}},"_A<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){this._l()}}).merge(d)}),define("designer/const",[],(e,t,i)=>{i.exports={_B:50,_c:1,_C:5,_D:150,_E:30,_F:20,_G:10,_H:4,_I:10}}),define("designer/content",["magix","./tojson"],(e,t,i)=>{let s={class:"d-g"},a={class:"d-m"},l={class:"d-h",style:"word-break:break-all"},o={class:"d-F d-i"},d={value:"value"};const n=e("magix"),r=e("./tojson");n.applyStyle("d-b",".d-9{width:100%;height:500px}"),i.exports=n.View.extend({tmpl:(e,t,i,n)=>{let r,p,c=[],{i18n:h,body:g}=e;return p=[t(0,n(h("b")))],r=[t("h5",a,p)],c.push(t("div",s,r)),r=[t("textarea",{class:"d-9 d-b",id:"ta_"+i,value:n(g)},0,d)],c.push(t("div",l,r)),p=[t(0,n(h("c")))],r=[t("button",{"mx5-click":i+"\x1e_K()",class:"d-A d-e",type:"button"},p)],p=[t(0,n(h("d")))],r.push(t("button",{"mx5-click":i+"\x1e_M()",class:"d-A d-e d-f d-t",type:"button"},p)),c.push(t("div",o,r)),t(i,0,c)},init(e){this._J=e.dialog},render(){this.digest({body:r()})},"_K<click>"(){this._J.close()},"_M<click>"(){let e,t=n.node("ta_"+this.id).value.trim();try{e=JSON.parse(t)}catch(e){return void this.owner.parent(2).invoke("alert",["\u89e3\u6790JSON\u5931\u8d25\uff1a"+e.message])}n.State.fire("d",{_L:e}),this._J.close()}})}),define("designer/header",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/follower"],(e,t,i)=>{let s,a,l,o,d,n={class:"d-L d-M d-z"},r={class:"d-G d-L d-M d-a_ d-z"},p={class:"d-B d-ab d-ad"},c={class:"d-_ d-af"},h={class:"d-ae"},g={class:"d-ag"},u={class:"d-A d-G d-L d-M d-aa"};const x=e("magix"),f=e("../gallery/mx-dragdrop/index"),m=e("../gallery/mx-pointer/follower");x.applyStyle("d-c",".d-a_{margin-left:100px}.d-aa{margin-right:10px}.d-ab,.d-ac{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.d-ad{grid-template-columns:50px 10px}.d-ac{float:left;border-radius:2px}.d-ac:hover{background:#bb4504}.d-ae{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.d-ae,.d-ab:hover{background:#ec5706}.d-ab:hover .d-ae{display:block}.d-af{grid-column:1/2;grid-row:1/2;align-self:flex-end}.d-ag{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.d-ah{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.d-ai{height:30px;width:1px;background:linear-gradient(hsla(0,0%,100%,.25),#fff 30%,#fff 70%,hsla(0,0%,100%,.25));margin:2px 12px;float:left}"),i.exports=x.View.extend({tmpl:(e,t,i,x,f,m,b)=>{let _,y,v,w,k,S,z,T,j,L=[],{i18n:A,elements:I}=e;s?_=[s]:(y=[t(0,"\ue64b")],_=[s=t("i",{_:"_",class:"d-_ d-aa"},y)]),_.push(t(0,x(A("e")))),L.push(t("div",n,_)),_=[];for(let e=I.length,s=0;s<e;s+=1){let e=I[s];if(y=[],e.spliter)v=a?[a]:[a=t("div",{_:"a",class:"d-ai"})],y.push(...v);else{if(v=[],e.subs){S=[t(0,x(e.icon),1)],k=[t("i",c,S)],S=[t(0,x(A(e.title)))],k.push(t("b",{class:"d-ag",title:x(A(e.title))},S)),l?k.push(l):(S=[t(0,"\ue73a")],k.push(l=t("i",{_:"b",class:"d-_ d-ah"},S))),S=[];for(let a=e.subs,l=a.length,o=0;o<l;o+=1){let e=a[o];j=[t(0,x(e.icon),1)],T=[t("i",c,j)],j=[t(0,x(A(e.title)))],T.push(t("b",g,j)),z=[t("div",{class:"d-ac","mx5-mousedown":i+"\x1e_R({ctrl:'"+b(m,e,"\x1e_."+s+".a."+o)+"'})",title:x(A(e.title))},T)],S.push(...z)}k.push(t("div",h,S)),w=[t("div",p,k)],v.push(...w)}else S=[t(0,x(e.icon),1)],k=[t("i",c,S)],S=[t(0,x(A(e.title)))],k.push(t("b",g,S)),w=[t("div",{class:"d-B d-ab","mx5-mousedown":i+"\x1e_R({ctrl:'"+b(m,e,"\x1e_."+s)+"'})",title:x(A(e.title))},k)],v.push(...w);y.push(...v)}_.push(...y)}return L.push(t("div",r,_)),o?y=[o]:(v=[t(0,"\ue6b0")],y=[o=t("i",{_:"c",class:"d-_"},v)]),d?y.push(d):(v=[t(0,"\u4fdd\u5b58")],y.push(d=t("b",{_:"d",class:"d-ag"},v))),_=[t("div",{class:"d-ab","mx5-click":i+"\x1e_s()"},y)],L.push(t("div",u,_)),t(i,0,L)},render(){let e=x.State.get("_N");this.digest({elements:e._O()})},"_R<mousedown>"(e){let{ctrl:t}=e.params,i=0;m._P(t.icon),x.State.set({_Q:t}),this._w(e,e=>{i&&(m._x(e),x.State.fire("e",{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY})),i=1},e=>{m._y(),i?e&&x.State.fire("f"):x.State.fire("g"),x.State.set({_Q:null})})},"_s<click>"(){x.State.fire("h")}}).merge(f)}),define("designer/history",["magix","./const"],(e,t,i)=>{const s=e("magix"),a=e("./const");let l,o=[],d=[],n=null,r="",p=null,c=(e,t)=>e.startsWith("_")?void 0:t,h=()=>JSON.stringify({page:s.State.get("_S"),scale:s.State.get("_c"),layouts:s.State.get("_T"),select:s.State.get("_U"),xLines:s.State.get("_m"),yLines:s.State.get("_n")},c),g=e=>{let t=JSON.parse(e),i=s.State.get("_c"),a=t.scale||i;s.State.fire("_",{json:t,scale:i!==a})};i.exports={_V(){p||(p=h())},_W:()=>({canRedo:d.length,canUndo:o.length}),_X(){o.length=0,d.length=0},_Y(){if(o.length>0){let e=o.pop();d.push(e);let t=o[o.length-1]||p;g(t)}},_Z(){let e=d.pop();e&&(o.push(e),g(e))},_s(e="_0",t=0){let i=h();e!=r&&(n&&(clearTimeout(l),o.push(n),n=null),r=e),d.length=0;let c=e=>{o.push(e),o.length>a._B&&(p=o.shift()),n=null,s.State.fire("i")};t?(n=i,clearTimeout(l),l=setTimeout(()=>{c(n)},t)):c(i)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./stage-selection","./keys","../i18n/index","./header","./toolbar","./axis","./stage"],(e,t,i)=>{let s,a;e("./header"),e("./toolbar"),e("./axis"),e("./stage");let l={class:"d-G d-au"},o={class:"d-z"};const d=e("magix"),n=e("../elements/index"),r=e("../gallery/mx-dialog/index"),p=e("./const"),c=e("./history"),h=e("../panels/index"),g=e("./stage-selection"),u=e("./keys"),x=e("../i18n/index");d.State.set({_N:n});let f=n._1();d.applyStyle("d-d",".d-aj{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.d-aj,.d-ak{position:relative}.d-ak{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.d-al{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 106px);background-color:#edeef3;transition:all .3s;margin-left:20px}.d-am{scroll-behavior:smooth}.d-an{box-shadow:inset 1px 1px 6px 2px #dadada}.d-ao{position:fixed;left:20px;top:86px;right:0;bottom:21px;pointer-events:none;z-index:1000}.d-ap,.d-aq,.d-ar,.d-as{position:absolute;background:rgba(250,117,43,.06274509803921569)}.d-aq{left:0;top:30px;bottom:30px;width:150px}.d-ar{right:0;top:30px;bottom:30px;width:150px}.d-as{left:0;right:0;top:0;height:30px}.d-ap{left:0;right:0;bottom:0;height:30px}.d-at{display:none}.d-au{height:20px;background:#fafafa;position:relative;z-index:200;border-top:1px solid #ccc;font-size:12px;color:#999;padding-left:25px;line-height:20px}");let m=/^(?:input|textarea)$/i,b={Digit1:0,Digit2:1,Digit3:2,Digit4:3};i.exports=d.View.extend({tmpl:(e,t,i,d)=>{let n,r,p=[],{i18n:c}=e;return p.push(t("div",{"mx5-owner":i,"mx5-view":"designer/header",class:"d-aj"}),t("div",{"mx5-owner":i,"mx5-view":"designer/toolbar",class:"d-G d-ak"}),t("div",{"mx5-owner":i,"mx5-view":"designer/axis?scroll=stage",class:"d-B d-G"}),t("div",{"mx5-owner":i,"mx5-view":"designer/stage",id:"stage",class:"d-H d-al d-an"})),r=[t(0,d(c("g")),1)],n=[t("div",o,r)],s?n.push(s):n.push(s=t("div",{_:"_",class:"d-A d-t",id:"ss"})),p.push(t("div",l,n)),a?p.push(a):(n=[t("div",{class:"d-aq"}),t("div",{class:"d-ar"}),t("div",{class:"d-as"}),t("div",{class:"d-ap"})],p.push(a=t("div",{_:"a",id:"sdsz",class:"d-ao d-at"},n))),t(i,0,p)},init(){d.State.on("_",e=>{(e=>{let t=d.State.get("_S"),i=d.State.get("_T"),s=d.State.get("_U"),a=d.State.get("_m"),l=d.State.get("_n"),{elements:o,map:r}=n._2(e.layouts);i.length=0,i.push(...o),a.length=0,e.xLines&&a.push(...e.xLines),l.length=0,e.yLines&&l.push(...e.yLines);let p={};if(s.length=0,e.select)for(let t of e.select){let e=r[t.id];e&&(p[e.id]=1,s.push(e))}Object.assign(t,e.page),d.State.set({_c:e.scale||1,_3:p})})(e.json)}),d.State.on("d",e=>{let t=d.node("stage");t&&(t.scrollLeft=0,t.scrollTop=0);let{page:i,layouts:s}=e._L,{elements:a}=n._2(s),l=f._7();Object.assign(l,i),d.State.set({_S:l,_T:[...a]}),g._8(),d.State.fire("b"),d.State.fire("a"),c._s()}),d.State.on("j",e=>{let t=d.node("ss");t&&(t.innerHTML=e.busy?x("f"):"")}),d.State.on("h",()=>{this.mxDialog("designer/content",{width:800})}),d.State.set({_9:f,_S:f._7(),_c:p._c,_T:[],_U:[],_3:{},_m:[],_n:[]}),c._V()},async render(){await this.digest(),h._a_()},"$doc<keydown>"(e){if((()=>{let e=document.activeElement;return m.test(e.tagName)||e.isContentEditable})())return;let{shiftKey:t,metaKey:i,ctrlKey:s,code:a}=e;if(a!=u._||!t||s||i)s||i||!d.has(b,a)?(i||s)&&a==u.a&&(e.preventDefault(),d.State.fire("h",{shift:e.shiftKey})):((e,t)=>{let i=h._4()[e];i&&(t?h._5(i.id):h._6(i.id))})(b[a],t);else{h._aa()?h._ab():h._ac()}}}).merge(r)}),define("designer/keys",[],(e,t,i)=>{i.exports={b:"Backspace",c:"Delete",d:"Tab",_:"KeyZ",e:"KeyY",a:"KeyS",f:"Equal",g:"Minus",h:"Digit0"}}),define("designer/props",[],(e,t,i)=>{i.exports={_ad:2,_ae:4,_af:8,_ag:16,_ah:32,_ai:64,_aj:128,_ak:256,_al:512,_am:1024,_an:2048,_ao:4096}}),define("designer/service",["magix"],(e,t,i)=>{const s=e("magix");let a=s.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set({data:i.data}),t()}).catch(e=>{t({msg:e.message})})});a.add([{name:"_ap",url:s.config("getImageUrl"),cache:18e5},{name:"_aq",url:s.config("getFieldUrl"),cache:18e5},{name:"_ar",cache:18e5}]),i.exports={fetch:(e,t)=>(new a).all(e,t),save:(e,t)=>(new a).save(e,t)}}),define("designer/stage-dragdrop",["magix","../gallery/mx-dragdrop/index","../gallery/mx-runner/index","./const","./history","./stage-elements"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-runner/index"),o=e("./const"),d=e("./history"),n=e("./stage-elements");i.exports={_aA(e,t){let i,r=null,p=null,c=null,h=null,g=null,u=this,x=0,f=0,m=null,b=null,_=0,y=()=>{p=null,h=null,r=null,g=null,_=0},v=()=>{let t=e.getBoundingClientRect(),i=e.scrollWidth>e.clientWidth+o._F,s=e.scrollHeight>e.clientHeight+o._F;m.pageY>t.top&&m.pageY<t.top+t.height&&m.pageX>t.left&&m.pageX<t.left+t.width&&(i||s)?t.top+t.height-o._E<m.pageY?e.scrollTop+e.clientHeight+o._F<e.scrollHeight?++x>o._I&&(c.display="none",e.scrollTop+=o._H):x=0:t.top+o._E>m.pageY?e.scrollTop<o._F?x=0:++x>o._I&&(e.scrollTop-=o._H,c.display="none"):t.left+o._D>m.pageX?e.scrollLeft<o._F?x=0:++x>o._I&&(e.scrollLeft-=o._H,c.display="none"):t.left+t.width-o._D<m.pageX&&e.scrollLeft+e.clientWidth+o._F<e.scrollWidth?++x>o._I&&(c.display="none",e.scrollLeft+=o._H):x=0:x=0};s.State.on("e",d=>{if(m=d,f||(f=1,i||(i=s.node("sdsz")),i.classList.remove("d-at"),e.addEventListener("scroll",y),e.classList.remove("d-am"),b=n._as(),l._at(o._G,v)),x)return;let w=a._aw(d.clientX,d.clientY);if(d.copy!=_&&(_=d.copy,p=null),w!=p){p=w,c||(c=s.node(t+"_bar").style),h||(h=s.node("stage_outer").getBoundingClientRect());let e=u._ax(b,w,d.moved,_);r=e||null}if(r){let e=u._ay(r,d);e?(g=e,c.left=e.rect.left-h.left+"px",c.top=e.rect.top-h.top+"px",c.width=e.rect.width+"px",c.display="block"):(g=null,c.display="none")}else c&&(g=null,c.display="none")}),s.State.on("f",()=>{x=0,f&&(f=0,i.classList.add("d-at"),e.removeEventListener("scroll",y),l._au(v)),g&&(c.display="none",r.moved?n._av(g,r.moved,_):n._R(g,!0),s.State.fire("b"),d._s()),y(),b=null}),s.State.on("g",()=>{let e=s.State.get("_Q"),t=s.State.get("_T"),i=s.State.get("_U")[0],a=!0;i&&"layout"==i.role&&(t=i.props.columns[0].elements,a="layout"==e.role);let{id:l}=n._R({elements:t,ctrl:e,index:0},a);s.State.fire("b"),d._s(),n._az(l)})},_ay(e,{pageY:t,copy:i}){let a=!1,{entity:l,subIndex:d,ctrl:n,moved:r,role:p}=e;if(r&&"stage"!=p){let e=t=>{if(t.id==l.id)a=!0;else if("layout"==t.role)for(let i of t.props.columns){for(let t of i.elements)if(e(t),a)break;if(a)break}};e(r)}if(!i&&a)return;let c=(e.layout||e.node).getBoundingClientRect(),h={left:c.left,top:c.top,width:c.width,height:c.height};if("stage"==e.role){let t=e.elements.length;return t&&(h.top+=h.height),{ctrl:e.ctrl,elements:e.elements,index:t,rect:h}}if("layout"==e.role){let s=e.index,a=s;h.top+h.height/2<t?(h.top+=h.height,s++,a++):a--;let l=e.ownerList[a];return!i&&l&&r&&l.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}if("column"==e.role){let a=e.index,p=a,g=h.top+o._C>=t,u=h.top+h.height-o._C<=t;if(u?(a++,p++,h.top+=h.height):p--,g||u){let t=e.ownerList[p];return!i&&t&&r&&t.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:a,rect:h}}g=(h={left:(c=e.node.getBoundingClientRect()).left,top:c.top,width:c.width,height:c.height}).top+o._C>=t;let x,f=l.props.columns[d].elements,m=f.length;if(m){if(g?(a=0,x=f[0]):(a=m,x=f[m-1]),!i&&r&&r.id==x.id)return;h={left:(c=s.node(x.id).getBoundingClientRect()).left,top:c.top+(g?0:c.height),width:c.width,height:c.height}}else a=0;return{elements:f,ctrl:n,index:a,rect:h}}{let s=e.index,a=s;h.top+h.height/2<t?(h.top+=h.height,s++,a++):a--;let l=e.ownerList[a];return!i&&l&&r&&l.id==r.id?null:{ctrl:e.ctrl,elements:e.ownerList,index:s,rect:h}}},_ax(e,t,i,a){let l=s.State.get("_Q"),o=s.node("stage_canvas");if((l||i)&&s.inside(t,o)){let d=s.State.get("_T");if(t==o){let e=d[d.length-1],t=o;if(!a&&i&&e.id==i.id)return;return e&&(t=s.node(e.id)),{moved:i,elements:d,ctrl:l,role:"stage",node:t}}{let d="";do{if(d=t.getAttribute("role"))break;t=t.parentNode}while(t!=o);if(d){let r=t.getAttribute("column"==d?"pid":"eid"),{entity:p,pInfo:c}=n._aB(e,r);if(i&&!a&&i.id==p.id)return;p.props.locked&&(d=(t=s.node(p.id)).getAttribute("role"));let h=-1,g=null;if("column"==d)for(h=0|t.getAttribute("index"),g=t;g!=o&&"layout"!=g.getAttribute("role");)g=g.parentNode;return{ctrl:l,role:d,moved:i,subIndex:h,layout:g,entity:p,index:c.index,ownerList:c.elements,node:t}}}}return null}}}),define("designer/stage-elements",["magix","../gallery/mx-pointer/follower","./history","./stage-selection"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-pointer/follower"),l=e("./history"),o=e("./stage-selection");let d=(e,t)=>{let i=s.node(e);if(t||(t=1),t>5)return;if(!i)return void setTimeout(d,20,e,t++);let a=s.node("stage_outer").parentNode,l=a.getBoundingClientRect(),o={x:l.left,y:l.top,width:l.width-20,height:l.height-20},n={x:(l=i.getBoundingClientRect()).left,y:l.top,width:l.width,height:l.height};if(!((e,t)=>{let i=e.width/2,s=e.height/2,a=t.width/2,l=t.height/2,o=e.x+i,d=e.y+s,n=t.x+a,r=t.y+l;return Math.abs(n-o)<=i+a&&Math.abs(r-d)<=s+l})(o,n)){let e=a.clientHeight/3;a.classList.add("d-am"),a.scrollTop=n.y+a.scrollTop-o.y-e}},n=(e,t)=>{if("id"!=e)return t};i.exports={_R(e,t){let i=e.ctrl,a=i._7(),l={id:s.guid("e_"),role:i.role,ctrl:i,props:a};return e.elements.splice(e.index,0,l),t&&o._8(l),l},_av(e,t,i){let a=null,l=e=>{let s=0,o=!1;for(let d of e){if(d.id==t.id){i||e.splice(s,1,null),a=e,o=!0;break}if("layout"==d.role)for(let e of d.props.columns)if(l(e.elements),o)break;s++}},d=s.State.get("_T");if(l(d),i){let e=JSON.stringify(t,n),i=JSON.parse(e),a=s.State.get("_N"),{elements:l}=a._2([i]);t=l[0],o._8(t)}if(e.elements.splice(e.index,0,t),!i)for(let e=a.length;e--;)if(null===a[e]){a.splice(e,1);break}},_as(){let e=s.State.get("_T"),t={},i={},a=(e,s,l)=>{let o=0;for(let d of e){if(t[d.id]={pId:s,index:o,elements:e,role:l},i[d.id]=d,"layout"==d.role)for(let e of d.props.columns)a(e.elements,d.id,d.role);o++}};return a(e,0,"stage"),{idMap:t,elements:i}},_aB(e,t){let{idMap:i,elements:a}=e,l=t,o=t;do{a[l].props.locked&&(o=l),l=i[l].pId}while(s.has(i,l));let d=i[o];return{entity:a[o],pInfo:d}},_aC(e,t){let{element:i}=e.params,d=this._as(),{entity:n}=this._aB(d,i.id),r=s.State.get("_U");if(void 0!==e.button&&0!=e.button){let e=!1;for(let t of r)if(t.id===i.id){e=!0;break}return void(e||o._8(n)&&l._s())}let p=!1;for(let e of r)n.id==e.id&&(p=!0);if(p||(o._8(n)&&l._s(),r.length=0,r.push(n)),n.props.locked)return;let c,h=n.ctrl,g=1,u=()=>{s.State.fire("e",{pageX:c.pageX,pageY:c.pageY,clientX:c.clientX,clientY:c.clientY,copy:g,moved:n})},x=e=>{c&&(a._x(c,g=e.shiftKey),u())},f=e=>{c&&(a._x(c,g=e.shiftKey),u())};s.State.on("k",x),s.State.on("l",f),a._P(h.icon),t._w(e,e=>{g=e.shiftKey,c=e,a._x(e,e.shiftKey),u()},e=>{if(a._y(),s.State.off("k",x),s.State.off("l",f),e){let t=s.node("stage_outer").parentNode,i=t.scrollTop;e.preventDefault(),s.State.fire("f"),i!=t.scrollTop&&(t.scrollTop=i)}})},_aD(){let e=s.State.get("_U"),t=s.State.get("_T"),i=!1;if(e.length){let a=s.toMap(e,"id"),l=e=>{for(let t,s=e.length;s--;)if(!(t=e[s]).props.locked)if(a[t.id])i=!0,e.splice(s,1);else if("layout"==t.role)for(let e of t.props.columns)l(e.elements)};l(t),i&&o._8()}return i},_aE(e){let t=s.State.get("_U"),i=s.State.get("_T");if(i.length){let s=t.length,a=t[0],n=null;if(0===s||s>1)n=i[e.shiftKey?i.length-1:0];else{let t=null,s=null,l=null,o=null,d=!1,r=a.id,p=e=>{for(let i of e)if(i.id==r?(d=!0,t=i):t&&!s?s=i:d?o=i:l=i,"layout"==i.role&&!i.props.locked)for(let e of i.props.columns)p(e.elements)};p(i),e.shiftKey?l?n=l:"layout"==(n=i[i.length-1]).role&&o&&(n=o):n=s||i[0]}a&&n.id==a.id||(o._8(n),l._s(),d(n.id))}},_az:d}}),define("designer/stage-selection",["magix"],(e,t,i)=>{const s=e("magix");i.exports={_8(e){let t=s.State.get("_U"),i=t.length,a=!1;if(i||e){let l=i>1?null:t[0];t.length=0,e?(t.push(e),a=e!=l):i&&(a=!0),a&&(s.State.set({_3:s.toMap(t,"id")}),s.State.fire("m"))}return a}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-selection","./stage-dragdrop"],(e,t,i)=>{const s=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("./history"),o=e("./keys"),d=e("./stage-elements"),n=e("./stage-selection"),r=e("./stage-dragdrop");s.applyStyle("d-e",".d-av{outline:0;display:flex;position:relative}.d-aw{padding:100px 240px}.d-ax{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}@-webkit-keyframes d-a{0%{background-position:10px 0}to{background-position:0 0}}@keyframes d-a{0%{background-position:10px 0}to{background-position:0 0}}.d-ay{height:2px;background:linear-gradient(45deg,#fa742b 25%,#fff 0,#fff 50%,#fa742b 0,#fa742b 75%,#fff 0,#fff);background-size:10px 10px;position:absolute;display:none;pointer-events:none;margin-top:-1px;transition:all .08333333s;animation:d-a .4s linear infinite reverse}");let p=/^(?:input|textarea)$/i;i.exports=s.View.extend({tmpl:(e,t,i,s,a,l,o)=>{let d,n,r,p,c,h=[],{scale:g,page:u,layouts:x}=e;p=[];for(let e=x.length,a=0;a<e;a+=1){let e=x[a];c=[t("div",{"mx5-owner":i,$:"layouts",class:"d-B",id:s(e.id),"mx5-view":"elements/"+s(e.ctrl.role)+"/designer?element="+o(l,e,"\x1eb."+a),"mx5-mousedown":i+"\x1e\x1e_aH({element:'"+o(l,e,"\x1eb."+a)+"'})",role:s(e.ctrl.role),eid:s(e.id)})],p.push(...c)}return r="min-width:"+s(u.width)+"px;min-height:"+s(u.height)+"px;background:"+s(u.background)+";",u.backgroundImage&&(r+="background-image:url("+s(u.backgroundImage)+");background-repeat:"+s("full"==u.backgroundRepeat?"no-repeat":u.backgroundRepeat)+";background-size:","full"==u.backgroundRepeat?r+="100% 100%":r+=s(u.backgroundWidth)+"px "+s(u.backgroundHeight)+"px;"),n=[t("div",{class:"d-ax",id:"stage_canvas",style:r},p)],d=[t("div",{class:"d-aw",style:"transform-origin:0 0;transform:scale("+s(g)+");padding:"+s(100/g)+"px "+s(240/g)+"px"},n),t("div",{class:"d-ay",id:i+"_bar"})],h.push(t("div",{class:"d-av",id:"stage_outer","mx5-contextmenu":i+"\x1e_A()","mx5-mousedown":i+"\x1e_aI()",tabindex:"0","mx5-keydown":i+"\x1e_aJ()","mx5-keyup":i+"\x1e_aK()"},d)),t(i,0,h)},init(){let e=e=>{let t=s.State.get("_T");e?this.digest({layouts:t}):this.set({layouts:t})},t=this.render.bind(this);s.State.on("_",t),s.State.on("c",t),s.State.on("a",t),s.State.on("b",e),s.State.on("m",e),s.State.on("e",()=>{this._aF=1}),s.State.on("f",()=>{this._aF=0}),r._aA(this.root,this.id)},render(){let e=s.State.get("_S"),t=s.State.get("_T");this.digest({layouts:t,scale:s.State.get("_c"),page:e})},"_aH<mousedown>"(e){"layout"==e.from||e._aG||d._aC(e,this)},"_aI<mousedown>"(e){let t=e.target;s.inside(s.node("stage_canvas"),t)&&(e.shiftKey||e.metaKey||e.ctrlKey||n._8()&&l._s())},"$doc<keydown>"(e){this._aF||(()=>{let e=document.activeElement;return p.test(e.tagName)||e.isContentEditable})()||(e.metaKey||e.ctrlKey?e.code==o._?(e.preventDefault(),e.shiftKey?l._Z():l._Y()):e.code==o.e&&(e.preventDefault(),l._Z()):e.code==o.d?(e.preventDefault(),d._aE(e)):e.code!=o.b&&e.code!=o.c||(e.preventDefault(),d._aD()&&(s.State.fire("b"),l._s())))},"_aJ<keydown>"(e){s.State.fire("k",e)},"_aK<keyup>"(e){s.State.fire("l",e)},"_A<contextmenu>"(e){e.preventDefault()}}).merge(a)}),define("designer/tojson",["magix"],(e,t,i)=>{const s=e("magix");let a=(e,t)=>{if(!e.startsWith("@")&&!e.startsWith("_"))return t};i.exports=(()=>{let e=s.State.get("_T"),t=s.State.get("_S"),i=s.State.get("_N")._1(),l={unit:"px"};for(let e of i.props)e.json&&(l[e.key]=t[e.key]);let o=[],d=(e,t)=>{for(let{role:i,ctrl:s,props:a,id:l}of e){let e={id:`${l}`,role:i,props:{}};for(let t of s.props)t.json&&(t.encode?t.encode(e.props,a):t.read?e.props[t.key]=t.read(a[t.key]):e.props[t.key]=a[t.key]);if("layout"==i)for(let t of e.props.columns)if(t.elements){let e=[];d(t.elements,e),t.elements=e}t.push(e)}};d(e,o);let n={page:l,layouts:o};return JSON.stringify(n,a,2)})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,i)=>{let s;const a=e("magix"),l=e("./stage-elements"),o=e("./history");i.exports=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d=[],{elements:n,i18n:r}=e,p=n.length;return s?d.push(s):d.push(s=t("i",{_:"_",class:"d-aC"})),o=[t(0,"\ue600")],l="d-_ d-aA",(p<1||n[0].props.locked)&&(l+=" d-aD"),d.push(t("i",{title:a(r("h"))+"(Delete)","mx5-click":i+"\x1e_aL()",class:l},o)),t(i,0,d)},init(){let e=this.render.bind(this);a.State.on("_",e),a.State.on("m",e),a.State.on("n",e)},render(){this.digest({elements:a.State.get("_U")})},"_aL<click>"(e){e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled")||l._aD()&&(a.State.fire("b"),o._s())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,i)=>{const s=e("magix"),a=e("./history");i.exports=s.View.extend({tmpl:(e,t,i,s)=>{let a,l,o=[],{status:d,i18n:n}=e;return l=[t(0,"\ue682")],a="d-_ d-aA",d.canUndo||(a+=" d-aD"),o.push(t("i",{title:s(n("i")),"mx5-click":i+"\x1e_aM({s:'-',b:"+s(d.canUndo)+"})",class:a},l)),l=[t(0,"\ue682")],a="d-_ d-aA d-O",d.canRedo||(a+=" d-aD"),o.push(t("i",{title:s(n("j")),"mx5-click":i+"\x1e_aM({s:'+',b:"+s(d.canRedo)+"})",class:a},l)),t(i,0,o)},init(){let e=this.render.bind(this);s.State.on("_",e),s.State.on("i",e)},render(){this.digest({status:a._W()})},"_aM<click>"(e){if(e.eventTarget.classList.contains("@toolbar.less:toolbar-item-disabled"))return;let{s:t,b:i}=e.params;i&&("-"==t?a._Y():a._Z())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,i)=>{const s=e("magix"),a=e("../panels/index");i.exports=s.View.extend({tmpl:(e,t,i,s,a,l,o,d)=>{let n,r,p,c=[],{panels:h,i18n:g}=e;for(let e=h.length,a=0;a<e;a+=1){let e=h[a];p=[t(0,s(e.icon),1)],r="d-_ d-aA",e._&&(r+=" d-aB"),n=[t("i",{"mx5-click":i+"\x1e_6({id:'"+d(e.id)+"'})",title:s(g(e._?"k":"l",e.title,a+1)),class:r},p)],c.push(...n)}return t(i,0,c)},init(){s.State.on("o",()=>{this.render()})},render(){this.digest({panels:a._4()})},"_6<click>"(e){let{id:t}=e.params;a._6(t)}})}),define("designer/toolbar-scale",["magix","./history","./keys"],(e,t,i)=>{let s={class:"d-aE"};const a=e("magix"),l=e("./history"),o=e("./keys");i.exports=a.View.extend({tmpl:(e,t,i,a)=>{let l,o,d=[],{scale:n,i18n:r}=e;return o=[t(0,"\ue602")],l="d-_ d-aA",n<=.5&&(l+=" d-aD"),d.push(t("i",{"mx5-click":i+"\x1escale({s:'-'})",title:a(r("zoomOut")),class:l},o)),o=[t(0,a(100*n)+"%")],d.push(t("b",s,o)),o=[t(0,"\ue699")],l="d-_ d-aA",n>=2&&(l+=" d-aD"),d.push(t("i",{"mx5-click":i+"\x1escale({s:'+'})",title:a(r("zoomIn")),class:l},o)),t(i,0,d)},init(){let e=this.render.bind(this);a.State.on("c",e),a.State.on("_",e)},render(){this.digest({scale:a.State.get("_c")})},"scale<click>"(e){let{s:t}=e.params,i=this.get("scale"),s=i;"+"==t?(i+=.5)>2&&(i=2):(i-=.5)<.5&&(i=.5),s!=i&&(a.State.set({_c:i}),a.State.fire("c",{step:i/s}),l._s())},"$doc<keydown>"(e){let t=this.get("scale"),i=t,{metaKey:s,ctrlKey:d,code:n}=e;(s||d)&&(n==o.f?(e.preventDefault(),(t+=.5)>2&&(t=2)):n==o.g?(e.preventDefault(),(t-=.5)<.5&&(t=.5)):n==o.h&&(e.preventDefault(),t=1),i!=t&&(a.State.set({_c:t}),a.State.fire("c",{step:t/i}),l._s()))}})}),define("designer/toolbar",["magix","../panels/index","./toolbar-do","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,i)=>{let s,a;e("./toolbar-do"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels");let l={class:"d-A d-L d-M d-v"};const o=e("magix"),d=e("../panels/index");o.applyStyle("d-f",".d-az{height:22px}.d-aA{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.d-aA:hover{background:#e6e6e6;color:#333}.d-aB,.d-aB:hover{background:#c4c4c4}.d-aC{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.d-aD{color:#aaa;cursor:not-allowed}.d-aD:hover{color:#aaa;background:transparent}.d-aE{font-weight:400;width:40px;display:inline-block;text-align:center}"),i.exports=o.View.extend({tmpl:(e,t,i,o)=>{let d,n,r,p=[],{allOpen:c,i18n:h}=e;return s?p.push(s):(d=[t("div",{"mx5-owner":i,class:"d-az","mx5-view":"designer/toolbar-do"}),t("div",{"mx5-owner":i,class:"d-az","mx5-view":"designer/toolbar-del"})],p.push(s=t("div",{_:"_",class:"d-L d-M d-v d-z"},d))),d=[t("div",{"mx5-owner":i,class:"d-az","mx5-view":"designer/toolbar-scale"})],a?d.push(a):d.push(a=t("i",{_:"a",class:"d-aC"})),d.push(t("div",{"mx5-owner":i,class:"d-az","mx5-view":"designer/toolbar-panels"})),a?d.push(a):d.push(a=t("i",{_:"a",class:"d-aC"})),r=[t(0,"\ue676")],n="d-_ d-aA",c&&(n+=" d-aB"),d.push(t("i",{"mx5-click":i+"\x1e_aN()",title:o(h(c?"m":"n")),class:n},r)),p.push(t("div",l,d)),t(i,0,p)},init(){let e=this.render.bind(this);o.State.on("o",e),this.on("destroy",()=>{o.State.off("o",e)})},render(){this.digest({allOpen:d._aa()})},"_aN<click>"(){this.get("allOpen")?d._ab():d._ac()}})});